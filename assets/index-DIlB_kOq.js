var g1=Object.defineProperty;var Jy=n=>{throw TypeError(n)};var m1=(n,e,t)=>e in n?g1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>m1(n,typeof e!="symbol"?e+"":e,t),Ip=(n,e,t)=>e.has(n)||Jy("Cannot "+t);var l=(n,e,t)=>(Ip(n,e,"read from private field"),t?t.call(n):e.get(n)),_=(n,e,t)=>e.has(n)?Jy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),y=(n,e,t,i)=>(Ip(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),A=(n,e,t)=>(Ip(n,e,"access private method"),t);var Ot=(n,e,t,i)=>({set _(s){y(n,e,s,t)},get _(){return l(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function ep(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nA={exports:{}},tp={},iA={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=Symbol.for("react.element"),v1=Symbol.for("react.portal"),y1=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),A1=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),_1=Symbol.for("react.context"),S1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),x1=Symbol.for("react.memo"),C1=Symbol.for("react.lazy"),Zy=Symbol.iterator;function k1(n){return n===null||typeof n!="object"?null:(n=Zy&&n[Zy]||n["@@iterator"],typeof n=="function"?n:null)}var sA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rA=Object.assign,oA={};function Kl(n,e,t){this.props=n,this.context=e,this.refs=oA,this.updater=t||sA}Kl.prototype.isReactComponent={};Kl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Kl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function aA(){}aA.prototype=Kl.prototype;function Pv(n,e,t){this.props=n,this.context=e,this.refs=oA,this.updater=t||sA}var Lv=Pv.prototype=new aA;Lv.constructor=Pv;rA(Lv,Kl.prototype);Lv.isPureReactComponent=!0;var e0=Array.isArray,lA=Object.prototype.hasOwnProperty,Mv={current:null},uA={key:!0,ref:!0,__self:!0,__source:!0};function cA(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)lA.call(e,i)&&!uA.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Rh,type:n,key:r,ref:o,props:s,_owner:Mv.current}}function T1(n,e){return{$$typeof:Rh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Iv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Rh}function R1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var t0=/\/+/g;function Fp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?R1(""+n.key):e.toString(36)}function pd(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Rh:case v1:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Fp(o,0):i,e0(s)?(t="",n!=null&&(t=n.replace(t0,"$&/")+"/"),pd(s,e,t,"",function(c){return c})):s!=null&&(Iv(s)&&(s=T1(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(t0,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",e0(n))for(var a=0;a<n.length;a++){r=n[a];var u=i+Fp(r,a);o+=pd(r,e,t,u,s)}else if(u=k1(n),typeof u=="function")for(n=u.call(n),a=0;!(r=n.next()).done;)r=r.value,u=i+Fp(r,a++),o+=pd(r,e,t,u,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wh(n,e,t){if(n==null)return n;var i=[],s=0;return pd(n,i,"","",function(r){return e.call(t,r,s++)}),i}function P1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Xt={current:null},gd={transition:null},L1={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:gd,ReactCurrentOwner:Mv};function hA(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Wh,forEach:function(n,e,t){Wh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Wh(n,function(){e++}),e},toArray:function(n){return Wh(n,function(e){return e})||[]},only:function(n){if(!Iv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};oe.Component=Kl;oe.Fragment=y1;oe.Profiler=A1;oe.PureComponent=Pv;oe.StrictMode=w1;oe.Suspense=b1;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L1;oe.act=hA;oe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=rA({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Mv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)lA.call(e,u)&&!uA.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Rh,type:n.type,key:s,ref:r,props:i,_owner:o}};oe.createContext=function(n){return n={$$typeof:_1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:E1,_context:n},n.Consumer=n};oe.createElement=cA;oe.createFactory=function(n){var e=cA.bind(null,n);return e.type=n,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(n){return{$$typeof:S1,render:n}};oe.isValidElement=Iv;oe.lazy=function(n){return{$$typeof:C1,_payload:{_status:-1,_result:n},_init:P1}};oe.memo=function(n,e){return{$$typeof:x1,type:n,compare:e===void 0?null:e}};oe.startTransition=function(n){var e=gd.transition;gd.transition={};try{n()}finally{gd.transition=e}};oe.unstable_act=hA;oe.useCallback=function(n,e){return Xt.current.useCallback(n,e)};oe.useContext=function(n){return Xt.current.useContext(n)};oe.useDebugValue=function(){};oe.useDeferredValue=function(n){return Xt.current.useDeferredValue(n)};oe.useEffect=function(n,e){return Xt.current.useEffect(n,e)};oe.useId=function(){return Xt.current.useId()};oe.useImperativeHandle=function(n,e,t){return Xt.current.useImperativeHandle(n,e,t)};oe.useInsertionEffect=function(n,e){return Xt.current.useInsertionEffect(n,e)};oe.useLayoutEffect=function(n,e){return Xt.current.useLayoutEffect(n,e)};oe.useMemo=function(n,e){return Xt.current.useMemo(n,e)};oe.useReducer=function(n,e,t){return Xt.current.useReducer(n,e,t)};oe.useRef=function(n){return Xt.current.useRef(n)};oe.useState=function(n){return Xt.current.useState(n)};oe.useSyncExternalStore=function(n,e,t){return Xt.current.useSyncExternalStore(n,e,t)};oe.useTransition=function(){return Xt.current.useTransition()};oe.version="18.3.1";iA.exports=oe;var C=iA.exports;const n0=ep(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=C,I1=Symbol.for("react.element"),F1=Symbol.for("react.fragment"),D1=Object.prototype.hasOwnProperty,N1=M1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O1={key:!0,ref:!0,__self:!0,__source:!0};function dA(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)D1.call(e,i)&&!O1.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:I1,type:n,key:r,ref:o,props:s,_owner:N1.current}}tp.Fragment=F1;tp.jsx=dA;tp.jsxs=dA;nA.exports=tp;var P=nA.exports,fA={exports:{}},bn={},pA={exports:{}},gA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,B){var $=L.length;L.push(B);e:for(;0<$;){var se=$-1>>>1,ee=L[se];if(0<s(ee,B))L[se]=B,L[$]=ee,$=se;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var B=L[0],$=L.pop();if($!==B){L[0]=$;e:for(var se=0,ee=L.length,fe=ee>>>1;se<fe;){var ze=2*(se+1)-1,Nt=L[ze],ge=ze+1,le=L[ge];if(0>s(Nt,$))ge<ee&&0>s(le,Nt)?(L[se]=le,L[ge]=$,se=ge):(L[se]=Nt,L[ze]=$,se=ze);else if(ge<ee&&0>s(le,$))L[se]=le,L[ge]=$,se=ge;else break e}}return B}function s(L,B){var $=L.sortIndex-B.sortIndex;return $!==0?$:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(L){for(var B=t(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=L)i(c),B.sortIndex=B.expirationTime,e(u,B);else break;B=t(c)}}function b(L){if(w=!1,E(L),!m)if(t(u)!==null)m=!0,X(x);else{var B=t(c);B!==null&&H(b,B.startTime-L)}}function x(L,B){m=!1,w&&(w=!1,g(R),R=-1),p=!0;var $=f;try{for(E(B),d=t(u);d!==null&&(!(d.expirationTime>B)||L&&!D());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var ee=se(d.expirationTime<=B);B=n.unstable_now(),typeof ee=="function"?d.callback=ee:d===t(u)&&i(u),E(B)}else i(u);d=t(u)}if(d!==null)var fe=!0;else{var ze=t(c);ze!==null&&H(b,ze.startTime-B),fe=!1}return fe}finally{d=null,f=$,p=!1}}var k=!1,T=null,R=-1,M=5,I=-1;function D(){return!(n.unstable_now()-I<M)}function Q(){if(T!==null){var L=n.unstable_now();I=L;var B=!0;try{B=T(!0,L)}finally{B?G():(k=!1,T=null)}}else k=!1}var G;if(typeof v=="function")G=function(){v(Q)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=Q,G=function(){J.postMessage(null)}}else G=function(){S(Q,0)};function X(L){T=L,k||(k=!0,G())}function H(L,B){R=S(function(){L(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,X(x))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(L){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var $=f;f=B;try{return L()}finally{f=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var $=f;f=L;try{return B()}finally{f=$}},n.unstable_scheduleCallback=function(L,B,$){var se=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?se+$:se):$=se,L){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=$+ee,L={id:h++,callback:B,priorityLevel:L,startTime:$,expirationTime:ee,sortIndex:-1},$>se?(L.sortIndex=$,e(c,L),t(u)===null&&L===t(c)&&(w?(g(R),R=-1):w=!0,H(b,$-se))):(L.sortIndex=ee,e(u,L),m||p||(m=!0,X(x))),L},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(L){var B=f;return function(){var $=f;f=B;try{return L.apply(this,arguments)}finally{f=$}}}})(gA);pA.exports=gA;var j1=pA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=C,Sn=j1;function F(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mA=new Set,qu={};function ia(n,e){Ul(n,e),Ul(n+"Capture",e)}function Ul(n,e){for(qu[n]=e,n=0;n<e.length;n++)mA.add(e[n])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gg=Object.prototype.hasOwnProperty,z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i0={},s0={};function B1(n){return gg.call(s0,n)?!0:gg.call(i0,n)?!1:z1.test(n)?s0[n]=!0:(i0[n]=!0,!1)}function U1(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $1(n,e,t,i){if(e===null||typeof e>"u"||U1(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_t[n]=new Yt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];_t[e]=new Yt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){_t[n]=new Yt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_t[n]=new Yt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_t[n]=new Yt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){_t[n]=new Yt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){_t[n]=new Yt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){_t[n]=new Yt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){_t[n]=new Yt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Fv=/[\-:]([a-z])/g;function Dv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Fv,Dv);_t[e]=new Yt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Fv,Dv);_t[e]=new Yt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Fv,Dv);_t[e]=new Yt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){_t[n]=new Yt(n,1,!1,n.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){_t[n]=new Yt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Nv(n,e,t,i){var s=_t.hasOwnProperty(e)?_t[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($1(e,t,s,i)&&(t=null),i||s===null?B1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ps=H1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vh=Symbol.for("react.element"),Aa=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),Ov=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),vA=Symbol.for("react.provider"),yA=Symbol.for("react.context"),jv=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),yg=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),wA=Symbol.for("react.offscreen"),r0=Symbol.iterator;function su(n){return n===null||typeof n!="object"?null:(n=r0&&n[r0]||n["@@iterator"],typeof n=="function"?n:null)}var He=Object.assign,Dp;function mu(n){if(Dp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Dp=e&&e[1]||""}return`
`+Dp+n}var Np=!1;function Op(n,e){if(!n||Np)return"";Np=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var u=`
`+s[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{Np=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mu(n):""}function W1(n){switch(n.tag){case 5:return mu(n.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 2:case 15:return n=Op(n.type,!1),n;case 11:return n=Op(n.type.render,!1),n;case 1:return n=Op(n.type,!0),n;default:return""}}function wg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ea:return"Fragment";case Aa:return"Portal";case mg:return"Profiler";case Ov:return"StrictMode";case vg:return"Suspense";case yg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case yA:return(n.displayName||"Context")+".Consumer";case vA:return(n._context.displayName||"Context")+".Provider";case jv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Hv:return e=n.displayName||null,e!==null?e:wg(n.type)||"Memo";case Ds:e=n._payload,n=n._init;try{return wg(n(e))}catch{}}return null}function V1(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wg(e);case 8:return e===Ov?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function AA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G1(n){var e=AA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Gh(n){n._valueTracker||(n._valueTracker=G1(n))}function EA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=AA(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function af(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ag(n,e){var t=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function o0(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Sr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _A(n,e){e=e.checked,e!=null&&Nv(n,"checked",e,!1)}function Eg(n,e){_A(n,e);var t=Sr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?_g(n,e.type,t):e.hasOwnProperty("defaultValue")&&_g(n,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function a0(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function _g(n,e,t){(e!=="number"||af(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var vu=Array.isArray;function Ia(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Sr(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Sg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function l0(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(F(92));if(vu(t)){if(1<t.length)throw Error(F(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Sr(t)}}function SA(n,e){var t=Sr(e.value),i=Sr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function u0(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function bA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?bA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xh,xA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Xh=Xh||document.createElement("div"),Xh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ku(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X1=["Webkit","ms","Moz","O"];Object.keys(Nu).forEach(function(n){X1.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Nu[e]=Nu[n]})});function CA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nu.hasOwnProperty(n)&&Nu[n]?(""+e).trim():e+"px"}function kA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=CA(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var Y1=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xg(n,e){if(e){if(Y1[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Cg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kg=null;function zv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tg=null,Fa=null,Da=null;function c0(n){if(n=Mh(n)){if(typeof Tg!="function")throw Error(F(280));var e=n.stateNode;e&&(e=op(e),Tg(n.stateNode,n.type,e))}}function TA(n){Fa?Da?Da.push(n):Da=[n]:Fa=n}function RA(){if(Fa){var n=Fa,e=Da;if(Da=Fa=null,c0(n),e)for(n=0;n<e.length;n++)c0(e[n])}}function PA(n,e){return n(e)}function LA(){}var jp=!1;function MA(n,e,t){if(jp)return n(e,t);jp=!0;try{return PA(n,e,t)}finally{jp=!1,(Fa!==null||Da!==null)&&(LA(),RA())}}function Qu(n,e){var t=n.stateNode;if(t===null)return null;var i=op(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(F(231,e,typeof t));return t}var Rg=!1;if(bs)try{var ru={};Object.defineProperty(ru,"passive",{get:function(){Rg=!0}}),window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{Rg=!1}function q1(n,e,t,i,s,r,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Ou=!1,lf=null,uf=!1,Pg=null,K1={onError:function(n){Ou=!0,lf=n}};function Q1(n,e,t,i,s,r,o,a,u){Ou=!1,lf=null,q1.apply(K1,arguments)}function J1(n,e,t,i,s,r,o,a,u){if(Q1.apply(this,arguments),Ou){if(Ou){var c=lf;Ou=!1,lf=null}else throw Error(F(198));uf||(uf=!0,Pg=c)}}function sa(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function IA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function h0(n){if(sa(n)!==n)throw Error(F(188))}function Z1(n){var e=n.alternate;if(!e){if(e=sa(n),e===null)throw Error(F(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return h0(s),n;if(r===i)return h0(s),e;r=r.sibling}throw Error(F(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(t.alternate!==i)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?n:e}function FA(n){return n=Z1(n),n!==null?DA(n):null}function DA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=DA(n);if(e!==null)return e;n=n.sibling}return null}var NA=Sn.unstable_scheduleCallback,d0=Sn.unstable_cancelCallback,ex=Sn.unstable_shouldYield,tx=Sn.unstable_requestPaint,Ve=Sn.unstable_now,nx=Sn.unstable_getCurrentPriorityLevel,Bv=Sn.unstable_ImmediatePriority,OA=Sn.unstable_UserBlockingPriority,cf=Sn.unstable_NormalPriority,ix=Sn.unstable_LowPriority,jA=Sn.unstable_IdlePriority,np=null,Di=null;function sx(n){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(np,n,void 0,(n.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:ax,rx=Math.log,ox=Math.LN2;function ax(n){return n>>>=0,n===0?32:31-(rx(n)/ox|0)|0}var Yh=64,qh=4194304;function yu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hf(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=yu(a):(r&=o,r!==0&&(i=yu(r)))}else o=t&~s,o!==0?i=yu(o):r!==0&&(i=yu(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ui(e),s=1<<t,i|=n[t],e&=~s;return i}function lx(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ux(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ui(r),a=1<<o,u=s[o];u===-1?(!(a&t)||a&i)&&(s[o]=lx(a,e)):u<=e&&(n.expiredLanes|=a),r&=~a}}function Lg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function HA(){var n=Yh;return Yh<<=1,!(Yh&4194240)&&(Yh=64),n}function Hp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ph(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ui(e),n[e]=t}function cx(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ui(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function Uv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ui(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var we=0;function zA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var BA,$v,UA,$A,WA,Mg=!1,Kh=[],gr=null,mr=null,vr=null,Ju=new Map,Zu=new Map,Os=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f0(n,e){switch(n){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Ju.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(e.pointerId)}}function ou(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Mh(e),e!==null&&$v(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function dx(n,e,t,i,s){switch(e){case"focusin":return gr=ou(gr,n,e,t,i,s),!0;case"dragenter":return mr=ou(mr,n,e,t,i,s),!0;case"mouseover":return vr=ou(vr,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Ju.set(r,ou(Ju.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Zu.set(r,ou(Zu.get(r)||null,n,e,t,i,s)),!0}return!1}function VA(n){var e=Wr(n.target);if(e!==null){var t=sa(e);if(t!==null){if(e=t.tag,e===13){if(e=IA(t),e!==null){n.blockedOn=e,WA(n.priority,function(){UA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function md(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ig(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);kg=i,t.target.dispatchEvent(i),kg=null}else return e=Mh(t),e!==null&&$v(e),n.blockedOn=t,!1;e.shift()}return!0}function p0(n,e,t){md(n)&&t.delete(e)}function fx(){Mg=!1,gr!==null&&md(gr)&&(gr=null),mr!==null&&md(mr)&&(mr=null),vr!==null&&md(vr)&&(vr=null),Ju.forEach(p0),Zu.forEach(p0)}function au(n,e){n.blockedOn===e&&(n.blockedOn=null,Mg||(Mg=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,fx)))}function ec(n){function e(s){return au(s,n)}if(0<Kh.length){au(Kh[0],n);for(var t=1;t<Kh.length;t++){var i=Kh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(gr!==null&&au(gr,n),mr!==null&&au(mr,n),vr!==null&&au(vr,n),Ju.forEach(e),Zu.forEach(e),t=0;t<Os.length;t++)i=Os[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Os.length&&(t=Os[0],t.blockedOn===null);)VA(t),t.blockedOn===null&&Os.shift()}var Na=Ps.ReactCurrentBatchConfig,df=!0;function px(n,e,t,i){var s=we,r=Na.transition;Na.transition=null;try{we=1,Wv(n,e,t,i)}finally{we=s,Na.transition=r}}function gx(n,e,t,i){var s=we,r=Na.transition;Na.transition=null;try{we=4,Wv(n,e,t,i)}finally{we=s,Na.transition=r}}function Wv(n,e,t,i){if(df){var s=Ig(n,e,t,i);if(s===null)qp(n,e,i,ff,t),f0(n,i);else if(dx(s,n,e,t,i))i.stopPropagation();else if(f0(n,i),e&4&&-1<hx.indexOf(n)){for(;s!==null;){var r=Mh(s);if(r!==null&&BA(r),r=Ig(n,e,t,i),r===null&&qp(n,e,i,ff,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else qp(n,e,i,null,t)}}var ff=null;function Ig(n,e,t,i){if(ff=null,n=zv(i),n=Wr(n),n!==null)if(e=sa(n),e===null)n=null;else if(t=e.tag,t===13){if(n=IA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ff=n,null}function GA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nx()){case Bv:return 1;case OA:return 4;case cf:case ix:return 16;case jA:return 536870912;default:return 16}default:return 16}}var fr=null,Vv=null,vd=null;function XA(){if(vd)return vd;var n,e=Vv,t=e.length,i,s="value"in fr?fr.value:fr.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return vd=s.slice(n,1<i?1-i:void 0)}function yd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Qh(){return!0}function g0(){return!1}function xn(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Qh:g0,this.isPropagationStopped=g0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Qh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Qh)},persist:function(){},isPersistent:Qh}),e}var Ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gv=xn(Ql),Lh=He({},Ql,{view:0,detail:0}),mx=xn(Lh),zp,Bp,lu,ip=He({},Lh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lu&&(lu&&n.type==="mousemove"?(zp=n.screenX-lu.screenX,Bp=n.screenY-lu.screenY):Bp=zp=0,lu=n),zp)},movementY:function(n){return"movementY"in n?n.movementY:Bp}}),m0=xn(ip),vx=He({},ip,{dataTransfer:0}),yx=xn(vx),wx=He({},Lh,{relatedTarget:0}),Up=xn(wx),Ax=He({},Ql,{animationName:0,elapsedTime:0,pseudoElement:0}),Ex=xn(Ax),_x=He({},Ql,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Sx=xn(_x),bx=He({},Ql,{data:0}),v0=xn(bx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=kx[n])?!!e[n]:!1}function Xv(){return Tx}var Rx=He({},Lh,{key:function(n){if(n.key){var e=xx[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Cx[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(n){return n.type==="keypress"?yd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Px=xn(Rx),Lx=He({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y0=xn(Lx),Mx=He({},Lh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),Ix=xn(Mx),Fx=He({},Ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dx=xn(Fx),Nx=He({},ip,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=xn(Nx),jx=[9,13,27,32],Yv=bs&&"CompositionEvent"in window,ju=null;bs&&"documentMode"in document&&(ju=document.documentMode);var Hx=bs&&"TextEvent"in window&&!ju,YA=bs&&(!Yv||ju&&8<ju&&11>=ju),w0=" ",A0=!1;function qA(n,e){switch(n){case"keyup":return jx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _a=!1;function zx(n,e){switch(n){case"compositionend":return KA(e);case"keypress":return e.which!==32?null:(A0=!0,w0);case"textInput":return n=e.data,n===w0&&A0?null:n;default:return null}}function Bx(n,e){if(_a)return n==="compositionend"||!Yv&&qA(n,e)?(n=XA(),vd=Vv=fr=null,_a=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YA&&e.locale!=="ko"?null:e.data;default:return null}}var Ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Ux[n.type]:e==="textarea"}function QA(n,e,t,i){TA(i),e=pf(e,"onChange"),0<e.length&&(t=new Gv("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Hu=null,tc=null;function $x(n){lE(n,0)}function sp(n){var e=xa(n);if(EA(e))return n}function Wx(n,e){if(n==="change")return e}var JA=!1;if(bs){var $p;if(bs){var Wp="oninput"in document;if(!Wp){var _0=document.createElement("div");_0.setAttribute("oninput","return;"),Wp=typeof _0.oninput=="function"}$p=Wp}else $p=!1;JA=$p&&(!document.documentMode||9<document.documentMode)}function S0(){Hu&&(Hu.detachEvent("onpropertychange",ZA),tc=Hu=null)}function ZA(n){if(n.propertyName==="value"&&sp(tc)){var e=[];QA(e,tc,n,zv(n)),MA($x,e)}}function Vx(n,e,t){n==="focusin"?(S0(),Hu=e,tc=t,Hu.attachEvent("onpropertychange",ZA)):n==="focusout"&&S0()}function Gx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sp(tc)}function Xx(n,e){if(n==="click")return sp(e)}function Yx(n,e){if(n==="input"||n==="change")return sp(e)}function qx(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var hi=typeof Object.is=="function"?Object.is:qx;function nc(n,e){if(hi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!gg.call(e,s)||!hi(n[s],e[s]))return!1}return!0}function b0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function x0(n,e){var t=b0(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=b0(t)}}function eE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?eE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function tE(){for(var n=window,e=af();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=af(n.document)}return e}function qv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Kx(n){var e=tE(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&eE(t.ownerDocument.documentElement,t)){if(i!==null&&qv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=x0(t,r);var o=x0(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Qx=bs&&"documentMode"in document&&11>=document.documentMode,Sa=null,Fg=null,zu=null,Dg=!1;function C0(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Dg||Sa==null||Sa!==af(i)||(i=Sa,"selectionStart"in i&&qv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zu&&nc(zu,i)||(zu=i,i=pf(Fg,"onSelect"),0<i.length&&(e=new Gv("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Sa)))}function Jh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ba={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},Vp={},nE={};bs&&(nE=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function rp(n){if(Vp[n])return Vp[n];if(!ba[n])return n;var e=ba[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in nE)return Vp[n]=e[t];return n}var iE=rp("animationend"),sE=rp("animationiteration"),rE=rp("animationstart"),oE=rp("transitionend"),aE=new Map,k0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(n,e){aE.set(n,e),ia(e,[n])}for(var Gp=0;Gp<k0.length;Gp++){var Xp=k0[Gp],Jx=Xp.toLowerCase(),Zx=Xp[0].toUpperCase()+Xp.slice(1);Pr(Jx,"on"+Zx)}Pr(iE,"onAnimationEnd");Pr(sE,"onAnimationIteration");Pr(rE,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(oE,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eC=new Set("cancel close invalid load scroll toggle".split(" ").concat(wu));function T0(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,J1(i,e,void 0,n),n.currentTarget=null}function lE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==r&&s.isPropagationStopped())break e;T0(s,a,c),r=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==r&&s.isPropagationStopped())break e;T0(s,a,c),r=u}}}if(uf)throw n=Pg,uf=!1,Pg=null,n}function Ce(n,e){var t=e[zg];t===void 0&&(t=e[zg]=new Set);var i=n+"__bubble";t.has(i)||(uE(e,n,2,!1),t.add(i))}function Yp(n,e,t){var i=0;e&&(i|=4),uE(t,n,i,e)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function ic(n){if(!n[Zh]){n[Zh]=!0,mA.forEach(function(t){t!=="selectionchange"&&(eC.has(t)||Yp(t,!1,n),Yp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Zh]||(e[Zh]=!0,Yp("selectionchange",!1,e))}}function uE(n,e,t,i){switch(GA(e)){case 1:var s=px;break;case 4:s=gx;break;default:s=Wv}t=s.bind(null,e,t,n),s=void 0,!Rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function qp(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Wr(a),o===null)return;if(u=o.tag,u===5||u===6){i=r=o;continue e}a=a.parentNode}}i=i.return}MA(function(){var c=r,h=zv(t),d=[];e:{var f=aE.get(n);if(f!==void 0){var p=Gv,m=n;switch(n){case"keypress":if(yd(t)===0)break e;case"keydown":case"keyup":p=Px;break;case"focusin":m="focus",p=Up;break;case"focusout":m="blur",p=Up;break;case"beforeblur":case"afterblur":p=Up;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ix;break;case iE:case sE:case rE:p=Ex;break;case oE:p=Dx;break;case"scroll":p=mx;break;case"wheel":p=Ox;break;case"copy":case"cut":case"paste":p=Sx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=y0}var w=(e&4)!==0,S=!w&&n==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var v=c,E;v!==null;){E=v;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,g!==null&&(b=Qu(v,g),b!=null&&w.push(sc(v,b,E)))),S)break;v=v.return}0<w.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==kg&&(m=t.relatedTarget||t.fromElement)&&(Wr(m)||m[xs]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=c,m=m?Wr(m):null,m!==null&&(S=sa(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(w=m0,b="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(w=y0,b="onPointerLeave",g="onPointerEnter",v="pointer"),S=p==null?f:xa(p),E=m==null?f:xa(m),f=new w(b,v+"leave",p,t,h),f.target=S,f.relatedTarget=E,b=null,Wr(h)===c&&(w=new w(g,v+"enter",m,t,h),w.target=E,w.relatedTarget=S,b=w),S=b,p&&m)t:{for(w=p,g=m,v=0,E=w;E;E=ha(E))v++;for(E=0,b=g;b;b=ha(b))E++;for(;0<v-E;)w=ha(w),v--;for(;0<E-v;)g=ha(g),E--;for(;v--;){if(w===g||g!==null&&w===g.alternate)break t;w=ha(w),g=ha(g)}w=null}else w=null;p!==null&&R0(d,f,p,w,!1),m!==null&&S!==null&&R0(d,S,m,w,!0)}}e:{if(f=c?xa(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=Wx;else if(E0(f))if(JA)x=Yx;else{x=Gx;var k=Vx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=Xx);if(x&&(x=x(n,c))){QA(d,x,t,h);break e}k&&k(n,f,c),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&_g(f,"number",f.value)}switch(k=c?xa(c):window,n){case"focusin":(E0(k)||k.contentEditable==="true")&&(Sa=k,Fg=c,zu=null);break;case"focusout":zu=Fg=Sa=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,C0(d,t,h);break;case"selectionchange":if(Qx)break;case"keydown":case"keyup":C0(d,t,h)}var T;if(Yv)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else _a?qA(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(YA&&t.locale!=="ko"&&(_a||R!=="onCompositionStart"?R==="onCompositionEnd"&&_a&&(T=XA()):(fr=h,Vv="value"in fr?fr.value:fr.textContent,_a=!0)),k=pf(c,R),0<k.length&&(R=new v0(R,n,null,t,h),d.push({event:R,listeners:k}),T?R.data=T:(T=KA(t),T!==null&&(R.data=T)))),(T=Hx?zx(n,t):Bx(n,t))&&(c=pf(c,"onBeforeInput"),0<c.length&&(h=new v0("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=T))}lE(d,e)})}function sc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function pf(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Qu(n,t),r!=null&&i.unshift(sc(n,r,s)),r=Qu(n,e),r!=null&&i.push(sc(n,r,s))),n=n.return}return i}function ha(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function R0(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&c!==null&&(a=c,s?(u=Qu(t,r),u!=null&&o.unshift(sc(t,u,a))):s||(u=Qu(t,r),u!=null&&o.push(sc(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var tC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function P0(n){return(typeof n=="string"?n:""+n).replace(tC,`
`).replace(nC,"")}function ed(n,e,t){if(e=P0(e),P0(n)!==e&&t)throw Error(F(425))}function gf(){}var Ng=null,Og=null;function jg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hg=typeof setTimeout=="function"?setTimeout:void 0,iC=typeof clearTimeout=="function"?clearTimeout:void 0,L0=typeof Promise=="function"?Promise:void 0,sC=typeof queueMicrotask=="function"?queueMicrotask:typeof L0<"u"?function(n){return L0.resolve(null).then(n).catch(rC)}:Hg;function rC(n){setTimeout(function(){throw n})}function Kp(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),ec(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);ec(e)}function yr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function M0(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Jl,rc="__reactProps$"+Jl,xs="__reactContainer$"+Jl,zg="__reactEvents$"+Jl,oC="__reactListeners$"+Jl,aC="__reactHandles$"+Jl;function Wr(n){var e=n[Fi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xs]||t[Fi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=M0(n);n!==null;){if(t=n[Fi])return t;n=M0(n)}return e}n=t,t=n.parentNode}return null}function Mh(n){return n=n[Fi]||n[xs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function op(n){return n[rc]||null}var Bg=[],Ca=-1;function Lr(n){return{current:n}}function Te(n){0>Ca||(n.current=Bg[Ca],Bg[Ca]=null,Ca--)}function xe(n,e){Ca++,Bg[Ca]=n.current,n.current=e}var br={},Dt=Lr(br),rn=Lr(!1),Go=br;function $l(n,e){var t=n.type.contextTypes;if(!t)return br;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function on(n){return n=n.childContextTypes,n!=null}function mf(){Te(rn),Te(Dt)}function I0(n,e,t){if(Dt.current!==br)throw Error(F(168));xe(Dt,e),xe(rn,t)}function cE(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(F(108,V1(n)||"Unknown",s));return He({},t,i)}function vf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||br,Go=Dt.current,xe(Dt,n),xe(rn,rn.current),!0}function F0(n,e,t){var i=n.stateNode;if(!i)throw Error(F(169));t?(n=cE(n,e,Go),i.__reactInternalMemoizedMergedChildContext=n,Te(rn),Te(Dt),xe(Dt,n)):Te(rn),xe(rn,t)}var Vi=null,ap=!1,Qp=!1;function hE(n){Vi===null?Vi=[n]:Vi.push(n)}function lC(n){ap=!0,hE(n)}function Mr(){if(!Qp&&Vi!==null){Qp=!0;var n=0,e=we;try{var t=Vi;for(we=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Vi=null,ap=!1}catch(s){throw Vi!==null&&(Vi=Vi.slice(n+1)),NA(Bv,Mr),s}finally{we=e,Qp=!1}}return null}var ka=[],Ta=0,yf=null,wf=0,Mn=[],In=0,Xo=null,vs=1,ys="";function Nr(n,e){ka[Ta++]=wf,ka[Ta++]=yf,yf=n,wf=e}function dE(n,e,t){Mn[In++]=vs,Mn[In++]=ys,Mn[In++]=Xo,Xo=n;var i=vs;n=ys;var s=32-ui(i)-1;i&=~(1<<s),t+=1;var r=32-ui(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,vs=1<<32-ui(e)+s|t<<s|i,ys=r+n}else vs=1<<r|t<<s|i,ys=n}function Kv(n){n.return!==null&&(Nr(n,1),dE(n,1,0))}function Qv(n){for(;n===yf;)yf=ka[--Ta],ka[Ta]=null,wf=ka[--Ta],ka[Ta]=null;for(;n===Xo;)Xo=Mn[--In],Mn[In]=null,ys=Mn[--In],Mn[In]=null,vs=Mn[--In],Mn[In]=null}var En=null,An=null,Le=!1,ai=null;function fE(n,e){var t=Nn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function D0(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,En=n,An=yr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,En=n,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xo!==null?{id:vs,overflow:ys}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Nn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,En=n,An=null,!0):!1;default:return!1}}function Ug(n){return(n.mode&1)!==0&&(n.flags&128)===0}function $g(n){if(Le){var e=An;if(e){var t=e;if(!D0(n,e)){if(Ug(n))throw Error(F(418));e=yr(t.nextSibling);var i=En;e&&D0(n,e)?fE(i,t):(n.flags=n.flags&-4097|2,Le=!1,En=n)}}else{if(Ug(n))throw Error(F(418));n.flags=n.flags&-4097|2,Le=!1,En=n}}}function N0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;En=n}function td(n){if(n!==En)return!1;if(!Le)return N0(n),Le=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!jg(n.type,n.memoizedProps)),e&&(e=An)){if(Ug(n))throw pE(),Error(F(418));for(;e;)fE(n,e),e=yr(e.nextSibling)}if(N0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){An=yr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}An=null}}else An=En?yr(n.stateNode.nextSibling):null;return!0}function pE(){for(var n=An;n;)n=yr(n.nextSibling)}function Wl(){An=En=null,Le=!1}function Jv(n){ai===null?ai=[n]:ai.push(n)}var uC=Ps.ReactCurrentBatchConfig;function uu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var i=t.stateNode}if(!i)throw Error(F(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,n))}return n}function nd(n,e){throw n=Object.prototype.toString.call(e),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function O0(n){var e=n._init;return e(n._payload)}function gE(n){function e(g,v){if(n){var E=g.deletions;E===null?(g.deletions=[v],g.flags|=16):E.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function i(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=_r(g,v),g.index=0,g.sibling=null,g}function r(g,v,E){return g.index=E,n?(E=g.alternate,E!==null?(E=E.index,E<v?(g.flags|=2,v):E):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,v,E,b){return v===null||v.tag!==6?(v=sg(E,g.mode,b),v.return=g,v):(v=s(v,E),v.return=g,v)}function u(g,v,E,b){var x=E.type;return x===Ea?h(g,v,E.props.children,b,E.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ds&&O0(x)===v.type)?(b=s(v,E.props),b.ref=uu(g,v,E),b.return=g,b):(b=xd(E.type,E.key,E.props,null,g.mode,b),b.ref=uu(g,v,E),b.return=g,b)}function c(g,v,E,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=rg(E,g.mode,b),v.return=g,v):(v=s(v,E.children||[]),v.return=g,v)}function h(g,v,E,b,x){return v===null||v.tag!==7?(v=Vo(E,g.mode,b,x),v.return=g,v):(v=s(v,E),v.return=g,v)}function d(g,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sg(""+v,g.mode,E),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vh:return E=xd(v.type,v.key,v.props,null,g.mode,E),E.ref=uu(g,null,v),E.return=g,E;case Aa:return v=rg(v,g.mode,E),v.return=g,v;case Ds:var b=v._init;return d(g,b(v._payload),E)}if(vu(v)||su(v))return v=Vo(v,g.mode,E,null),v.return=g,v;nd(g,v)}return null}function f(g,v,E,b){var x=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return x!==null?null:a(g,v,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vh:return E.key===x?u(g,v,E,b):null;case Aa:return E.key===x?c(g,v,E,b):null;case Ds:return x=E._init,f(g,v,x(E._payload),b)}if(vu(E)||su(E))return x!==null?null:h(g,v,E,b,null);nd(g,E)}return null}function p(g,v,E,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(E)||null,a(v,g,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vh:return g=g.get(b.key===null?E:b.key)||null,u(v,g,b,x);case Aa:return g=g.get(b.key===null?E:b.key)||null,c(v,g,b,x);case Ds:var k=b._init;return p(g,v,E,k(b._payload),x)}if(vu(b)||su(b))return g=g.get(E)||null,h(v,g,b,x,null);nd(v,b)}return null}function m(g,v,E,b){for(var x=null,k=null,T=v,R=v=0,M=null;T!==null&&R<E.length;R++){T.index>R?(M=T,T=null):M=T.sibling;var I=f(g,T,E[R],b);if(I===null){T===null&&(T=M);break}n&&T&&I.alternate===null&&e(g,T),v=r(I,v,R),k===null?x=I:k.sibling=I,k=I,T=M}if(R===E.length)return t(g,T),Le&&Nr(g,R),x;if(T===null){for(;R<E.length;R++)T=d(g,E[R],b),T!==null&&(v=r(T,v,R),k===null?x=T:k.sibling=T,k=T);return Le&&Nr(g,R),x}for(T=i(g,T);R<E.length;R++)M=p(T,g,R,E[R],b),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?R:M.key),v=r(M,v,R),k===null?x=M:k.sibling=M,k=M);return n&&T.forEach(function(D){return e(g,D)}),Le&&Nr(g,R),x}function w(g,v,E,b){var x=su(E);if(typeof x!="function")throw Error(F(150));if(E=x.call(E),E==null)throw Error(F(151));for(var k=x=null,T=v,R=v=0,M=null,I=E.next();T!==null&&!I.done;R++,I=E.next()){T.index>R?(M=T,T=null):M=T.sibling;var D=f(g,T,I.value,b);if(D===null){T===null&&(T=M);break}n&&T&&D.alternate===null&&e(g,T),v=r(D,v,R),k===null?x=D:k.sibling=D,k=D,T=M}if(I.done)return t(g,T),Le&&Nr(g,R),x;if(T===null){for(;!I.done;R++,I=E.next())I=d(g,I.value,b),I!==null&&(v=r(I,v,R),k===null?x=I:k.sibling=I,k=I);return Le&&Nr(g,R),x}for(T=i(g,T);!I.done;R++,I=E.next())I=p(T,g,R,I.value,b),I!==null&&(n&&I.alternate!==null&&T.delete(I.key===null?R:I.key),v=r(I,v,R),k===null?x=I:k.sibling=I,k=I);return n&&T.forEach(function(Q){return e(g,Q)}),Le&&Nr(g,R),x}function S(g,v,E,b){if(typeof E=="object"&&E!==null&&E.type===Ea&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Vh:e:{for(var x=E.key,k=v;k!==null;){if(k.key===x){if(x=E.type,x===Ea){if(k.tag===7){t(g,k.sibling),v=s(k,E.props.children),v.return=g,g=v;break e}}else if(k.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ds&&O0(x)===k.type){t(g,k.sibling),v=s(k,E.props),v.ref=uu(g,k,E),v.return=g,g=v;break e}t(g,k);break}else e(g,k);k=k.sibling}E.type===Ea?(v=Vo(E.props.children,g.mode,b,E.key),v.return=g,g=v):(b=xd(E.type,E.key,E.props,null,g.mode,b),b.ref=uu(g,v,E),b.return=g,g=b)}return o(g);case Aa:e:{for(k=E.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){t(g,v.sibling),v=s(v,E.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=rg(E,g.mode,b),v.return=g,g=v}return o(g);case Ds:return k=E._init,S(g,v,k(E._payload),b)}if(vu(E))return m(g,v,E,b);if(su(E))return w(g,v,E,b);nd(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(t(g,v.sibling),v=s(v,E),v.return=g,g=v):(t(g,v),v=sg(E,g.mode,b),v.return=g,g=v),o(g)):t(g,v)}return S}var Vl=gE(!0),mE=gE(!1),Af=Lr(null),Ef=null,Ra=null,Zv=null;function ey(){Zv=Ra=Ef=null}function ty(n){var e=Af.current;Te(Af),n._currentValue=e}function Wg(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Oa(n,e){Ef=n,Zv=Ra=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(nn=!0),n.firstContext=null)}function Hn(n){var e=n._currentValue;if(Zv!==n)if(n={context:n,memoizedValue:e,next:null},Ra===null){if(Ef===null)throw Error(F(308));Ra=n,Ef.dependencies={lanes:0,firstContext:n}}else Ra=Ra.next=n;return e}var Vr=null;function ny(n){Vr===null?Vr=[n]:Vr.push(n)}function vE(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,ny(e)):(t.next=s.next,s.next=t),e.interleaved=t,Cs(n,i)}function Cs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ns=!1;function iy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ws(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Cs(n,t)}return s=i.interleaved,s===null?(e.next=e,ny(i)):(e.next=s.next,s.next=e),i.interleaved=e,Cs(n,t)}function wd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Uv(n,t)}}function j0(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function _f(n,e,t,i){var s=n.updateQueue;Ns=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?r=c:o.next=c,o=u;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(r!==null){var d=s.baseState;o=0,h=c=u=null,a=r;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,w=a;switch(f=e,p=t,w.tag){case 1:if(m=w.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=He({},d,f);break e;case 2:Ns=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=p,u=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);qo|=o,n.lanes=o,n.memoizedState=d}}function H0(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(F(191,s));s.call(i)}}}var Ih={},Ni=Lr(Ih),oc=Lr(Ih),ac=Lr(Ih);function Gr(n){if(n===Ih)throw Error(F(174));return n}function sy(n,e){switch(xe(ac,e),xe(oc,n),xe(Ni,Ih),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=bg(e,n)}Te(Ni),xe(Ni,e)}function Gl(){Te(Ni),Te(oc),Te(ac)}function wE(n){Gr(ac.current);var e=Gr(Ni.current),t=bg(e,n.type);e!==t&&(xe(oc,n),xe(Ni,t))}function ry(n){oc.current===n&&(Te(Ni),Te(oc))}var Ne=Lr(0);function Sf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jp=[];function oy(){for(var n=0;n<Jp.length;n++)Jp[n]._workInProgressVersionPrimary=null;Jp.length=0}var Ad=Ps.ReactCurrentDispatcher,Zp=Ps.ReactCurrentBatchConfig,Yo=0,Oe=null,nt=null,ft=null,bf=!1,Bu=!1,lc=0,cC=0;function bt(){throw Error(F(321))}function ay(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!hi(n[t],e[t]))return!1;return!0}function ly(n,e,t,i,s,r){if(Yo=r,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ad.current=n===null||n.memoizedState===null?pC:gC,n=t(i,s),Bu){r=0;do{if(Bu=!1,lc=0,25<=r)throw Error(F(301));r+=1,ft=nt=null,e.updateQueue=null,Ad.current=mC,n=t(i,s)}while(Bu)}if(Ad.current=xf,e=nt!==null&&nt.next!==null,Yo=0,ft=nt=Oe=null,bf=!1,e)throw Error(F(300));return n}function uy(){var n=lc!==0;return lc=0,n}function gi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Oe.memoizedState=ft=n:ft=ft.next=n,ft}function zn(){if(nt===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var e=ft===null?Oe.memoizedState:ft.next;if(e!==null)ft=e,nt=n;else{if(n===null)throw Error(F(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ft===null?Oe.memoizedState=ft=n:ft=ft.next=n}return ft}function uc(n,e){return typeof e=="function"?e(n):e}function eg(n){var e=zn(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var i=nt,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,u=null,c=r;do{var h=c.lane;if((Yo&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=i):u=u.next=d,Oe.lanes|=h,qo|=h}c=c.next}while(c!==null&&c!==r);u===null?o=i:u.next=a,hi(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Oe.lanes|=r,qo|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function tg(n){var e=zn(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);hi(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function AE(){}function EE(n,e){var t=Oe,i=zn(),s=e(),r=!hi(i.memoizedState,s);if(r&&(i.memoizedState=s,nn=!0),i=i.queue,cy(bE.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||ft!==null&&ft.memoizedState.tag&1){if(t.flags|=2048,cc(9,SE.bind(null,t,i,s,e),void 0,null),pt===null)throw Error(F(349));Yo&30||_E(t,e,s)}return s}function _E(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function SE(n,e,t,i){e.value=t,e.getSnapshot=i,xE(e)&&CE(n)}function bE(n,e,t){return t(function(){xE(e)&&CE(n)})}function xE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!hi(n,t)}catch{return!0}}function CE(n){var e=Cs(n,1);e!==null&&ci(e,n,1,-1)}function z0(n){var e=gi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:n},e.queue=n,n=n.dispatch=fC.bind(null,Oe,n),[e.memoizedState,n]}function cc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function kE(){return zn().memoizedState}function Ed(n,e,t,i){var s=gi();Oe.flags|=n,s.memoizedState=cc(1|e,t,void 0,i===void 0?null:i)}function lp(n,e,t,i){var s=zn();i=i===void 0?null:i;var r=void 0;if(nt!==null){var o=nt.memoizedState;if(r=o.destroy,i!==null&&ay(i,o.deps)){s.memoizedState=cc(e,t,r,i);return}}Oe.flags|=n,s.memoizedState=cc(1|e,t,r,i)}function B0(n,e){return Ed(8390656,8,n,e)}function cy(n,e){return lp(2048,8,n,e)}function TE(n,e){return lp(4,2,n,e)}function RE(n,e){return lp(4,4,n,e)}function PE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function LE(n,e,t){return t=t!=null?t.concat([n]):null,lp(4,4,PE.bind(null,e,n),t)}function hy(){}function ME(n,e){var t=zn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&ay(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function IE(n,e){var t=zn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&ay(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function FE(n,e,t){return Yo&21?(hi(t,e)||(t=HA(),Oe.lanes|=t,qo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,nn=!0),n.memoizedState=t)}function hC(n,e){var t=we;we=t!==0&&4>t?t:4,n(!0);var i=Zp.transition;Zp.transition={};try{n(!1),e()}finally{we=t,Zp.transition=i}}function DE(){return zn().memoizedState}function dC(n,e,t){var i=Er(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},NE(n))OE(e,t);else if(t=vE(n,e,t,i),t!==null){var s=$t();ci(t,n,i,s),jE(t,e,i)}}function fC(n,e,t){var i=Er(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(NE(n))OE(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,hi(a,o)){var u=e.interleaved;u===null?(s.next=s,ny(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}t=vE(n,e,s,i),t!==null&&(s=$t(),ci(t,n,i,s),jE(t,e,i))}}function NE(n){var e=n.alternate;return n===Oe||e!==null&&e===Oe}function OE(n,e){Bu=bf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function jE(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Uv(n,t)}}var xf={readContext:Hn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},pC={readContext:Hn,useCallback:function(n,e){return gi().memoizedState=[n,e===void 0?null:e],n},useContext:Hn,useEffect:B0,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ed(4194308,4,PE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ed(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ed(4,2,n,e)},useMemo:function(n,e){var t=gi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=gi();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=dC.bind(null,Oe,n),[i.memoizedState,n]},useRef:function(n){var e=gi();return n={current:n},e.memoizedState=n},useState:z0,useDebugValue:hy,useDeferredValue:function(n){return gi().memoizedState=n},useTransition:function(){var n=z0(!1),e=n[0];return n=hC.bind(null,n[1]),gi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Oe,s=gi();if(Le){if(t===void 0)throw Error(F(407));t=t()}else{if(t=e(),pt===null)throw Error(F(349));Yo&30||_E(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,B0(bE.bind(null,i,r,n),[n]),i.flags|=2048,cc(9,SE.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=gi(),e=pt.identifierPrefix;if(Le){var t=ys,i=vs;t=(i&~(1<<32-ui(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=lc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=cC++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},gC={readContext:Hn,useCallback:ME,useContext:Hn,useEffect:cy,useImperativeHandle:LE,useInsertionEffect:TE,useLayoutEffect:RE,useMemo:IE,useReducer:eg,useRef:kE,useState:function(){return eg(uc)},useDebugValue:hy,useDeferredValue:function(n){var e=zn();return FE(e,nt.memoizedState,n)},useTransition:function(){var n=eg(uc)[0],e=zn().memoizedState;return[n,e]},useMutableSource:AE,useSyncExternalStore:EE,useId:DE,unstable_isNewReconciler:!1},mC={readContext:Hn,useCallback:ME,useContext:Hn,useEffect:cy,useImperativeHandle:LE,useInsertionEffect:TE,useLayoutEffect:RE,useMemo:IE,useReducer:tg,useRef:kE,useState:function(){return tg(uc)},useDebugValue:hy,useDeferredValue:function(n){var e=zn();return nt===null?e.memoizedState=n:FE(e,nt.memoizedState,n)},useTransition:function(){var n=tg(uc)[0],e=zn().memoizedState;return[n,e]},useMutableSource:AE,useSyncExternalStore:EE,useId:DE,unstable_isNewReconciler:!1};function Vn(n,e){if(n&&n.defaultProps){e=He({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Vg(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:He({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var up={isMounted:function(n){return(n=n._reactInternals)?sa(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=$t(),s=Er(n),r=ws(i,s);r.payload=e,t!=null&&(r.callback=t),e=wr(n,r,s),e!==null&&(ci(e,n,s,i),wd(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=$t(),s=Er(n),r=ws(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=wr(n,r,s),e!==null&&(ci(e,n,s,i),wd(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=$t(),i=Er(n),s=ws(t,i);s.tag=2,e!=null&&(s.callback=e),e=wr(n,s,i),e!==null&&(ci(e,n,i,t),wd(e,n,i))}};function U0(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!nc(t,i)||!nc(s,r):!0}function HE(n,e,t){var i=!1,s=br,r=e.contextType;return typeof r=="object"&&r!==null?r=Hn(r):(s=on(e)?Go:Dt.current,i=e.contextTypes,r=(i=i!=null)?$l(n,s):br),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=up,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function $0(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&up.enqueueReplaceState(e,e.state,null)}function Gg(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},iy(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Hn(r):(r=on(e)?Go:Dt.current,s.context=$l(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Vg(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&up.enqueueReplaceState(s,s.state,null),_f(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Xl(n,e){try{var t="",i=e;do t+=W1(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function ng(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Xg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var vC=typeof WeakMap=="function"?WeakMap:Map;function zE(n,e,t){t=ws(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){kf||(kf=!0,im=i),Xg(n,e)},t}function BE(n,e,t){t=ws(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Xg(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Xg(n,e),typeof i!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function W0(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new vC;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=LC.bind(null,n,e,t),e.then(n,n))}function V0(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function G0(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ws(-1,1),e.tag=2,wr(t,e,1))),t.lanes|=1),n)}var yC=Ps.ReactCurrentOwner,nn=!1;function Bt(n,e,t,i){e.child=n===null?mE(e,null,t,i):Vl(e,n.child,t,i)}function X0(n,e,t,i,s){t=t.render;var r=e.ref;return Oa(e,s),i=ly(n,e,t,i,r,s),t=uy(),n!==null&&!nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ks(n,e,s)):(Le&&t&&Kv(e),e.flags|=1,Bt(n,e,i,s),e.child)}function Y0(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!wy(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,UE(n,e,r,i,s)):(n=xd(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:nc,t(o,i)&&n.ref===e.ref)return ks(n,e,s)}return e.flags|=1,n=_r(r,i),n.ref=e.ref,n.return=e,e.child=n}function UE(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(nc(r,i)&&n.ref===e.ref)if(nn=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(nn=!0);else return e.lanes=n.lanes,ks(n,e,s)}return Yg(n,e,t,i,s)}function $E(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(La,yn),yn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xe(La,yn),yn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,xe(La,yn),yn|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,xe(La,yn),yn|=i;return Bt(n,e,s,t),e.child}function WE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Yg(n,e,t,i,s){var r=on(t)?Go:Dt.current;return r=$l(e,r),Oa(e,s),t=ly(n,e,t,i,r,s),i=uy(),n!==null&&!nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ks(n,e,s)):(Le&&i&&Kv(e),e.flags|=1,Bt(n,e,t,s),e.child)}function q0(n,e,t,i,s){if(on(t)){var r=!0;vf(e)}else r=!1;if(Oa(e,s),e.stateNode===null)_d(n,e),HE(e,t,i),Gg(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=on(t)?Go:Dt.current,c=$l(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==c)&&$0(e,o,i,c),Ns=!1;var f=e.memoizedState;o.state=f,_f(e,i,o,s),u=e.memoizedState,a!==i||f!==u||rn.current||Ns?(typeof h=="function"&&(Vg(e,t,h,i),u=e.memoizedState),(a=Ns||U0(e,t,a,i,f,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,yE(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Hn(u):(u=on(t)?Go:Dt.current,u=$l(e,u));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&$0(e,o,i,u),Ns=!1,f=e.memoizedState,o.state=f,_f(e,i,o,s);var m=e.memoizedState;a!==d||f!==m||rn.current||Ns?(typeof p=="function"&&(Vg(e,t,p,i),m=e.memoizedState),(c=Ns||U0(e,t,c,i,f,m,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return qg(n,e,t,i,r,s)}function qg(n,e,t,i,s,r){WE(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&F0(e,t,!1),ks(n,e,r);i=e.stateNode,yC.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Vl(e,n.child,null,r),e.child=Vl(e,null,a,r)):Bt(n,e,a,r),e.memoizedState=i.state,s&&F0(e,t,!0),e.child}function VE(n){var e=n.stateNode;e.pendingContext?I0(n,e.pendingContext,e.pendingContext!==e.context):e.context&&I0(n,e.context,!1),sy(n,e.containerInfo)}function K0(n,e,t,i,s){return Wl(),Jv(s),e.flags|=256,Bt(n,e,t,i),e.child}var Kg={dehydrated:null,treeContext:null,retryLane:0};function Qg(n){return{baseLanes:n,cachePool:null,transitions:null}}function GE(n,e,t){var i=e.pendingProps,s=Ne.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),xe(Ne,s&1),n===null)return $g(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=dp(o,i,0,null),n=Vo(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=Qg(t),e.memoizedState=Kg,n):dy(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wC(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=_r(s,u),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=_r(a,r):(r=Vo(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?Qg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=Kg,i}return r=n.child,n=r.sibling,i=_r(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function dy(n,e){return e=dp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function id(n,e,t,i){return i!==null&&Jv(i),Vl(e,n.child,null,t),n=dy(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function wC(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=ng(Error(F(422))),id(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=dp({mode:"visible",children:i.children},s,0,null),r=Vo(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Vl(e,n.child,null,o),e.child.memoizedState=Qg(o),e.memoizedState=Kg,r);if(!(e.mode&1))return id(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(F(419)),i=ng(r,i,void 0),id(n,e,o,i)}if(a=(o&n.childLanes)!==0,nn||a){if(i=pt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Cs(n,s),ci(i,n,s,-1))}return yy(),i=ng(Error(F(421))),id(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=MC.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,An=yr(s.nextSibling),En=e,Le=!0,ai=null,n!==null&&(Mn[In++]=vs,Mn[In++]=ys,Mn[In++]=Xo,vs=n.id,ys=n.overflow,Xo=e),e=dy(e,i.children),e.flags|=4096,e)}function Q0(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Wg(n.return,e,t)}function ig(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function XE(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Bt(n,e,i.children,t),i=Ne.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Q0(n,t,e);else if(n.tag===19)Q0(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(xe(Ne,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Sf(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),ig(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Sf(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}ig(e,!0,t,null,r);break;case"together":ig(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _d(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ks(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),qo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(F(153));if(e.child!==null){for(n=e.child,t=_r(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_r(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function AC(n,e,t){switch(e.tag){case 3:VE(e),Wl();break;case 5:wE(e);break;case 1:on(e.type)&&vf(e);break;case 4:sy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;xe(Af,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(Ne,Ne.current&1),e.flags|=128,null):t&e.child.childLanes?GE(n,e,t):(xe(Ne,Ne.current&1),n=ks(n,e,t),n!==null?n.sibling:null);xe(Ne,Ne.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return XE(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Ne,Ne.current),i)break;return null;case 22:case 23:return e.lanes=0,$E(n,e,t)}return ks(n,e,t)}var YE,Jg,qE,KE;YE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Jg=function(){};qE=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Gr(Ni.current);var r=null;switch(t){case"input":s=Ag(n,s),i=Ag(n,i),r=[];break;case"select":s=He({},s,{value:void 0}),i=He({},i,{value:void 0}),r=[];break;case"textarea":s=Sg(n,s),i=Sg(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=gf)}xg(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qu.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var u=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(r||(r=[]),r.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(r=r||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qu.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ce("scroll",n),r||a===u||(r=[])):(r=r||[]).push(c,u))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};KE=function(n,e,t,i){t!==i&&(e.flags|=4)};function cu(n,e){if(!Le)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function xt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function EC(n,e,t){var i=e.pendingProps;switch(Qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return on(e.type)&&mf(),xt(e),null;case 3:return i=e.stateNode,Gl(),Te(rn),Te(Dt),oy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(td(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ai!==null&&(om(ai),ai=null))),Jg(n,e),xt(e),null;case 5:ry(e);var s=Gr(ac.current);if(t=e.type,n!==null&&e.stateNode!=null)qE(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(F(166));return xt(e),null}if(n=Gr(Ni.current),td(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Fi]=e,i[rc]=r,n=(e.mode&1)!==0,t){case"dialog":Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":case"embed":Ce("load",i);break;case"video":case"audio":for(s=0;s<wu.length;s++)Ce(wu[s],i);break;case"source":Ce("error",i);break;case"img":case"image":case"link":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"input":o0(i,r),Ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Ce("invalid",i);break;case"textarea":l0(i,r),Ce("invalid",i)}xg(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&ed(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&ed(i.textContent,a,n),s=["children",""+a]):qu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",i)}switch(t){case"input":Gh(i),a0(i,r,!0);break;case"textarea":Gh(i),u0(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=gf)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=bA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Fi]=e,n[rc]=i,YE(n,e,!1,!1),e.stateNode=n;e:{switch(o=Cg(t,i),t){case"dialog":Ce("cancel",n),Ce("close",n),s=i;break;case"iframe":case"object":case"embed":Ce("load",n),s=i;break;case"video":case"audio":for(s=0;s<wu.length;s++)Ce(wu[s],n);s=i;break;case"source":Ce("error",n),s=i;break;case"img":case"image":case"link":Ce("error",n),Ce("load",n),s=i;break;case"details":Ce("toggle",n),s=i;break;case"input":o0(n,i),s=Ag(n,i),Ce("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=He({},i,{value:void 0}),Ce("invalid",n);break;case"textarea":l0(n,i),s=Sg(n,i),Ce("invalid",n);break;default:s=i}xg(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];r==="style"?kA(n,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xA(n,u)):r==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Ku(n,u):typeof u=="number"&&Ku(n,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(qu.hasOwnProperty(r)?u!=null&&r==="onScroll"&&Ce("scroll",n):u!=null&&Nv(n,r,u,o))}switch(t){case"input":Gh(n),a0(n,i,!1);break;case"textarea":Gh(n),u0(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Sr(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Ia(n,!!i.multiple,r,!1):i.defaultValue!=null&&Ia(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=gf)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(n&&e.stateNode!=null)KE(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(F(166));if(t=Gr(ac.current),Gr(Ni.current),td(e)){if(i=e.stateNode,t=e.memoizedProps,i[Fi]=e,(r=i.nodeValue!==t)&&(n=En,n!==null))switch(n.tag){case 3:ed(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ed(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Fi]=e,e.stateNode=i}return xt(e),null;case 13:if(Te(Ne),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Le&&An!==null&&e.mode&1&&!(e.flags&128))pE(),Wl(),e.flags|=98560,r=!1;else if(r=td(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[Fi]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),r=!1}else ai!==null&&(om(ai),ai=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ne.current&1?st===0&&(st=3):yy())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Gl(),Jg(n,e),n===null&&ic(e.stateNode.containerInfo),xt(e),null;case 10:return ty(e.type._context),xt(e),null;case 17:return on(e.type)&&mf(),xt(e),null;case 19:if(Te(Ne),r=e.memoizedState,r===null)return xt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)cu(r,!1);else{if(st!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Sf(n),o!==null){for(e.flags|=128,cu(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xe(Ne,Ne.current&1|2),e.child}n=n.sibling}r.tail!==null&&Ve()>Yl&&(e.flags|=128,i=!0,cu(r,!1),e.lanes=4194304)}else{if(!i)if(n=Sf(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Le)return xt(e),null}else 2*Ve()-r.renderingStartTime>Yl&&t!==1073741824&&(e.flags|=128,i=!0,cu(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ve(),e.sibling=null,t=Ne.current,xe(Ne,i?t&1|2:t&1),e):(xt(e),null);case 22:case 23:return vy(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function _C(n,e){switch(Qv(e),e.tag){case 1:return on(e.type)&&mf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Gl(),Te(rn),Te(Dt),oy(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ry(e),null;case 13:if(Te(Ne),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Wl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Te(Ne),null;case 4:return Gl(),null;case 10:return ty(e.type._context),null;case 22:case 23:return vy(),null;case 24:return null;default:return null}}var sd=!1,Mt=!1,SC=typeof WeakSet=="function"?WeakSet:Set,z=null;function Pa(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){$e(n,e,i)}else t.current=null}function Zg(n,e,t){try{t()}catch(i){$e(n,e,i)}}var J0=!1;function bC(n,e){if(Ng=df,n=tE(),qv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(u=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++c===s&&(a=o),f===r&&++h===i&&(u=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Og={focusedElem:n,selectionRange:t},df=!1,z=e;z!==null;)if(e=z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,z=n;else for(;z!==null;){e=z;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,S=m.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Vn(e.type,w),S);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){$e(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}return m=J0,J0=!1,m}function Uu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&Zg(e,t,r)}s=s.next}while(s!==i)}}function cp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function em(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function QE(n){var e=n.alternate;e!==null&&(n.alternate=null,QE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fi],delete e[rc],delete e[zg],delete e[oC],delete e[aC])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function JE(n){return n.tag===5||n.tag===3||n.tag===4}function Z0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tm(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gf));else if(i!==4&&(n=n.child,n!==null))for(tm(n,e,t),n=n.sibling;n!==null;)tm(n,e,t),n=n.sibling}function nm(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(nm(n,e,t),n=n.sibling;n!==null;)nm(n,e,t),n=n.sibling}var wt=null,oi=!1;function Ms(n,e,t){for(t=t.child;t!==null;)ZE(n,e,t),t=t.sibling}function ZE(n,e,t){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(np,t)}catch{}switch(t.tag){case 5:Mt||Pa(t,e);case 6:var i=wt,s=oi;wt=null,Ms(n,e,t),wt=i,oi=s,wt!==null&&(oi?(n=wt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):wt.removeChild(t.stateNode));break;case 18:wt!==null&&(oi?(n=wt,t=t.stateNode,n.nodeType===8?Kp(n.parentNode,t):n.nodeType===1&&Kp(n,t),ec(n)):Kp(wt,t.stateNode));break;case 4:i=wt,s=oi,wt=t.stateNode.containerInfo,oi=!0,Ms(n,e,t),wt=i,oi=s;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Zg(t,e,o),s=s.next}while(s!==i)}Ms(n,e,t);break;case 1:if(!Mt&&(Pa(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){$e(t,e,a)}Ms(n,e,t);break;case 21:Ms(n,e,t);break;case 22:t.mode&1?(Mt=(i=Mt)||t.memoizedState!==null,Ms(n,e,t),Mt=i):Ms(n,e,t);break;default:Ms(n,e,t)}}function ew(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new SC),e.forEach(function(i){var s=IC.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function $n(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,oi=!1;break e;case 3:wt=a.stateNode.containerInfo,oi=!0;break e;case 4:wt=a.stateNode.containerInfo,oi=!0;break e}a=a.return}if(wt===null)throw Error(F(160));ZE(r,o,s),wt=null,oi=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){$e(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e_(e,n),e=e.sibling}function e_(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(e,n),fi(n),i&4){try{Uu(3,n,n.return),cp(3,n)}catch(w){$e(n,n.return,w)}try{Uu(5,n,n.return)}catch(w){$e(n,n.return,w)}}break;case 1:$n(e,n),fi(n),i&512&&t!==null&&Pa(t,t.return);break;case 5:if($n(e,n),fi(n),i&512&&t!==null&&Pa(t,t.return),n.flags&32){var s=n.stateNode;try{Ku(s,"")}catch(w){$e(n,n.return,w)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&_A(s,r),Cg(a,o);var c=Cg(a,r);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?kA(s,d):h==="dangerouslySetInnerHTML"?xA(s,d):h==="children"?Ku(s,d):Nv(s,h,d,c)}switch(a){case"input":Eg(s,r);break;case"textarea":SA(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Ia(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Ia(s,!!r.multiple,r.defaultValue,!0):Ia(s,!!r.multiple,r.multiple?[]:"",!1))}s[rc]=r}catch(w){$e(n,n.return,w)}}break;case 6:if($n(e,n),fi(n),i&4){if(n.stateNode===null)throw Error(F(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(w){$e(n,n.return,w)}}break;case 3:if($n(e,n),fi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ec(e.containerInfo)}catch(w){$e(n,n.return,w)}break;case 4:$n(e,n),fi(n);break;case 13:$n(e,n),fi(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(gy=Ve())),i&4&&ew(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Mt=(c=Mt)||h,$n(e,n),Mt=c):$n(e,n),fi(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(z=n,h=n.child;h!==null;){for(d=z=h;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:Uu(4,f,f.return);break;case 1:Pa(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){$e(i,t,w)}}break;case 5:Pa(f,f.return);break;case 22:if(f.memoizedState!==null){nw(d);continue}}p!==null?(p.return=f,z=p):nw(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=CA("display",o))}catch(w){$e(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){$e(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:$n(e,n),fi(n),i&4&&ew(n);break;case 21:break;default:$n(e,n),fi(n)}}function fi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(JE(t)){var i=t;break e}t=t.return}throw Error(F(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ku(s,""),i.flags&=-33);var r=Z0(n);nm(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Z0(n);tm(n,a,o);break;default:throw Error(F(161))}}catch(u){$e(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function xC(n,e,t){z=n,t_(n)}function t_(n,e,t){for(var i=(n.mode&1)!==0;z!==null;){var s=z,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||sd;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Mt;a=sd;var c=Mt;if(sd=o,(Mt=u)&&!c)for(z=s;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?iw(s):u!==null?(u.return=o,z=u):iw(s);for(;r!==null;)z=r,t_(r),r=r.sibling;z=s,sd=a,Mt=c}tw(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,z=r):tw(n)}}function tw(n){for(;z!==null;){var e=z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||cp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Vn(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&H0(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}H0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ec(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Mt||e.flags&512&&em(e)}catch(f){$e(e,e.return,f)}}if(e===n){z=null;break}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}}function nw(n){for(;z!==null;){var e=z;if(e===n){z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,z=t;break}z=e.return}}function iw(n){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cp(4,e)}catch(u){$e(e,t,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){$e(e,s,u)}}var r=e.return;try{em(e)}catch(u){$e(e,r,u)}break;case 5:var o=e.return;try{em(e)}catch(u){$e(e,o,u)}}}catch(u){$e(e,e.return,u)}if(e===n){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var CC=Math.ceil,Cf=Ps.ReactCurrentDispatcher,fy=Ps.ReactCurrentOwner,On=Ps.ReactCurrentBatchConfig,ce=0,pt=null,Ke=null,At=0,yn=0,La=Lr(0),st=0,hc=null,qo=0,hp=0,py=0,$u=null,tn=null,gy=0,Yl=1/0,Ui=null,kf=!1,im=null,Ar=null,rd=!1,pr=null,Tf=0,Wu=0,sm=null,Sd=-1,bd=0;function $t(){return ce&6?Ve():Sd!==-1?Sd:Sd=Ve()}function Er(n){return n.mode&1?ce&2&&At!==0?At&-At:uC.transition!==null?(bd===0&&(bd=HA()),bd):(n=we,n!==0||(n=window.event,n=n===void 0?16:GA(n.type)),n):1}function ci(n,e,t,i){if(50<Wu)throw Wu=0,sm=null,Error(F(185));Ph(n,t,i),(!(ce&2)||n!==pt)&&(n===pt&&(!(ce&2)&&(hp|=t),st===4&&js(n,At)),an(n,i),t===1&&ce===0&&!(e.mode&1)&&(Yl=Ve()+500,ap&&Mr()))}function an(n,e){var t=n.callbackNode;ux(n,e);var i=hf(n,n===pt?At:0);if(i===0)t!==null&&d0(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&d0(t),e===1)n.tag===0?lC(sw.bind(null,n)):hE(sw.bind(null,n)),sC(function(){!(ce&6)&&Mr()}),t=null;else{switch(zA(i)){case 1:t=Bv;break;case 4:t=OA;break;case 16:t=cf;break;case 536870912:t=jA;break;default:t=cf}t=u_(t,n_.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function n_(n,e){if(Sd=-1,bd=0,ce&6)throw Error(F(327));var t=n.callbackNode;if(ja()&&n.callbackNode!==t)return null;var i=hf(n,n===pt?At:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Rf(n,i);else{e=i;var s=ce;ce|=2;var r=s_();(pt!==n||At!==e)&&(Ui=null,Yl=Ve()+500,Wo(n,e));do try{RC();break}catch(a){i_(n,a)}while(!0);ey(),Cf.current=r,ce=s,Ke!==null?e=0:(pt=null,At=0,e=st)}if(e!==0){if(e===2&&(s=Lg(n),s!==0&&(i=s,e=rm(n,s))),e===1)throw t=hc,Wo(n,0),js(n,i),an(n,Ve()),t;if(e===6)js(n,i);else{if(s=n.current.alternate,!(i&30)&&!kC(s)&&(e=Rf(n,i),e===2&&(r=Lg(n),r!==0&&(i=r,e=rm(n,r))),e===1))throw t=hc,Wo(n,0),js(n,i),an(n,Ve()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(F(345));case 2:Or(n,tn,Ui);break;case 3:if(js(n,i),(i&130023424)===i&&(e=gy+500-Ve(),10<e)){if(hf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){$t(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Hg(Or.bind(null,n,tn,Ui),e);break}Or(n,tn,Ui);break;case 4:if(js(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-ui(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*CC(i/1960))-i,10<i){n.timeoutHandle=Hg(Or.bind(null,n,tn,Ui),i);break}Or(n,tn,Ui);break;case 5:Or(n,tn,Ui);break;default:throw Error(F(329))}}}return an(n,Ve()),n.callbackNode===t?n_.bind(null,n):null}function rm(n,e){var t=$u;return n.current.memoizedState.isDehydrated&&(Wo(n,e).flags|=256),n=Rf(n,e),n!==2&&(e=tn,tn=t,e!==null&&om(e)),n}function om(n){tn===null?tn=n:tn.push.apply(tn,n)}function kC(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!hi(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function js(n,e){for(e&=~py,e&=~hp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ui(e),i=1<<t;n[t]=-1,e&=~i}}function sw(n){if(ce&6)throw Error(F(327));ja();var e=hf(n,0);if(!(e&1))return an(n,Ve()),null;var t=Rf(n,e);if(n.tag!==0&&t===2){var i=Lg(n);i!==0&&(e=i,t=rm(n,i))}if(t===1)throw t=hc,Wo(n,0),js(n,e),an(n,Ve()),t;if(t===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Or(n,tn,Ui),an(n,Ve()),null}function my(n,e){var t=ce;ce|=1;try{return n(e)}finally{ce=t,ce===0&&(Yl=Ve()+500,ap&&Mr())}}function Ko(n){pr!==null&&pr.tag===0&&!(ce&6)&&ja();var e=ce;ce|=1;var t=On.transition,i=we;try{if(On.transition=null,we=1,n)return n()}finally{we=i,On.transition=t,ce=e,!(ce&6)&&Mr()}}function vy(){yn=La.current,Te(La)}function Wo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,iC(t)),Ke!==null)for(t=Ke.return;t!==null;){var i=t;switch(Qv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mf();break;case 3:Gl(),Te(rn),Te(Dt),oy();break;case 5:ry(i);break;case 4:Gl();break;case 13:Te(Ne);break;case 19:Te(Ne);break;case 10:ty(i.type._context);break;case 22:case 23:vy()}t=t.return}if(pt=n,Ke=n=_r(n.current,null),At=yn=e,st=0,hc=null,py=hp=qo=0,tn=$u=null,Vr!==null){for(e=0;e<Vr.length;e++)if(t=Vr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Vr=null}return n}function i_(n,e){do{var t=Ke;try{if(ey(),Ad.current=xf,bf){for(var i=Oe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}bf=!1}if(Yo=0,ft=nt=Oe=null,Bu=!1,lc=0,fy.current=null,t===null||t.return===null){st=1,hc=e,Ke=null;break}e:{var r=n,o=t.return,a=t,u=e;if(e=At,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=V0(o);if(p!==null){p.flags&=-257,G0(p,o,a,r,e),p.mode&1&&W0(r,c,e),e=p,u=c;var m=e.updateQueue;if(m===null){var w=new Set;w.add(u),e.updateQueue=w}else m.add(u);break e}else{if(!(e&1)){W0(r,c,e),yy();break e}u=Error(F(426))}}else if(Le&&a.mode&1){var S=V0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),G0(S,o,a,r,e),Jv(Xl(u,a));break e}}r=u=Xl(u,a),st!==4&&(st=2),$u===null?$u=[r]:$u.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=zE(r,u,e);j0(r,g);break e;case 1:a=u;var v=r.type,E=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ar===null||!Ar.has(E)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=BE(r,a,e);j0(r,b);break e}}r=r.return}while(r!==null)}o_(t)}catch(x){e=x,Ke===t&&t!==null&&(Ke=t=t.return);continue}break}while(!0)}function s_(){var n=Cf.current;return Cf.current=xf,n===null?xf:n}function yy(){(st===0||st===3||st===2)&&(st=4),pt===null||!(qo&268435455)&&!(hp&268435455)||js(pt,At)}function Rf(n,e){var t=ce;ce|=2;var i=s_();(pt!==n||At!==e)&&(Ui=null,Wo(n,e));do try{TC();break}catch(s){i_(n,s)}while(!0);if(ey(),ce=t,Cf.current=i,Ke!==null)throw Error(F(261));return pt=null,At=0,st}function TC(){for(;Ke!==null;)r_(Ke)}function RC(){for(;Ke!==null&&!ex();)r_(Ke)}function r_(n){var e=l_(n.alternate,n,yn);n.memoizedProps=n.pendingProps,e===null?o_(n):Ke=e,fy.current=null}function o_(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=_C(t,e),t!==null){t.flags&=32767,Ke=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{st=6,Ke=null;return}}else if(t=EC(t,e,yn),t!==null){Ke=t;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=n}while(e!==null);st===0&&(st=5)}function Or(n,e,t){var i=we,s=On.transition;try{On.transition=null,we=1,PC(n,e,t,i)}finally{On.transition=s,we=i}return null}function PC(n,e,t,i){do ja();while(pr!==null);if(ce&6)throw Error(F(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(cx(n,r),n===pt&&(Ke=pt=null,At=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||rd||(rd=!0,u_(cf,function(){return ja(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=On.transition,On.transition=null;var o=we;we=1;var a=ce;ce|=4,fy.current=null,bC(n,t),e_(t,n),Kx(Og),df=!!Ng,Og=Ng=null,n.current=t,xC(t),tx(),ce=a,we=o,On.transition=r}else n.current=t;if(rd&&(rd=!1,pr=n,Tf=s),r=n.pendingLanes,r===0&&(Ar=null),sx(t.stateNode),an(n,Ve()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(kf)throw kf=!1,n=im,im=null,n;return Tf&1&&n.tag!==0&&ja(),r=n.pendingLanes,r&1?n===sm?Wu++:(Wu=0,sm=n):Wu=0,Mr(),null}function ja(){if(pr!==null){var n=zA(Tf),e=On.transition,t=we;try{if(On.transition=null,we=16>n?16:n,pr===null)var i=!1;else{if(n=pr,pr=null,Tf=0,ce&6)throw Error(F(331));var s=ce;for(ce|=4,z=n.current;z!==null;){var r=z,o=r.child;if(z.flags&16){var a=r.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:Uu(8,h,r)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var f=h.sibling,p=h.return;if(QE(h),h===c){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var m=r.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}z=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,z=o;else e:for(;z!==null;){if(r=z,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Uu(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,z=g;break e}z=r.return}}var v=n.current;for(z=v;z!==null;){o=z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,z=E;else e:for(o=v;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cp(9,a)}}catch(x){$e(a,a.return,x)}if(a===o){z=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,z=b;break e}z=a.return}}if(ce=s,Mr(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(np,n)}catch{}i=!0}return i}finally{we=t,On.transition=e}}return!1}function rw(n,e,t){e=Xl(t,e),e=zE(n,e,1),n=wr(n,e,1),e=$t(),n!==null&&(Ph(n,1,e),an(n,e))}function $e(n,e,t){if(n.tag===3)rw(n,n,t);else for(;e!==null;){if(e.tag===3){rw(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ar===null||!Ar.has(i))){n=Xl(t,n),n=BE(e,n,1),e=wr(e,n,1),n=$t(),e!==null&&(Ph(e,1,n),an(e,n));break}}e=e.return}}function LC(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=$t(),n.pingedLanes|=n.suspendedLanes&t,pt===n&&(At&t)===t&&(st===4||st===3&&(At&130023424)===At&&500>Ve()-gy?Wo(n,0):py|=t),an(n,e)}function a_(n,e){e===0&&(n.mode&1?(e=qh,qh<<=1,!(qh&130023424)&&(qh=4194304)):e=1);var t=$t();n=Cs(n,e),n!==null&&(Ph(n,e,t),an(n,t))}function MC(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),a_(n,t)}function IC(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(F(314))}i!==null&&i.delete(e),a_(n,t)}var l_;l_=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return nn=!1,AC(n,e,t);nn=!!(n.flags&131072)}else nn=!1,Le&&e.flags&1048576&&dE(e,wf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_d(n,e),n=e.pendingProps;var s=$l(e,Dt.current);Oa(e,t),s=ly(null,e,i,n,s,t);var r=uy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(i)?(r=!0,vf(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iy(e),s.updater=up,e.stateNode=s,s._reactInternals=e,Gg(e,i,n,t),e=qg(null,e,i,!0,r,t)):(e.tag=0,Le&&r&&Kv(e),Bt(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(_d(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=DC(i),n=Vn(i,n),s){case 0:e=Yg(null,e,i,n,t);break e;case 1:e=q0(null,e,i,n,t);break e;case 11:e=X0(null,e,i,n,t);break e;case 14:e=Y0(null,e,i,Vn(i.type,n),t);break e}throw Error(F(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),Yg(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),q0(n,e,i,s,t);case 3:e:{if(VE(e),n===null)throw Error(F(387));i=e.pendingProps,r=e.memoizedState,s=r.element,yE(n,e),_f(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Xl(Error(F(423)),e),e=K0(n,e,i,t,s);break e}else if(i!==s){s=Xl(Error(F(424)),e),e=K0(n,e,i,t,s);break e}else for(An=yr(e.stateNode.containerInfo.firstChild),En=e,Le=!0,ai=null,t=mE(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wl(),i===s){e=ks(n,e,t);break e}Bt(n,e,i,t)}e=e.child}return e;case 5:return wE(e),n===null&&$g(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,jg(i,s)?o=null:r!==null&&jg(i,r)&&(e.flags|=32),WE(n,e),Bt(n,e,o,t),e.child;case 6:return n===null&&$g(e),null;case 13:return GE(n,e,t);case 4:return sy(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Vl(e,null,i,t):Bt(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),X0(n,e,i,s,t);case 7:return Bt(n,e,e.pendingProps,t),e.child;case 8:return Bt(n,e,e.pendingProps.children,t),e.child;case 12:return Bt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,xe(Af,i._currentValue),i._currentValue=o,r!==null)if(hi(r.value,o)){if(r.children===s.children&&!rn.current){e=ks(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(r.tag===1){u=ws(-1,t&-t),u.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}r.lanes|=t,u=r.alternate,u!==null&&(u.lanes|=t),Wg(r.return,t,e),a.lanes|=t;break}u=u.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(F(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Wg(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Bt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Oa(e,t),s=Hn(s),i=i(s),e.flags|=1,Bt(n,e,i,t),e.child;case 14:return i=e.type,s=Vn(i,e.pendingProps),s=Vn(i.type,s),Y0(n,e,i,s,t);case 15:return UE(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),_d(n,e),e.tag=1,on(i)?(n=!0,vf(e)):n=!1,Oa(e,t),HE(e,i,s),Gg(e,i,s,t),qg(null,e,i,!0,n,t);case 19:return XE(n,e,t);case 22:return $E(n,e,t)}throw Error(F(156,e.tag))};function u_(n,e){return NA(n,e)}function FC(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,e,t,i){return new FC(n,e,t,i)}function wy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function DC(n){if(typeof n=="function")return wy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jv)return 11;if(n===Hv)return 14}return 2}function _r(n,e){var t=n.alternate;return t===null?(t=Nn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function xd(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")wy(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ea:return Vo(t.children,s,r,e);case Ov:o=8,s|=8;break;case mg:return n=Nn(12,t,e,s|2),n.elementType=mg,n.lanes=r,n;case vg:return n=Nn(13,t,e,s),n.elementType=vg,n.lanes=r,n;case yg:return n=Nn(19,t,e,s),n.elementType=yg,n.lanes=r,n;case wA:return dp(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case vA:o=10;break e;case yA:o=9;break e;case jv:o=11;break e;case Hv:o=14;break e;case Ds:o=16,i=null;break e}throw Error(F(130,n==null?n:typeof n,""))}return e=Nn(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Vo(n,e,t,i){return n=Nn(7,n,i,e),n.lanes=t,n}function dp(n,e,t,i){return n=Nn(22,n,i,e),n.elementType=wA,n.lanes=t,n.stateNode={isHidden:!1},n}function sg(n,e,t){return n=Nn(6,n,null,e),n.lanes=t,n}function rg(n,e,t){return e=Nn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function NC(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ay(n,e,t,i,s,r,o,a,u){return n=new NC(n,e,t,a,u),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Nn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},iy(r),n}function OC(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function c_(n){if(!n)return br;n=n._reactInternals;e:{if(sa(n)!==n||n.tag!==1)throw Error(F(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(n.tag===1){var t=n.type;if(on(t))return cE(n,t,e)}return e}function h_(n,e,t,i,s,r,o,a,u){return n=Ay(t,i,!0,n,s,r,o,a,u),n.context=c_(null),t=n.current,i=$t(),s=Er(t),r=ws(i,s),r.callback=e??null,wr(t,r,s),n.current.lanes=s,Ph(n,s,i),an(n,i),n}function fp(n,e,t,i){var s=e.current,r=$t(),o=Er(s);return t=c_(t),e.context===null?e.context=t:e.pendingContext=t,e=ws(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=wr(s,e,o),n!==null&&(ci(n,s,o,r),wd(n,s,o)),o}function Pf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ow(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ey(n,e){ow(n,e),(n=n.alternate)&&ow(n,e)}function jC(){return null}var d_=typeof reportError=="function"?reportError:function(n){console.error(n)};function _y(n){this._internalRoot=n}pp.prototype.render=_y.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(F(409));fp(n,e,null,null)};pp.prototype.unmount=_y.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ko(function(){fp(null,n,null,null)}),e[xs]=null}};function pp(n){this._internalRoot=n}pp.prototype.unstable_scheduleHydration=function(n){if(n){var e=$A();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Os.length&&e!==0&&e<Os[t].priority;t++);Os.splice(t,0,n),t===0&&VA(n)}};function Sy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function aw(){}function HC(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Pf(o);r.call(c)}}var o=h_(e,i,n,0,null,!1,!1,"",aw);return n._reactRootContainer=o,n[xs]=o.current,ic(n.nodeType===8?n.parentNode:n),Ko(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Pf(u);a.call(c)}}var u=Ay(n,0,!1,null,null,!1,!1,"",aw);return n._reactRootContainer=u,n[xs]=u.current,ic(n.nodeType===8?n.parentNode:n),Ko(function(){fp(e,u,t,i)}),u}function mp(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var u=Pf(o);a.call(u)}}fp(e,o,n,s)}else o=HC(t,e,n,s,i);return Pf(o)}BA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yu(e.pendingLanes);t!==0&&(Uv(e,t|1),an(e,Ve()),!(ce&6)&&(Yl=Ve()+500,Mr()))}break;case 13:Ko(function(){var i=Cs(n,1);if(i!==null){var s=$t();ci(i,n,1,s)}}),Ey(n,1)}};$v=function(n){if(n.tag===13){var e=Cs(n,134217728);if(e!==null){var t=$t();ci(e,n,134217728,t)}Ey(n,134217728)}};UA=function(n){if(n.tag===13){var e=Er(n),t=Cs(n,e);if(t!==null){var i=$t();ci(t,n,e,i)}Ey(n,e)}};$A=function(){return we};WA=function(n,e){var t=we;try{return we=n,e()}finally{we=t}};Tg=function(n,e,t){switch(e){case"input":if(Eg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=op(i);if(!s)throw Error(F(90));EA(i),Eg(i,s)}}}break;case"textarea":SA(n,t);break;case"select":e=t.value,e!=null&&Ia(n,!!t.multiple,e,!1)}};PA=my;LA=Ko;var zC={usingClientEntryPoint:!1,Events:[Mh,xa,op,TA,RA,my]},hu={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BC={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=FA(n),n===null?null:n.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||jC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{np=od.inject(BC),Di=od}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zC;bn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sy(e))throw Error(F(200));return OC(n,e,null,t)};bn.createRoot=function(n,e){if(!Sy(n))throw Error(F(299));var t=!1,i="",s=d_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ay(n,1,!1,null,null,t,!1,i,s),n[xs]=e.current,ic(n.nodeType===8?n.parentNode:n),new _y(e)};bn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=FA(e),n=n===null?null:n.stateNode,n};bn.flushSync=function(n){return Ko(n)};bn.hydrate=function(n,e,t){if(!gp(e))throw Error(F(200));return mp(null,n,e,!0,t)};bn.hydrateRoot=function(n,e,t){if(!Sy(n))throw Error(F(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=d_;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=h_(e,null,n,1,t??null,s,!1,r,o),n[xs]=e.current,ic(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new pp(e)};bn.render=function(n,e,t){if(!gp(e))throw Error(F(200));return mp(null,n,e,!1,t)};bn.unmountComponentAtNode=function(n){if(!gp(n))throw Error(F(40));return n._reactRootContainer?(Ko(function(){mp(null,null,n,!1,function(){n._reactRootContainer=null,n[xs]=null})}),!0):!1};bn.unstable_batchedUpdates=my;bn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!gp(t))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return mp(n,e,t,!1,i)};bn.version="18.3.1-next-f1338f8080-20240426";function f_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f_)}catch(n){console.error(n)}}f_(),fA.exports=bn;var UC=fA.exports,p_,lw=UC;p_=lw.createRoot,lw.hydrateRoot;var by={};by.match=YC;by.parse=g_;var $C=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,WC=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,VC=/^(?:(min|max)-)?(.+)/,GC=/(em|rem|px|cm|mm|in|pt|pc)?$/,XC=/(dpi|dpcm|dppx)?$/;function YC(n,e){return g_(n).some(function(t){var i=t.inverse,s=t.type==="all"||e.type===t.type;if(s&&i||!(s||i))return!1;var r=t.expressions.every(function(o){var a=o.feature,u=o.modifier,c=o.value,h=e[a];if(!h)return!1;switch(a){case"orientation":case"scan":return h.toLowerCase()===c.toLowerCase();case"width":case"height":case"device-width":case"device-height":c=hw(c),h=hw(h);break;case"resolution":c=cw(c),h=cw(h);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":c=uw(c),h=uw(h);break;case"grid":case"color":case"color-index":case"monochrome":c=parseInt(c,10)||1,h=parseInt(h,10)||0;break}switch(u){case"min":return h>=c;case"max":return h<=c;default:return h===c}});return r&&!i||!r&&i})}function g_(n){return n.split(",").map(function(e){e=e.trim();var t=e.match($C),i=t[1],s=t[2],r=t[3]||"",o={};return o.inverse=!!i&&i.toLowerCase()==="not",o.type=s?s.toLowerCase():"all",r=r.match(/\([^\)]+\)/g)||[],o.expressions=r.map(function(a){var u=a.match(WC),c=u[1].toLowerCase().match(VC);return{modifier:c[1],feature:c[2],value:u[2]}}),o})}function uw(n){var e=Number(n),t;return e||(t=n.match(/^(\d+)\s*\/\s*(\d+)$/),e=t[1]/t[2]),e}function cw(n){var e=parseFloat(n),t=String(n).match(XC)[1];switch(t){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function hw(n){var e=parseFloat(n),t=String(n).match(GC)[1];switch(t){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var qC=by.match,dw=typeof window<"u"?window.matchMedia:null;function KC(n,e,t){var i=this,s;dw&&!t&&(s=dw.call(window,n)),s?(this.matches=s.matches,this.media=s.media,s.addListener(a)):(this.matches=qC(n,e),this.media=n),this.addListener=r,this.removeListener=o,this.dispose=u;function r(c){s&&s.addListener(c)}function o(c){s&&s.removeListener(c)}function a(c){i.matches=c.matches,i.media=c.media}function u(){s&&s.removeListener(a)}}function QC(n,e,t){return new KC(n,e,t)}var JC=QC;const ZC=ep(JC);var ek=/[A-Z]/g,tk=/^ms-/,og={};function nk(n){return"-"+n.toLowerCase()}function m_(n){if(og.hasOwnProperty(n))return og[n];var e=n.replace(ek,nk);return og[n]=tk.test(e)?"-"+e:e}function ik(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),i=Object.keys(e),s=t.length;if(i.length!==s)return!1;for(let r=0;r<s;r++){const o=t[r];if(n[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}var v_={exports:{}},sk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rk=sk,ok=rk;function y_(){}function w_(){}w_.resetWarningCache=y_;var ak=function(){function n(i,s,r,o,a,u){if(u!==ok){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:w_,resetWarningCache:y_};return t.PropTypes=t,t};v_.exports=ak();var lk=v_.exports;const de=ep(lk),zt=de.oneOfType([de.string,de.number]),xy={all:de.bool,grid:de.bool,aural:de.bool,braille:de.bool,handheld:de.bool,print:de.bool,projection:de.bool,screen:de.bool,tty:de.bool,tv:de.bool,embossed:de.bool},A_={orientation:de.oneOf(["portrait","landscape"]),scan:de.oneOf(["progressive","interlace"]),aspectRatio:de.string,deviceAspectRatio:de.string,height:zt,deviceHeight:zt,width:zt,deviceWidth:zt,color:de.bool,colorIndex:de.bool,monochrome:de.bool,resolution:zt,type:Object.keys(xy)},{type:WM,...uk}=A_,E_={minAspectRatio:de.string,maxAspectRatio:de.string,minDeviceAspectRatio:de.string,maxDeviceAspectRatio:de.string,minHeight:zt,maxHeight:zt,minDeviceHeight:zt,maxDeviceHeight:zt,minWidth:zt,maxWidth:zt,minDeviceWidth:zt,maxDeviceWidth:zt,minColor:de.number,maxColor:de.number,minColorIndex:de.number,maxColorIndex:de.number,minMonochrome:de.number,maxMonochrome:de.number,minResolution:zt,maxResolution:zt,...uk},ck={...xy,...E_};var hk={all:ck,types:xy,matchers:A_,features:E_};const dk=n=>`not ${n}`,fk=(n,e)=>{const t=m_(n);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?dk(t):`(${t}: ${e})`},pk=n=>n.join(" and "),gk=n=>{const e=[];return Object.keys(hk.all).forEach(t=>{const i=n[t];i!=null&&e.push(fk(t,i))}),pk(e)},mk=C.createContext(void 0),vk=n=>n.query||gk(n),fw=n=>n?Object.keys(n).reduce((t,i)=>(t[m_(i)]=n[i],t),{}):void 0,__=()=>{const n=C.useRef(!1);return C.useEffect(()=>{n.current=!0},[]),n.current},yk=n=>{const e=C.useContext(mk),t=()=>fw(n)||fw(e),[i,s]=C.useState(t);return C.useEffect(()=>{const r=t();ik(i,r)||s(r)},[n,e]),i},wk=n=>{const e=()=>vk(n),[t,i]=C.useState(e);return C.useEffect(()=>{const s=e();t!==s&&i(s)},[n]),t},Ak=(n,e)=>{const t=()=>ZC(n,e||{},!!e),[i,s]=C.useState(t),r=__();return C.useEffect(()=>{if(r){const o=t();return s(o),()=>{o&&o.dispose()}}},[n,e]),i},Ek=n=>{const[e,t]=C.useState(n.matches);return C.useEffect(()=>{const i=s=>{t(s.matches)};return n.addListener(i),t(n.matches),()=>{n.removeListener(i)}},[n]),e},_k=(n,e,t)=>{const i=yk(e),s=wk(n);if(!s)throw new Error("Invalid or missing MediaQuery!");const r=Ak(s,i),o=Ek(r),a=__();return C.useEffect(()=>{a&&t&&t(o)},[o]),C.useEffect(()=>()=>{r&&r.dispose()},[]),o},pw="/assets/logo-OTFHhTY-.jpg";var Cy={};Object.defineProperty(Cy,"__esModule",{value:!0});Cy.parse=Rk;Cy.serialize=Pk;const Sk=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,bk=/^[\u0021-\u003A\u003C-\u007E]*$/,xk=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Ck=/^[\u0020-\u003A\u003D-\u007E]*$/,kk=Object.prototype.toString,Tk=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function Rk(n,e){const t=new Tk,i=n.length;if(i<2)return t;const s=(e==null?void 0:e.decode)||Lk;let r=0;do{const o=n.indexOf("=",r);if(o===-1)break;const a=n.indexOf(";",r),u=a===-1?i:a;if(o>u){r=n.lastIndexOf(";",o-1)+1;continue}const c=gw(n,r,o),h=mw(n,o,c),d=n.slice(c,h);if(t[d]===void 0){let f=gw(n,o+1,u),p=mw(n,u,f);const m=s(n.slice(f,p));t[d]=m}r=u+1}while(r<i);return t}function gw(n,e,t){do{const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<t);return t}function mw(n,e,t){for(;e>t;){const i=n.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return t}function Pk(n,e,t){const i=(t==null?void 0:t.encode)||encodeURIComponent;if(!Sk.test(n))throw new TypeError(`argument name is invalid: ${n}`);const s=i(e);if(!bk.test(s))throw new TypeError(`argument val is invalid: ${e}`);let r=n+"="+s;if(!t)return r;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);r+="; Max-Age="+t.maxAge}if(t.domain){if(!xk.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);r+="; Domain="+t.domain}if(t.path){if(!Ck.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);r+="; Path="+t.path}if(t.expires){if(!Mk(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);r+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.partitioned&&(r+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"none":r+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return r}function Lk(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function Mk(n){return kk.call(n)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vw="popstate";function Ik(n={}){function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return am("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:dc(s)}return Dk(e,t,null,n)}function je(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Oi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fk(){return Math.random().toString(36).substring(2,10)}function yw(n,e){return{usr:n.state,key:n.key,idx:e}}function am(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Zl(e):e,state:t,key:e&&e.key||i||Fk()}}function dc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Zl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Dk(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function d(){a="POP";let S=h(),g=S==null?null:S-c;c=S,u&&u({action:a,location:w.location,delta:g})}function f(S,g){a="PUSH";let v=am(w.location,S,g);c=h()+1;let E=yw(v,c),b=w.createHref(v);try{o.pushState(E,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(b)}r&&u&&u({action:a,location:w.location,delta:1})}function p(S,g){a="REPLACE";let v=am(w.location,S,g);c=h();let E=yw(v,c),b=w.createHref(v);o.replaceState(E,"",b),r&&u&&u({action:a,location:w.location,delta:0})}function m(S){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof S=="string"?S:dc(S);return v=v.replace(/ $/,"%20"),je(g,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,g)}let w={get action(){return a},get location(){return n(s,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(vw,d),u=S,()=>{s.removeEventListener(vw,d),u=null}},createHref(S){return e(s,S)},createURL:m,encodeLocation(S){let g=m(S);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(S){return o.go(S)}};return w}function S_(n,e,t="/"){return Nk(n,e,t,!1)}function Nk(n,e,t,i){let s=typeof e=="string"?Zl(e):e,r=xr(s.pathname||"/",t);if(r==null)return null;let o=b_(n);Ok(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Yk(r);a=Gk(o[u],c,i)}return a}function b_(n,e=[],t=[],i=""){let s=(r,o,a)=>{let u={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=As([i,u.relativePath]),h=t.concat(u);r.children&&r.children.length>0&&(je(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),b_(r.children,e,h,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:Wk(c,r.index),routesMeta:h})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let u of x_(r.path))s(r,o,u)}),e}function x_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=x_(i.join("/")),a=[];return a.push(...o.map(u=>u===""?r:[r,u].join("/"))),s&&a.push(...o),a.map(u=>n.startsWith("/")&&u===""?"/":u)}function Ok(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Vk(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var jk=/^:[\w-]+$/,Hk=3,zk=2,Bk=1,Uk=10,$k=-2,ww=n=>n==="*";function Wk(n,e){let t=n.split("/"),i=t.length;return t.some(ww)&&(i+=$k),e&&(i+=zk),t.filter(s=>!ww(s)).reduce((s,r)=>s+(jk.test(r)?Hk:r===""?Bk:Uk),i)}function Vk(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function Gk(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let u=i[a],c=a===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=Lf({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),f=u.route;if(!d&&c&&t&&!i[i.length-1].route.index&&(d=Lf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:As([r,d.pathname]),pathnameBase:Jk(As([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=As([r,d.pathnameBase]))}return o}function Lf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Xk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let m=a[f]||"";o=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function Xk(n,e=!1,t=!0){Oi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(i.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Yk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Oi(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function qk(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Zl(n):n;return{pathname:t?t.startsWith("/")?t:Kk(t,e):e,search:Zk(i),hash:eT(s)}}function Kk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ag(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Qk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function C_(n){let e=Qk(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function k_(n,e,t,i=!1){let s;typeof n=="string"?s=Zl(n):(s={...n},je(!s.pathname||!s.pathname.includes("?"),ag("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),ag("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),ag("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let u=qk(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var As=n=>n.join("/").replace(/\/\/+/g,"/"),Jk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Zk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var T_=["POST","PUT","PATCH","DELETE"];new Set(T_);var nT=["GET",...T_];new Set(nT);var eu=C.createContext(null);eu.displayName="DataRouter";var vp=C.createContext(null);vp.displayName="DataRouterState";var R_=C.createContext({isTransitioning:!1});R_.displayName="ViewTransition";var iT=C.createContext(new Map);iT.displayName="Fetchers";var sT=C.createContext(null);sT.displayName="Await";var ji=C.createContext(null);ji.displayName="Navigation";var Fh=C.createContext(null);Fh.displayName="Location";var Ls=C.createContext({outlet:null,matches:[],isDataRoute:!1});Ls.displayName="Route";var ky=C.createContext(null);ky.displayName="RouteError";function rT(n,{relative:e}={}){je(Dh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=C.useContext(ji),{hash:s,pathname:r,search:o}=Nh(n,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:As([t,r])),i.createHref({pathname:a,search:o,hash:s})}function Dh(){return C.useContext(Fh)!=null}function ra(){return je(Dh(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Fh).location}var P_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L_(n){C.useContext(ji).static||C.useLayoutEffect(n)}function oT(){let{isDataRoute:n}=C.useContext(Ls);return n?wT():aT()}function aT(){je(Dh(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(eu),{basename:e,navigator:t}=C.useContext(ji),{matches:i}=C.useContext(Ls),{pathname:s}=ra(),r=JSON.stringify(C_(i)),o=C.useRef(!1);return L_(()=>{o.current=!0}),C.useCallback((u,c={})=>{if(Oi(o.current,P_),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=k_(u,JSON.parse(r),s,c.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:As([e,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[e,t,r,s,n])}C.createContext(null);function Nh(n,{relative:e}={}){let{matches:t}=C.useContext(Ls),{pathname:i}=ra(),s=JSON.stringify(C_(t));return C.useMemo(()=>k_(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function lT(n,e){return M_(n,e)}function M_(n,e,t,i){var g;je(Dh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(ji),{matches:r}=C.useContext(Ls),o=r[r.length-1],a=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let v=h&&h.path||"";I_(u,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=ra(),f;if(e){let v=typeof e=="string"?Zl(e):e;je(c==="/"||((g=v.pathname)==null?void 0:g.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${v.pathname}" was given in the \`location\` prop.`),f=v}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=S_(n,{pathname:m});Oi(h||w!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Oi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=fT(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:As([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:As([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,t,i);return e&&S?C.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},S):S}function uT(){let n=yT(),e=tT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:r},"ErrorBoundary")," or"," ",C.createElement("code",{style:r},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,o)}var cT=C.createElement(uT,null),hT=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(Ls.Provider,{value:this.props.routeContext},C.createElement(ky.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dT({routeContext:n,match:e,children:t}){let i=C.useContext(eu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Ls.Provider,{value:n},t)}function fT(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,r=t==null?void 0:t.errors;if(r!=null){let u=s.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);je(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,a=-1;if(t)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=u),c.route.id){let{loaderData:h,errors:d}=t,f=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let d,f=!1,p=null,m=null;t&&(d=r&&c.route.id?r[c.route.id]:void 0,p=c.route.errorElement||cT,o&&(a<0&&h===0?(I_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):a===h&&(f=!0,m=c.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,h+1)),S=()=>{let g;return d?g=p:f?g=m:c.route.Component?g=C.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=u,C.createElement(dT,{match:c,routeContext:{outlet:u,matches:w,isDataRoute:t!=null},children:g})};return t&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?C.createElement(hT,{location:t.location,revalidation:t.revalidation,component:p,error:d,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}function Ty(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pT(n){let e=C.useContext(eu);return je(e,Ty(n)),e}function gT(n){let e=C.useContext(vp);return je(e,Ty(n)),e}function mT(n){let e=C.useContext(Ls);return je(e,Ty(n)),e}function Ry(n){let e=mT(n),t=e.matches[e.matches.length-1];return je(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function vT(){return Ry("useRouteId")}function yT(){var i;let n=C.useContext(ky),e=gT("useRouteError"),t=Ry("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function wT(){let{router:n}=pT("useNavigate"),e=Ry("useNavigate"),t=C.useRef(!1);return L_(()=>{t.current=!0}),C.useCallback(async(s,r={})=>{Oi(t.current,P_),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var Aw={};function I_(n,e,t){!e&&!Aw[n]&&(Aw[n]=!0,Oi(!1,t))}C.memo(AT);function AT({routes:n,future:e,state:t}){return M_(n,void 0,t,e)}function Cd(n){je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ET({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1}){je(!Dh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=C.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof t=="string"&&(t=Zl(t));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=t,p=C.useMemo(()=>{let m=xr(u,o);return m==null?null:{location:{pathname:m,search:c,hash:h,state:d,key:f},navigationType:i}},[o,u,c,h,d,f,i]);return Oi(p!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:C.createElement(ji.Provider,{value:a},C.createElement(Fh.Provider,{children:e,value:p}))}function _T({children:n,location:e}){return lT(lm(n),e)}function lm(n,e=[]){let t=[];return C.Children.forEach(n,(i,s)=>{if(!C.isValidElement(i))return;let r=[...e,s];if(i.type===C.Fragment){t.push.apply(t,lm(i.props.children,r));return}je(i.type===Cd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),je(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=lm(i.props.children,r)),t.push(o)}),t}var kd="get",Td="application/x-www-form-urlencoded";function yp(n){return n!=null&&typeof n.tagName=="string"}function ST(n){return yp(n)&&n.tagName.toLowerCase()==="button"}function bT(n){return yp(n)&&n.tagName.toLowerCase()==="form"}function xT(n){return yp(n)&&n.tagName.toLowerCase()==="input"}function CT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function kT(n,e){return n.button===0&&(!e||e==="_self")&&!CT(n)}var ad=null;function TT(){if(ad===null)try{new FormData(document.createElement("form"),0),ad=!1}catch{ad=!0}return ad}var RT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lg(n){return n!=null&&!RT.has(n)?(Oi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Td}"`),null):n}function PT(n,e){let t,i,s,r,o;if(bT(n)){let a=n.getAttribute("action");i=a?xr(a,e):null,t=n.getAttribute("method")||kd,s=lg(n.getAttribute("enctype"))||Td,r=new FormData(n)}else if(ST(n)||xT(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||a.getAttribute("action");if(i=u?xr(u,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||kd,s=lg(n.getAttribute("formenctype"))||lg(a.getAttribute("enctype"))||Td,r=new FormData(a,n),!TT()){let{name:c,type:h,value:d}=n;if(h==="image"){let f=c?`${c}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else c&&r.append(c,d)}}else{if(yp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=kd,i=null,s=Td,o=n}return r&&s==="text/plain"&&(o=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:o}}function Py(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function LT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IT(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let o=await LT(r,t);return o.links?o.links():[]}return[]}));return OT(i.flat(1).filter(MT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ew(n,e,t,i,s,r){let o=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,a=(u,c)=>{var h;return t[c].pathname!==u.pathname||((h=t[c].route.path)==null?void 0:h.endsWith("*"))&&t[c].params["*"]!==u.params["*"]};return r==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):r==="data"?e.filter((u,c)=>{var d;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function FT(n,e){return DT(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function DT(n){return[...new Set(n)]}function NT(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function OT(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(NT(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}function jT(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function HT(){let n=C.useContext(eu);return Py(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zT(){let n=C.useContext(vp);return Py(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ly=C.createContext(void 0);Ly.displayName="FrameworkContext";function F_(){let n=C.useContext(Ly);return Py(n,"You must render this element inside a <HydratedRouter> element"),n}function BT(n,e){let t=C.useContext(Ly),[i,s]=C.useState(!1),[r,o]=C.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=C.useRef(null);C.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=g=>{g.forEach(v=>{o(v.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return f.current&&S.observe(f.current),()=>{S.disconnect()}}},[n]),C.useEffect(()=>{if(i){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return t?n!=="intent"?[r,f,{}]:[r,f,{onFocus:du(a,p),onBlur:du(u,m),onMouseEnter:du(c,p),onMouseLeave:du(h,m),onTouchStart:du(d,p)}]:[!1,f,{}]}function du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UT({page:n,...e}){let{router:t}=HT(),i=C.useMemo(()=>S_(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?C.createElement(WT,{page:n,matches:i,...e}):null}function $T(n){let{manifest:e,routeModules:t}=F_(),[i,s]=C.useState([]);return C.useEffect(()=>{let r=!1;return IT(n,e,t).then(o=>{r||s(o)}),()=>{r=!0}},[n,e,t]),i}function WT({page:n,matches:e,...t}){let i=ra(),{manifest:s,routeModules:r}=F_(),{loaderData:o,matches:a}=zT(),u=C.useMemo(()=>Ew(n,e,a,s,i,"data"),[n,e,a,s,i]),c=C.useMemo(()=>Ew(n,e,a,s,i,"assets"),[n,e,a,s,i]),h=C.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let p=new Set,m=!1;if(e.forEach(S=>{var v;let g=s.routes[S.route.id];!g||!g.hasLoader||(!u.some(E=>E.route.id===S.route.id)&&S.route.id in o&&((v=r[S.route.id])!=null&&v.shouldRevalidate)||g.hasClientLoader?m=!0:p.add(S.route.id))}),p.size===0)return[];let w=jT(n);return m&&p.size>0&&w.searchParams.set("_routes",e.filter(S=>p.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[o,i,s,u,e,n,r]),d=C.useMemo(()=>FT(c,s),[c,s]),f=$T(c);return C.createElement(C.Fragment,null,h.map(p=>C.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),d.map(p=>C.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),f.map(({key:p,link:m})=>C.createElement("link",{key:p,...m})))}function VT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var D_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{D_&&(window.__reactRouterVersion="7.1.1")}catch{}function GT({basename:n,children:e,window:t}){let i=C.useRef();i.current==null&&(i.current=Ik({window:t,v5Compat:!0}));let s=i.current,[r,o]=C.useState({action:s.action,location:s.location}),a=C.useCallback(u=>{C.startTransition(()=>o(u))},[o]);return C.useLayoutEffect(()=>s.listen(a),[s,a]),C.createElement(ET,{basename:n,children:e,location:r.location,navigationType:r.action,navigator:s})}var N_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,My=C.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:d,...f},p){let{basename:m}=C.useContext(ji),w=typeof c=="string"&&N_.test(c),S,g=!1;if(typeof c=="string"&&w&&(S=c,D_))try{let M=new URL(window.location.href),I=c.startsWith("//")?new URL(M.protocol+c):new URL(c),D=xr(I.pathname,m);I.origin===M.origin&&D!=null?c=D+I.search+I.hash:g=!0}catch{Oi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=rT(c,{relative:s}),[E,b,x]=BT(i,f),k=qT(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:d});function T(M){e&&e(M),M.defaultPrevented||k(M)}let R=C.createElement("a",{...f,...x,href:S||v,onClick:g||r?e:T,ref:VT(p,b),target:u,"data-discover":!w&&t==="render"?"true":void 0});return E&&!w?C.createElement(C.Fragment,null,R,C.createElement(UT,{page:v})):R});My.displayName="Link";var Iy=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:o,viewTransition:a,children:u,...c},h){let d=Nh(o,{relative:c.relative}),f=ra(),p=C.useContext(vp),{navigator:m,basename:w}=C.useContext(ji),S=p!=null&&eR(d)&&a===!0,g=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,v=f.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(v=v.toLowerCase(),E=E?E.toLowerCase():null,g=g.toLowerCase()),E&&w&&(E=xr(E,w)||E);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let x=v===g||!s&&v.startsWith(g)&&v.charAt(b)==="/",k=E!=null&&(E===g||!s&&E.startsWith(g)&&E.charAt(g.length)==="/"),T={isActive:x,isPending:k,isTransitioning:S},R=x?e:void 0,M;typeof i=="function"?M=i(T):M=[i,x?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let I=typeof r=="function"?r(T):r;return C.createElement(My,{...c,"aria-current":R,className:M,ref:h,style:I,to:o,viewTransition:a},typeof u=="function"?u(T):u)});Iy.displayName="NavLink";var XT=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:o=kd,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:d,...f},p)=>{let m=JT(),w=ZT(a,{relative:c}),S=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&N_.test(a),v=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let b=E.nativeEvent.submitter,x=(b==null?void 0:b.getAttribute("formmethod"))||o;m(b||E.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:s,state:r,relative:c,preventScrollReset:h,viewTransition:d})};return C.createElement("form",{ref:p,method:S,action:w,onSubmit:i?u:v,...f,"data-discover":!g&&n==="render"?"true":void 0})});XT.displayName="Form";function YT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O_(n){let e=C.useContext(eu);return je(e,YT(n)),e}function qT(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=oT(),u=ra(),c=Nh(n,{relative:r});return C.useCallback(h=>{if(kT(h,e)){h.preventDefault();let d=t!==void 0?t:dc(u)===dc(c);a(n,{replace:d,state:i,preventScrollReset:s,relative:r,viewTransition:o})}},[u,a,c,t,i,e,n,s,r,o])}var KT=0,QT=()=>`__${String(++KT)}__`;function JT(){let{router:n}=O_("useSubmit"),{basename:e}=C.useContext(ji),t=vT();return C.useCallback(async(i,s={})=>{let{action:r,method:o,encType:a,formData:u,body:c}=PT(i,e);if(s.navigate===!1){let h=s.fetcherKey||QT();await n.fetch(h,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await n.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function ZT(n,{relative:e}={}){let{basename:t}=C.useContext(ji),i=C.useContext(Ls);je(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Nh(n||".",{relative:e})},o=ra();if(n==null){r.search=o.search;let a=new URLSearchParams(r.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(d=>d).forEach(d=>a.append("index",d));let h=a.toString();r.search=h?`?${h}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:As([t,r.pathname])),dc(r)}function eR(n,e={}){let t=C.useContext(R_);je(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=O_("useViewTransitionState"),s=Nh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=xr(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=xr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Lf(s.pathname,o)!=null||Lf(s.pathname,r)!=null}new TextEncoder;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var um=function(){return um=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},um.apply(this,arguments)};function tR(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}var Ha="",Vu=null,Rd=null,j_=null;function Fy(){Ha="",Vu!==null&&Vu.disconnect(),Rd!==null&&(window.clearTimeout(Rd),Rd=null)}function _w(n){var e=["BUTTON","INPUT","SELECT","TEXTAREA"],t=["A","AREA"];return e.includes(n.tagName)&&!n.hasAttribute("disabled")||t.includes(n.tagName)&&n.hasAttribute("href")}function Sw(){var n=null;if(Ha==="#")n=document.body;else{var e=Ha.replace("#","");n=document.getElementById(e),n===null&&Ha==="#top"&&(n=document.body)}if(n!==null){j_(n);var t=n.getAttribute("tabindex");return t===null&&!_w(n)&&n.setAttribute("tabindex",-1),n.focus({preventScroll:!0}),t===null&&!_w(n)&&(n.blur(),n.removeAttribute("tabindex")),Fy(),!0}return!1}function nR(n){window.setTimeout(function(){Sw()===!1&&(Vu===null&&(Vu=new MutationObserver(Sw)),Vu.observe(document,{attributes:!0,childList:!0,subtree:!0}),Rd=window.setTimeout(function(){Fy()},n||1e4))},0)}function H_(n){return n0.forwardRef(function(e,t){var i="";typeof e.to=="string"&&e.to.includes("#")?i="#"+e.to.split("#").slice(1).join("#"):typeof e.to=="object"&&typeof e.to.hash=="string"&&(i=e.to.hash);var s={};n===Iy&&(s.isActive=function(a,u){return a&&a.isExact&&u.hash===i});function r(a){Fy(),Ha=e.elementId?"#"+e.elementId:i,e.onClick&&e.onClick(a),Ha!==""&&!a.defaultPrevented&&a.button===0&&(!e.target||e.target==="_self")&&!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)&&(j_=e.scroll||function(u){return e.smooth?u.scrollIntoView({behavior:"smooth"}):u.scrollIntoView()},nR(e.timeout))}var o=tR(e,["scroll","smooth","timeout","elementId"]);return n0.createElement(n,um({},s,o,{onClick:r,ref:t}),e.children)})}var Fr=H_(My);H_(Iy);function Dy(){function n(r){s(r)}const[e,t]=C.useState(!1);C.useEffect(()=>{window.matchMedia("(max-width: 100vh)").matches===!0?s(!0):s(!1)},[]);const[i,s]=C.useState(!1);return _k({query:"(max-width: 100vh)"},void 0,n),P.jsxs("div",{id:"navbar",className:e?"expanded":"contracted",children:[i&&P.jsxs("div",{id:"mobile-nav-top-row",children:[P.jsx("button",{id:"menu",onClick:()=>t(!e),children:""}),P.jsx(Fr,{id:"nav-img-link",to:"/",children:P.jsx("img",{id:"mobile-nav-logo",src:pw,alt:"UMaine JVP Logo"})})]}),P.jsx(Fr,{className:"nav-item",to:"/#about",onClick:()=>t(!1),children:"who we are"}),P.jsx(Fr,{className:"nav-item",to:"/#get-involved",onClick:()=>t(!1),children:"get involved"}),P.jsx(Fr,{className:"nav-item",to:"/#contact",onClick:()=>t(!1),children:"contact"}),!i&&P.jsx(Fr,{to:"/",style:{height:"inherit"},children:P.jsx("img",{id:"jvp-logo",src:pw,alt:"UMaine JVP Logo"})}),P.jsx(Fr,{className:"nav-item",to:"/demands",onClick:()=>t(!1),children:"demands"}),P.jsx(Fr,{className:"nav-item",to:"/minutes-1982",onClick:()=>t(!1),children:"precedent"}),P.jsx("a",{id:"register",className:"nav-item",href:"https://bit.ly/UMSDivest",target:"_blank",rel:"noreferrer",onClick:()=>t(!e),children:"sign the petition"})]})}const iR="/JVP-logo.svg",bw="/ig_icon.webp",sR="/mailing_list_icon.png";function rR(){return P.jsxs(P.Fragment,{children:[P.jsx(Dy,{}),P.jsxs("div",{className:"page-content",children:[P.jsx("div",{id:"splash-image",title:"Free Palestine protestors gather outside Fogler Library",children:P.jsxs("div",{className:"splash-square",children:[P.jsx("h1",{className:"title",children:"UMaine Jewish Voice for Peace"}),P.jsx("a",{className:"button",id:"splash-button",href:"https://bit.ly/UMSDivest",target:"_blank",rel:"noreferrer",children:"SIGN FOR THE UMAINE SYSTEM TO DIVEST!"})]})}),P.jsxs("section",{className:"main-nav-section",id:"about",children:[P.jsxs("div",{id:"about-image-header",children:[P.jsx("img",{src:iR,alt:"Jewish Voice for Peace logo"}),P.jsxs("div",{id:"about-image-header-title",children:[P.jsx("h1",{children:"UMaine Jewish Voice for Peace"}),P.jsx("h2",{children:"a grassroots, multiracial, intergenerational movement in solidarity with Palestinian liberation"})]})]}),P.jsx("h2",{children:"ABOUT UMAINE JVP"}),P.jsxs("p",{children:["We are an official chapter of"," ",P.jsx("a",{href:"https://www.jewishvoiceforpeace.org/",target:"_blank",rel:"noreferrer",children:"Jewish Voice for Peace"})," ","here at the University of Maine. JVP is a national organization focusing on dismantling Zionism and achieving Palestinian liberation."]}),P.jsx("p",{children:"Like generations of Jewish leftists before us, we fight for the liberation of all people. We believe that through organizing, we can and will dismantle the institutions and structures that sustain injustice and grow something new, joyful, beautiful, and life-sustaining in their place."}),P.jsx("p",{children:"We are welcome to people of all ethnic and/or religious backgrounds who want to fight for peace and justice. We invite any UMaine System community members be you students, faculty, staff, alumni, or taxpaying mainers to sign up for our email list and sign the petition calling on the university of Maine to divest from the state of Israel and corporations complicit in the genocide in Gaza."})]}),P.jsx("hr",{}),P.jsxs("section",{className:"main-nav-section",id:"get-involved",children:[P.jsx("h2",{children:"JOIN US IN OUR WEEKLY MEETINGS!"}),P.jsx("p",{children:"We meet every Tuesday from 5-6pm in the Lown room of the Memorial Union!"}),P.jsxs("div",{className:"buttons-container",children:[P.jsxs("div",{className:"social-section",children:[P.jsx("img",{className:"social-logo",src:sR,alt:"Email Logo"}),P.jsx("a",{className:"button",href:"https://docs.google.com/forms/d/e/1FAIpQLSftZI_yXCV5ZaaNDYtZNQSOpmtybHPDDMCWdK_9pi3zIJ7Ukg/viewform",target:"_blank",rel:"noreferrer",children:"JOIN OUR MAILING LIST!"})]}),P.jsxs("div",{className:"social-section",children:[P.jsx("img",{className:"social-logo",src:bw,alt:"Instagram Logo"}),P.jsx("a",{className:"button",href:"https://www.instagram.com/umainejvp/",target:"_blank",rel:"noreferrer",children:"FOLLOW US ON INSTAGRAM!"})]})]}),P.jsx("h2",{children:"WHY SHOULD YOU JOIN UMAINE JVP?"}),P.jsxs("ul",{children:[P.jsx("li",{children:"if you've been looking for a political home for Jews on the left in this perilous moment"}),P.jsx("li",{children:"if you've been wanting a Jewish community with justice at the center"}),P.jsxs("li",{children:["if you're ",P.jsx("em",{children:"not"})," Jewish, but are still looking for such a community"]}),P.jsx("li",{children:"if you've been looking to turn your rage and grief into meaningful, strategic action..."})]}),P.jsx("p",{children:P.jsx("strong",{children:"Join us. You belong here."})})]}),P.jsx("hr",{}),P.jsxs("section",{className:"main-nav-section",id:"contact",children:[P.jsx("h2",{children:"CONTACT US"}),P.jsxs("p",{children:["Send us an email at"," ",P.jsx("a",{href:"mailto:umaine@jewishvoiceforpeace.org",target:"_blank",rel:"noreferrer",children:"umaine@jewishvoiceforpeace.org"})]}),P.jsxs("p",{className:"social-section",children:[P.jsx("img",{className:"social-logo",src:bw,alt:"Instagram Logo"}),P.jsx("a",{href:"https://www.instagram.com/umainejvp/",target:"_blank",rel:"noreferrer",children:"or contact us on Instagram!"})]}),P.jsx("p",{children:"We hope to hear from you soon :)"})]}),P.jsx("footer",{})]})]})}const oR="modulepreload",aR=function(n){return"/"+n},xw={},ld=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(u=>{if(u=aR(u),u in xw)return;xw[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":oR,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var Gu={};Gu.d=(n,e)=>{for(var t in e)Gu.o(e,t)&&!Gu.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Gu.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var K=globalThis.pdfjsLib={};Gu.d(K,{AbortException:()=>aa,AnnotationEditorLayer:()=>Ev,AnnotationEditorParamsType:()=>q,AnnotationEditorType:()=>te,AnnotationEditorUIManager:()=>Jo,AnnotationLayer:()=>rL,AnnotationMode:()=>Hs,ColorPicker:()=>Df,DOMSVGFactory:()=>Xy,DrawLayer:()=>xv,FeatureTest:()=>Wt,GlobalWorkerOptions:()=>ms,ImageKind:()=>Pd,InvalidPDFException:()=>B_,MissingPDFException:()=>oa,OPS:()=>Gn,OutputScale:()=>pm,PDFDataRangeTransport:()=>OS,PDFDateString:()=>zy,PDFWorker:()=>Ba,PasswordResponses:()=>hR,PermissionFlag:()=>cR,PixelsPerInch:()=>Cr,RenderingCancelledException:()=>jy,TextLayer:()=>Um,UnexpectedResponseException:()=>_p,Util:()=>U,VerbosityLevel:()=>wp,XfaLayer:()=>HS,build:()=>HP,createValidAbsoluteUrl:()=>gR,fetchData:()=>bp,getDocument:()=>PP,getFilenameFromUrl:()=>bR,getPdfFilenameFromUrl:()=>xR,getXfaPageViewport:()=>CR,isDataScheme:()=>xp,isPdfFile:()=>Hy,noContextMenu:()=>Bn,normalizeUnicode:()=>ER,setLayerDimensions:()=>Qo,shadow:()=>ue,version:()=>jP});const Ft=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),z_=[1,0,0,1,0,0],cm=[.001,0,0,.001,0,0],lR=1e7,ug=1.35,vn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},uR="pdfjs_internal_editor_",te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},q={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},cR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ct={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Pd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},wp={ERRORS:0,WARNINGS:1,INFOS:5},Gn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},hR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ap=wp.WARNINGS;function dR(n){Number.isInteger(n)&&(Ap=n)}function fR(){return Ap}function Ep(n){Ap>=wp.INFOS&&console.log(`Info: ${n}`)}function ie(n){Ap>=wp.WARNINGS&&console.log(`Warning: ${n}`)}function ke(n){throw new Error(n)}function it(n,e){n||ke(e)}function pR(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gR(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=AR(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(pR(i))return i}catch{}return null}function ue(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Ir=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class hm extends Ir{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dm extends Ir{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class B_ extends Ir{constructor(e){super(e,"InvalidPDFException")}}class oa extends Ir{constructor(e){super(e,"MissingPDFException")}}class _p extends Ir{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class mR extends Ir{constructor(e){super(e,"FormatError")}}class aa extends Ir{constructor(e){super(e,"AbortException")}}function U_(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ke("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Sp(n){typeof n!="string"&&ke("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function vR(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Ny(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function yR(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function wR(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return ue(this,"isLittleEndian",yR())}static get isEvalSupported(){return ue(this,"isEvalSupported",wR())}static get isOffscreenCanvasSupported(){return ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ue(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ue(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ue(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const cg=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var _s,Ld,fm;class U{static makeHexColor(e,t,i){return`#${cg[e]}${cg[t]}${cg[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,u=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,c=a+u||1,h=a-u||1;return[Math.sqrt(c),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static bezierBoundingBox(e,t,i,s,r,o,a,u,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,u),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,u)):c=[Math.min(e,a),Math.min(t,u),Math.max(e,a),Math.max(t,u)],A(this,_s,fm).call(this,e,i,r,a,t,s,o,u,3*(-e+3*(i-r)+a),6*(e-2*i+r),3*(i-e),c),A(this,_s,fm).call(this,e,i,r,a,t,s,o,u,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),c),c}}_s=new WeakSet,Ld=function(e,t,i,s,r,o,a,u,c,h){if(c<=0||c>=1)return;const d=1-c,f=c*c,p=f*c,m=d*(d*(d*e+3*c*t)+3*f*i)+p*s,w=d*(d*(d*r+3*c*o)+3*f*a)+p*u;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],w)},fm=function(e,t,i,s,r,o,a,u,c,h,d,f){if(Math.abs(c)<1e-12){Math.abs(h)>=1e-12&&A(this,_s,Ld).call(this,e,t,i,s,r,o,a,u,-d/h,f);return}const p=h**2-4*d*c;if(p<0)return;const m=Math.sqrt(p),w=2*c;A(this,_s,Ld).call(this,e,t,i,s,r,o,a,u,(-h+m)/w,f),A(this,_s,Ld).call(this,e,t,i,s,r,o,a,u,(-h-m)/w,f)},_(U,_s);function AR(n){return decodeURIComponent(escape(n))}let hg=null,Cw=null;function ER(n){return hg||(hg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Cw=new Map([["","t"]])),n.replaceAll(hg,(e,t,i)=>t?t.normalize("NFKC"):Cw.get(i))}function _R(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return U_(n)}const Oy="pdfjs_internal_id_",Hi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function SR(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(U_(n))}const Bi="http://www.w3.org/2000/svg",Ur=class Ur{};Y(Ur,"CSS",96),Y(Ur,"PDF",72),Y(Ur,"PDF_TO_CSS_UNITS",Ur.CSS/Ur.PDF);let Cr=Ur;async function bp(n,e="text"){if(Au(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Oh{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=r;const a=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,w,S;c===0?(p=Math.abs(u-e[1])*t+s,m=Math.abs(a-e[0])*t+r,w=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(p=Math.abs(a-e[0])*t+s,m=Math.abs(u-e[1])*t+r,w=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[c*t,h*t,d*t,f*t,p-c*t*a-d*t*u,m-h*t*a-f*t*u],this.width=w,this.height=S}get rawDims(){const{viewBox:e}=this;return ue(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Oh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return U.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=U.applyTransform([e[0],e[1]],this.transform),i=U.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return U.applyInverseTransform([e,t],this.transform)}}class jy extends Ir{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Hy(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function bR(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function xR(n,e="document.pdf"){if(typeof n!="string")return e;if(xp(n))return ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class kw{constructor(){Y(this,"started",Object.create(null));Y(this,"times",[])}time(e){e in this.started&&ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Au(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Bn(n){n.preventDefault()}function Tw(n){console.log("Deprecated API usage: "+n)}var pc;class zy{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,pc)||y(this,pc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,pc).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const c=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=h,a+=d):c==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,s,r,o,a,u))}}pc=new WeakMap,_(zy,pc);function CR(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Oh({viewBox:r,scale:e,rotation:t})}function By(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ie(`Not a valid color format: "${n}"`),[0,0,0])}function kR(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,By(i))}e.remove()}function De(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function zi(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function Qo(n,e,t=!1,i=!0){if(e instanceof Oh){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,a=Wt.isCSSRoundSupported,u=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,d=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class pm{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var zs,Xr,Xn,Yr,gc,mc,Of,$_,Vt,W_,V_,Md,G_,mm;const $i=class $i{constructor(e){_(this,Vt);_(this,zs,null);_(this,Xr,null);_(this,Xn);_(this,Yr,null);_(this,gc,null);y(this,Xn,e),l($i,mc)||y($i,mc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=y(this,zs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Xn)._uiManager._signal;e.addEventListener("contextmenu",Bn,{signal:t}),e.addEventListener("pointerdown",A($i,Of,$_),{signal:t});const i=y(this,Yr,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Xn).toolbarPosition;if(s){const{style:r}=e,o=l(this,Xn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,Vt,G_).call(this),e}get div(){return l(this,zs)}hide(){var e;l(this,zs).classList.add("hidden"),(e=l(this,Xr))==null||e.hideDropdown()}show(){var e;l(this,zs).classList.remove("hidden"),(e=l(this,gc))==null||e.shown()}async addAltText(e){const t=await e.render();A(this,Vt,Md).call(this,t),l(this,Yr).prepend(t,l(this,Vt,mm)),y(this,gc,e)}addColorPicker(e){y(this,Xr,e);const t=e.renderButton();A(this,Vt,Md).call(this,t),l(this,Yr).prepend(t,l(this,Vt,mm))}remove(){var e;l(this,zs).remove(),(e=l(this,Xr))==null||e.destroy(),y(this,Xr,null)}};zs=new WeakMap,Xr=new WeakMap,Xn=new WeakMap,Yr=new WeakMap,gc=new WeakMap,mc=new WeakMap,Of=new WeakSet,$_=function(e){e.stopPropagation()},Vt=new WeakSet,W_=function(e){l(this,Xn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},V_=function(e){l(this,Xn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Md=function(e){const t=l(this,Xn)._uiManager._signal;e.addEventListener("focusin",A(this,Vt,W_).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,Vt,V_).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Bn,{signal:t})},G_=function(){const{editorType:e,_uiManager:t}=l(this,Xn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l($i,mc)[e]),A(this,Vt,Md).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Yr).append(i)},mm=function(){const e=document.createElement("div");return e.className="divider",e},_($i,Of),_($i,mc,null);let gm=$i;var vc,qr,Kr,Tr,X_,Y_,q_;class TR{constructor(e){_(this,Tr);_(this,vc,null);_(this,qr,null);_(this,Kr);y(this,Kr,e)}show(e,t,i){const[s,r]=A(this,Tr,Y_).call(this,t,i),{style:o}=l(this,qr)||y(this,qr,A(this,Tr,X_).call(this));e.append(l(this,qr)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,qr).remove()}}vc=new WeakMap,qr=new WeakMap,Kr=new WeakMap,Tr=new WeakSet,X_=function(){const e=y(this,qr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Bn,{signal:l(this,Kr)._signal});const t=y(this,vc,document.createElement("div"));return t.className="buttons",e.append(t),A(this,Tr,q_).call(this),e},Y_=function(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const a=r.x+(t?r.width:0);if(o>i){s=a,i=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,i]},q_=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Kr)._signal;e.addEventListener("contextmenu",Bn,{signal:i}),e.addEventListener("click",()=>{l(this,Kr).highlightSelection("floating_button")},{signal:i}),l(this,vc).append(e)};function Mf(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function RR(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var jf;class PR{constructor(){_(this,jf,0)}get id(){return`${uR}${Ot(this,jf)._++}`}}jf=new WeakMap;var Wa,yc,Tt,Va,Id;const qy=class qy{constructor(){_(this,Va);_(this,Wa,_R());_(this,yc,0);_(this,Tt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ue(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return A(this,Va,Id).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return A(this,Va,Id).call(this,e,e)}async getFromBlob(e,t){const i=await t;return A(this,Va,Id).call(this,e,i)}async getFromId(e){l(this,Tt)||y(this,Tt,new Map);const t=l(this,Tt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Tt)||y(this,Tt,new Map);let i=l(this,Tt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${l(this,Wa)}_${Ot(this,yc)._++}`,refCounter:1,isSvg:!1},l(this,Tt).set(e,i),l(this,Tt).set(i.id,i),i}getSvgUrl(e){const t=l(this,Tt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,Tt)||y(this,Tt,new Map);const t=l(this,Tt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Wa)}_`)}};Wa=new WeakMap,yc=new WeakMap,Tt=new WeakMap,Va=new WeakSet,Id=async function(e,t){l(this,Tt)||y(this,Tt,new Map);let i=l(this,Tt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,Wa)}_${Ot(this,yc)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await bp(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=qy._isSVGFittingCanvas,o=new FileReader,a=new Image,u=new Promise((c,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await u}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,Tt).set(e,i),i&&l(this,Tt).set(i.id,i),i};let vm=qy;var lt,Bs,wc,ut;class LR{constructor(e=128){_(this,lt,[]);_(this,Bs,!1);_(this,wc);_(this,ut,-1);y(this,wc,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,Bs))return;const u={cmd:e,undo:t,post:i,type:r};if(l(this,ut)===-1){l(this,lt).length>0&&(l(this,lt).length=0),y(this,ut,0),l(this,lt).push(u);return}if(o&&l(this,lt)[l(this,ut)].type===r){a&&(u.undo=l(this,lt)[l(this,ut)].undo),l(this,lt)[l(this,ut)]=u;return}const c=l(this,ut)+1;c===l(this,wc)?l(this,lt).splice(0,1):(y(this,ut,c),c<l(this,lt).length&&l(this,lt).splice(c)),l(this,lt).push(u)}undo(){if(l(this,ut)===-1)return;y(this,Bs,!0);const{undo:e,post:t}=l(this,lt)[l(this,ut)];e(),t==null||t(),y(this,Bs,!1),y(this,ut,l(this,ut)-1)}redo(){if(l(this,ut)<l(this,lt).length-1){y(this,ut,l(this,ut)+1),y(this,Bs,!0);const{cmd:e,post:t}=l(this,lt)[l(this,ut)];e(),t==null||t(),y(this,Bs,!1)}}hasSomethingToUndo(){return l(this,ut)!==-1}hasSomethingToRedo(){return l(this,ut)<l(this,lt).length-1}destroy(){y(this,lt,null)}}lt=new WeakMap,Bs=new WeakMap,wc=new WeakMap,ut=new WeakMap;var Hf,K_;class jh{constructor(e){_(this,Hf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Wt.platform;for(const[i,s,r={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(A(this,Hf,K_).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(s.bind(e,...o,t)(),r||(t.stopPropagation(),t.preventDefault()))}}Hf=new WeakSet,K_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const zf=class zf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return kR(e),ue(this,"_colors",e)}convert(e){const t=By(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return zf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?U.makeHexColor(...t):e}};Y(zf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ym=zf;var Ga,un,Ze,mt,Xa,Gi,Ya,Yn,Us,qa,Qr,mi,qn,Jr,Ac,Ec,Ka,_c,vi,$s,Qa,Ws,yi,Bf,Vs,Sc,Gs,Zr,bc,xc,ct,me,Xi,eo,Cc,kc,Xs,wi,Yi,Tc,kn,O,Fd,wm,Q_,J_,Dd,Z_,eS,tS,Am,nS,Em,_m,iS,jt,Is,sS,rS,Sm,oS,Eu,bm;const Ma=class Ma{constructor(e,t,i,s,r,o,a,u,c,h,d){_(this,O);_(this,Ga,new AbortController);_(this,un,null);_(this,Ze,new Map);_(this,mt,new Map);_(this,Xa,null);_(this,Gi,null);_(this,Ya,null);_(this,Yn,new LR);_(this,Us,null);_(this,qa,0);_(this,Qr,new Set);_(this,mi,null);_(this,qn,null);_(this,Jr,new Set);_(this,Ac,!1);_(this,Ec,!1);_(this,Ka,!1);_(this,_c,null);_(this,vi,null);_(this,$s,null);_(this,Qa,null);_(this,Ws,!1);_(this,yi,null);_(this,Bf,new PR);_(this,Vs,!1);_(this,Sc,!1);_(this,Gs,null);_(this,Zr,null);_(this,bc,null);_(this,xc,null);_(this,ct,te.NONE);_(this,me,new Set);_(this,Xi,null);_(this,eo,null);_(this,Cc,null);_(this,kc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Xs,[0,0]);_(this,wi,null);_(this,Yi,null);_(this,Tc,null);_(this,kn,null);const f=this._signal=l(this,Ga).signal;y(this,Yi,e),y(this,Tc,t),y(this,Xa,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),A(this,O,Z_).call(this),A(this,O,iS).call(this),A(this,O,Am).call(this),y(this,Gi,r.annotationStorage),y(this,_c,r.filterFactory),y(this,eo,o),y(this,Qa,a||null),y(this,Ac,u),y(this,Ec,c),y(this,Ka,h),y(this,xc,d||null),this.viewParameters={realScale:Cr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Ma.prototype,t=o=>l(o,Yi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:u}=a;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ue(this,"_keyboardManager",new jh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Yi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Yi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s;(e=l(this,kn))==null||e.resolve(),y(this,kn,null),(t=l(this,Ga))==null||t.abort(),y(this,Ga,null),this._signal=null;for(const r of l(this,mt).values())r.destroy();l(this,mt).clear(),l(this,Ze).clear(),l(this,Jr).clear(),y(this,un,null),l(this,me).clear(),l(this,Yn).destroy(),(i=l(this,Xa))==null||i.destroy(),(s=l(this,yi))==null||s.hide(),y(this,yi,null),l(this,vi)&&(clearTimeout(l(this,vi)),y(this,vi,null)),l(this,wi)&&(clearTimeout(l(this,wi)),y(this,wi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,xc)}get useNewAltTextFlow(){return l(this,Ec)}get useNewAltTextWhenAddingImage(){return l(this,Ka)}get hcmFilter(){return ue(this,"hcmFilter",l(this,eo)?l(this,_c).addHCMFilter(l(this,eo).foreground,l(this,eo).background):"none")}get direction(){return ue(this,"direction",getComputedStyle(l(this,Yi)).direction)}get highlightColors(){return ue(this,"highlightColors",l(this,Qa)?new Map(l(this,Qa).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ue(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){y(this,bc,e)}editAltText(e,t=!1){var i;(i=l(this,Xa))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":y(this,Ka,t);break}}onPageChanging({pageNumber:e}){y(this,qa,e-1)}focusMainContainer(){l(this,Yi).focus()}findParent(e,t){for(const i of l(this,mt).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return i}return null}disableUserSelect(e=!1){l(this,Tc).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Jr).add(e)}removeShouldRescale(e){l(this,Jr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Cr.PDF_TO_CSS_UNITS;for(const t of l(this,Jr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),c=A(this,O,Fd).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;t.empty();const d=A(this,O,wm).call(this,c),f=l(this,ct)===te.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(te.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Gi)&&!l(this,Gi).has(e.id)&&l(this,Gi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Ws)&&(y(this,Ws,!1),A(this,O,Dd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,me))if(t.div.contains(e)){y(this,Zr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Zr))return;const[e,t]=l(this,Zr);y(this,Zr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,O,Am).call(this),A(this,O,Em).call(this)}removeEditListeners(){A(this,O,nS).call(this),A(this,O,_m).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,qn))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,qn))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,un))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,me)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of l(this,qn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ie(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const u of i){const c=await s.deserialize(u);if(!c)return;r.push(c)}const o=()=>{for(const u of r)A(this,O,Sm).call(this,u);A(this,O,bm).call(this,r)},a=()=>{for(const u of r)u.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ie(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,ct)!==te.NONE&&!this.isEditorHandlingKeyboard&&Ma._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ws)&&(y(this,Ws,!1),A(this,O,Dd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,O,eS).call(this),A(this,O,Em).call(this),A(this,O,jt).call(this,{isEditing:l(this,ct)!==te.NONE,isEmpty:A(this,O,Eu).call(this),hasSomethingToUndo:l(this,Yn).hasSomethingToUndo(),hasSomethingToRedo:l(this,Yn).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,O,tS).call(this),A(this,O,_m).call(this),A(this,O,jt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,qn)){y(this,qn,e);for(const t of l(this,qn))A(this,O,Is).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Bf).id}get currentLayer(){return l(this,mt).get(l(this,qa))}getLayer(e){return l(this,mt).get(e)}get currentPageIndex(){return l(this,qa)}addLayer(e){l(this,mt).set(e.pageIndex,e),l(this,Vs)?e.enable():e.disable()}removeLayer(e){l(this,mt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,ct)!==e&&!(l(this,kn)&&(await l(this,kn).promise,!l(this,kn)))){if(y(this,kn,Promise.withResolvers()),y(this,ct,e),e===te.NONE){this.setEditingState(!1),A(this,O,rS).call(this),l(this,kn).resolve();return}this.setEditingState(!0),await A(this,O,sS).call(this),this.unselectAll();for(const s of l(this,mt).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,kn).resolve();return}for(const s of l(this,Ze).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,kn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,ct)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,qn)){switch(e){case q.CREATE:this.currentLayer.addNewEditor();return;case q.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,bc))==null||i.updateColor(t);break;case q.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Cc)||y(this,Cc,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,me))s.updateParams(e,t);for(const s of l(this,qn))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const o of l(this,Ze).values())o.editorType===e&&o.show(t);(((r=l(this,Cc))==null?void 0:r.get(q.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,O,Is).call(this,[[q.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Sc)!==e){y(this,Sc,e);for(const t of l(this,mt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Ze).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Ze).get(e)}addEditor(e){l(this,Ze).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,vi)&&clearTimeout(l(this,vi)),y(this,vi,setTimeout(()=>{this.focusMainContainer(),y(this,vi,null)},0))),l(this,Ze).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Qr).has(e.annotationElementId))&&((t=l(this,Gi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Qr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Qr).has(e)}removeDeletedAnnotationElement(e){l(this,Qr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,un)!==e&&(y(this,un,e),e&&A(this,O,Is).call(this,e.propertiesToUpdate))}updateUI(e){l(this,O,oS)===e&&A(this,O,Is).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,me).has(e)){l(this,me).delete(e),e.unselect(),A(this,O,jt).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,me).add(e),e.select(),A(this,O,Is).call(this,e.propertiesToUpdate),A(this,O,jt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,me))t!==e&&t.unselect();l(this,me).clear(),l(this,me).add(e),e.select(),A(this,O,Is).call(this,e.propertiesToUpdate),A(this,O,jt).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,me).has(e)}get firstSelectedEditor(){return l(this,me).values().next().value}unselect(e){e.unselect(),l(this,me).delete(e),A(this,O,jt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,me).size!==0}get isEnterHandled(){return l(this,me).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Yn).undo(),A(this,O,jt).call(this,{hasSomethingToUndo:l(this,Yn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,O,Eu).call(this)})}redo(){l(this,Yn).redo(),A(this,O,jt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Yn).hasSomethingToRedo(),isEmpty:A(this,O,Eu).call(this)})}addCommands(e){l(this,Yn).add(e),A(this,O,jt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,O,Eu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,me)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)A(this,O,Sm).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,un))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,un)||this.hasSelection}selectAll(){for(const e of l(this,me))e.commit();A(this,O,bm).call(this,l(this,Ze).values())}unselectAll(){if(!(l(this,un)&&(l(this,un).commitOrRemove(),l(this,ct)!==te.NONE))&&this.hasSelection){for(const e of l(this,me))e.unselect();l(this,me).clear(),A(this,O,jt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Xs)[0]+=e,l(this,Xs)[1]+=t;const[s,r]=l(this,Xs),o=[...l(this,me)],a=1e3;l(this,wi)&&clearTimeout(l(this,wi)),y(this,wi,setTimeout(()=>{y(this,wi,null),l(this,Xs)[0]=l(this,Xs)[1]=0,this.addCommands({cmd:()=>{for(const u of o)l(this,Ze).has(u.id)&&u.translateInPage(s,r)},undo:()=>{for(const u of o)l(this,Ze).has(u.id)&&u.translateInPage(-s,-r)},mustExec:!1})},a));for(const u of o)u.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,mi,new Map);for(const e of l(this,me))l(this,mi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,mi))return!1;this.disableUserSelect(!1);const e=l(this,mi);y(this,mi,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||(t=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(s,r,o,a)=>{if(l(this,Ze).has(s.id)){const u=l(this,mt).get(a);u?s._setParentAndPosition(u,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,mi))for(const i of l(this,mi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,me).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,un)===e}getActive(){return l(this,un)}getMode(){return l(this,ct)}get imageManager(){return ue(this,"imageManager",new vm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,h=t.rangeCount;c<h;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,h,d,f)=>({x:(h-s)/o,y:1-(c+d-i)/r,width:f/o,height:d/r});break;case"180":a=(c,h,d,f)=>({x:1-(c+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(c,h,d,f)=>({x:1-(h+f-s)/o,y:(c-i)/r,width:f/o,height:d/r});break;default:a=(c,h,d,f)=>({x:(c-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const u=[];for(let c=0,h=t.rangeCount;c<h;c++){const d=t.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:m,height:w}of d.getClientRects())m===0||w===0||u.push(a(f,p,m,w))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Ya)||y(this,Ya,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Ya))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,Ya))==null?void 0:s.get(e.data.id);if(!t)return;const i=l(this,Gi).getRawValue(t);i&&(l(this,ct)===te.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};Ga=new WeakMap,un=new WeakMap,Ze=new WeakMap,mt=new WeakMap,Xa=new WeakMap,Gi=new WeakMap,Ya=new WeakMap,Yn=new WeakMap,Us=new WeakMap,qa=new WeakMap,Qr=new WeakMap,mi=new WeakMap,qn=new WeakMap,Jr=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Ka=new WeakMap,_c=new WeakMap,vi=new WeakMap,$s=new WeakMap,Qa=new WeakMap,Ws=new WeakMap,yi=new WeakMap,Bf=new WeakMap,Vs=new WeakMap,Sc=new WeakMap,Gs=new WeakMap,Zr=new WeakMap,bc=new WeakMap,xc=new WeakMap,ct=new WeakMap,me=new WeakMap,Xi=new WeakMap,eo=new WeakMap,Cc=new WeakMap,kc=new WeakMap,Xs=new WeakMap,wi=new WeakMap,Yi=new WeakMap,Tc=new WeakMap,kn=new WeakMap,O=new WeakSet,Fd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},wm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,mt).values())if(i.hasTextLayer(e))return i;return null},Q_=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=A(this,O,Fd).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(l(this,yi)||y(this,yi,new TR(this)),l(this,yi).show(i,s,this.direction==="ltr"))},J_=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Xi)&&((r=l(this,yi))==null||r.hide(),y(this,Xi,null),A(this,O,jt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Xi))return;const s=A(this,O,Fd).call(this,e).closest(".textLayer");if(!s){l(this,Xi)&&((o=l(this,yi))==null||o.hide(),y(this,Xi,null),A(this,O,jt).call(this,{hasSelectedText:!1}));return}if((a=l(this,yi))==null||a.hide(),y(this,Xi,t),A(this,O,jt).call(this,{hasSelectedText:!0}),!(l(this,ct)!==te.HIGHLIGHT&&l(this,ct)!==te.NONE)&&(l(this,ct)===te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,Ws,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=l(this,ct)===te.HIGHLIGHT?A(this,O,wm).call(this,s):null;u==null||u.toggleDrawing();const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),u==null||u.toggleDrawing(!0),f.type==="pointerup"&&A(this,O,Dd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Dd=function(e=""){l(this,ct)===te.HIGHLIGHT?this.highlightSelection(e):l(this,Ac)&&A(this,O,Q_).call(this)},Z_=function(){document.addEventListener("selectionchange",A(this,O,J_).bind(this),{signal:this._signal})},eS=function(){if(l(this,$s))return;y(this,$s,new AbortController);const e=this.combinedSignal(l(this,$s));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},tS=function(){var e;(e=l(this,$s))==null||e.abort(),y(this,$s,null)},Am=function(){if(l(this,Gs))return;y(this,Gs,new AbortController);const e=this.combinedSignal(l(this,Gs));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},nS=function(){var e;(e=l(this,Gs))==null||e.abort(),y(this,Gs,null)},Em=function(){if(l(this,Us))return;y(this,Us,new AbortController);const e=this.combinedSignal(l(this,Us));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_m=function(){var e;(e=l(this,Us))==null||e.abort(),y(this,Us,null)},iS=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},jt=function(e){Object.entries(e).some(([i,s])=>l(this,kc)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,kc),e)}),l(this,ct)===te.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,O,Is).call(this,[[q.HIGHLIGHT_FREE,!0]]))},Is=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},sS=async function(){if(!l(this,Vs)){y(this,Vs,!0);const e=[];for(const t of l(this,mt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ze).values())t.enable()}},rS=function(){if(this.unselectAll(),l(this,Vs)){y(this,Vs,!1);for(const e of l(this,mt).values())e.disable();for(const e of l(this,Ze).values())e.disable()}},Sm=function(e){const t=l(this,mt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},oS=function(){let e=null;for(e of l(this,me));return e},Eu=function(){if(l(this,Ze).size===0)return!0;if(l(this,Ze).size===1)for(const e of l(this,Ze).values())return e.isEmpty();return!1},bm=function(e){for(const t of l(this,me))t.unselect();l(this,me).clear();for(const t of e)t.isEmpty()||(l(this,me).add(t),t.select());A(this,O,jt).call(this,{hasSelectedEditor:this.hasSelection})},Y(Ma,"TRANSLATE_SMALL",1),Y(Ma,"TRANSLATE_BIG",10);let Jo=Ma;var ht,Ai,Kn,Ja,Ei,cn,Za,_i,Qt,qi,to,Si,Ys,li,_u,Nd;const Ht=class Ht{constructor(e){_(this,li);_(this,ht,null);_(this,Ai,!1);_(this,Kn,null);_(this,Ja,null);_(this,Ei,null);_(this,cn,null);_(this,Za,!1);_(this,_i,null);_(this,Qt,null);_(this,qi,null);_(this,to,null);_(this,Si,!1);y(this,Qt,e),y(this,Si,e._uiManager.useNewAltTextFlow),l(Ht,Ys)||y(Ht,Ys,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ht._l10n??(Ht._l10n=e)}async render(){const e=y(this,Kn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=y(this,Ja,document.createElement("span"));e.append(t),l(this,Si)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Ht,Ys).missing),t.setAttribute("data-l10n-id",l(Ht,Ys)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,Qt)._uiManager._signal;e.addEventListener("contextmenu",Bn,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),l(this,Qt)._uiManager.editAltText(l(this,Qt)),l(this,Si)&&l(this,Qt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,li,_u)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(y(this,Za,!0),s(r))},{signal:i}),await A(this,li,Nd).call(this),e}finish(){l(this,Kn)&&(l(this,Kn).focus({focusVisible:l(this,Za)}),y(this,Za,!1))}isEmpty(){return l(this,Si)?l(this,ht)===null:!l(this,ht)&&!l(this,Ai)}hasData(){return l(this,Si)?l(this,ht)!==null||!!l(this,qi):this.isEmpty()}get guessedText(){return l(this,qi)}async setGuessedText(e){l(this,ht)===null&&(y(this,qi,e),y(this,to,await Ht._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,li,Nd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Si)||l(this,ht)){(t=l(this,_i))==null||t.remove(),y(this,_i,null);return}if(!l(this,_i)){const i=y(this,_i,document.createElement("div"));i.className="noAltTextBadge",l(this,Qt).div.append(i)}l(this,_i).classList.toggle("hidden",!e)}serialize(e){let t=l(this,ht);return!e&&l(this,qi)===t&&(t=l(this,to)),{altText:t,decorative:l(this,Ai),guessedText:l(this,qi),textWithDisclaimer:l(this,to)}}get data(){return{altText:l(this,ht),decorative:l(this,Ai)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(y(this,qi,i),y(this,to,s)),!(l(this,ht)===e&&l(this,Ai)===t)&&(r||(y(this,ht,e),y(this,Ai,t)),A(this,li,Nd).call(this))}toggle(e=!1){l(this,Kn)&&(!e&&l(this,cn)&&(clearTimeout(l(this,cn)),y(this,cn,null)),l(this,Kn).disabled=!e)}shown(){l(this,Qt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,li,_u)}})}destroy(){var e,t;(e=l(this,Kn))==null||e.remove(),y(this,Kn,null),y(this,Ja,null),y(this,Ei,null),(t=l(this,_i))==null||t.remove(),y(this,_i,null)}};ht=new WeakMap,Ai=new WeakMap,Kn=new WeakMap,Ja=new WeakMap,Ei=new WeakMap,cn=new WeakMap,Za=new WeakMap,_i=new WeakMap,Qt=new WeakMap,qi=new WeakMap,to=new WeakMap,Si=new WeakMap,Ys=new WeakMap,li=new WeakSet,_u=function(){return l(this,ht)&&"added"||l(this,ht)===null&&this.guessedText&&"review"||"missing"},Nd=async function(){var s,r,o;const e=l(this,Kn);if(!e)return;if(l(this,Si)){if(e.classList.toggle("done",!!l(this,ht)),e.setAttribute("data-l10n-id",l(Ht,Ys)[l(this,li,_u)]),(s=l(this,Ja))==null||s.setAttribute("data-l10n-id",l(Ht,Ys)[`${l(this,li,_u)}-label`]),!l(this,ht)){(r=l(this,Ei))==null||r.remove();return}}else{if(!l(this,ht)&&!l(this,Ai)){e.classList.remove("done"),(o=l(this,Ei))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Ei);if(!t){y(this,Ei,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Qt).id}`;const a=100,u=l(this,Qt)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(l(this,cn)),y(this,cn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{y(this,cn,setTimeout(()=>{y(this,cn,null),l(this,Ei).classList.add("show"),l(this,Qt)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:u}),e.addEventListener("mouseleave",()=>{var c;l(this,cn)&&(clearTimeout(l(this,cn)),y(this,cn,null)),(c=l(this,Ei))==null||c.classList.remove("show")},{signal:u})}l(this,Ai)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,ht)),t.parentNode||e.append(t);const i=l(this,Qt).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},_(Ht,Ys,null),Y(Ht,"_l10n",null);let If=Ht;var no,Qn,Ie,el,io,vt,so,qs,Rc,ro,Ks,Pc,oo,Ki,bi,tl,nl,Tn,Lc,Uf,ne,xm,Mc,Cm,km,aS,lS,Tm,Rm,Pm,uS,Lm,cS,hS,dS,Mm,Su;const pe=class pe{constructor(e){_(this,ne);_(this,no,null);_(this,Qn,null);_(this,Ie,null);_(this,el,!1);_(this,io,!1);_(this,vt,null);_(this,so,null);_(this,qs,null);_(this,Rc,"");_(this,ro,!1);_(this,Ks,null);_(this,Pc,!1);_(this,oo,!1);_(this,Ki,!1);_(this,bi,null);_(this,tl,0);_(this,nl,0);_(this,Tn,null);Y(this,"_editToolbar",null);Y(this,"_initialOptions",Object.create(null));Y(this,"_initialData",null);Y(this,"_isVisible",!0);Y(this,"_uiManager",null);Y(this,"_focusEventsAllowed",!0);_(this,Lc,!1);_(this,Uf,pe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=pe.prototype._resizeWithKeyboard,t=Jo.TRANSLATE_SMALL,i=Jo.TRANSLATE_BIG;return ue(this,"_resizerKeyboardManager",new jh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],pe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ue(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new MR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(pe._l10n??(pe._l10n=e),pe._l10nResizer||(pe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),pe._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);pe._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ke("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Lc)}set _isDraggable(e){var t;y(this,Lc,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Uf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,ne,Su).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,ro)?y(this,ro,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){A(this,ne,xm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ks)||y(this,Ks,[this.x,this.y]),A(this,ne,xm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Ks)||y(this,Ks,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,u]=this.getBaseTranslation();r+=a,o+=u,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Ks)&&(l(this,Ks)[0]!==this.x||l(this,Ks)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=pe,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:r,width:o,height:a}=this;if(o*=t,a*=i,s*=t,r*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),r=Math.max(0,Math.min(i-a,r));break;case 90:s=Math.max(0,Math.min(t-a,s)),r=Math.min(i,Math.max(o,r));break;case 180:s=Math.min(t,Math.max(o,s)),r=Math.min(i,Math.max(a,r));break;case 270:s=Math.min(t,Math.max(a,s)),r=Math.max(0,Math.min(i-o,r));break}this.x=s/=t,this.y=r/=i;const[u,c]=this.getBaseTranslation();s+=u,r+=c;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return A(i=pe,Mc,Cm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return A(i=pe,Mc,Cm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,io)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!l(this,io)&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!l(this,io)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Ie))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,oo)?this._editToolbar:(this._editToolbar=new gm(this),this.div.append(this._editToolbar.render()),l(this,Ie)&&await this._editToolbar.addAltText(l(this,Ie)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Ie))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ie)||(If.initialize(pe._l10n),y(this,Ie,new If(this)),l(this,no)&&(l(this,Ie).data=l(this,no),y(this,no,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Ie))==null?void 0:e.data}set altTextData(e){l(this,Ie)&&(l(this,Ie).data=e)}get guessedAltText(){var e;return(e=l(this,Ie))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Ie))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Ie))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Ie)&&!l(this,Ie).isEmpty()}hasAltTextData(){var e;return((e=l(this,Ie))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,el)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),A(this,ne,Lm).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Mf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(y(this,ro,!0),this._isDraggable){A(this,ne,uS).call(this,e);return}A(this,ne,Pm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,bi)&&clearTimeout(l(this,bi)),y(this,bi,setTimeout(()=>{var e;y(this,bi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,u]=this.pageTranslation,c=e/s,h=t/s,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(i){case 0:return[d+c+a,o-f-h-m+u,d+c+p+a,o-f-h+u];case 90:return[d+h+a,o-f+c+u,d+h+m+a,o-f+c+p+u];case 180:return[d-c-p+a,o-f+h+u,d-c+a,o-f+h+m+u];case 270:return[d-h-m+a,o-f-c-p+u,d-h+a,o-f-c+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,a=r-i,u=o-s;switch(this.rotation){case 0:return[i,t-o,a,u];case 90:return[i,t-s,u,a];case 180:return[r,t-s,a,u];case 270:return[r,t-o,u,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){y(this,oo,!0)}disableEditMode(){y(this,oo,!1)}isInEditMode(){return l(this,oo)}shouldGetKeyboardEvents(){return l(this,Ki)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){A(this,ne,Lm).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ke("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,y(s,no,e.accessibilityData);const[r,o]=s.pageDimensions,[a,u,c,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=u/o,s.width=c/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,qs))==null||e.abort(),y(this,qs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,bi)&&(clearTimeout(l(this,bi)),y(this,bi,null)),A(this,ne,Su).call(this),this.removeEditToolbar(),l(this,Tn)){for(const t of l(this,Tn).values())clearTimeout(t);y(this,Tn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,ne,aS).call(this),l(this,vt).classList.remove("hidden"),Mf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),y(this,so,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,vt).children;if(!l(this,Qn)){y(this,Qn,Array.from(t));const o=A(this,ne,cS).bind(this),a=A(this,ne,hS).bind(this),u=this._uiManager._signal;for(const c of l(this,Qn)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:u}),c.addEventListener("blur",a,{signal:u}),c.addEventListener("focus",A(this,ne,dS).bind(this,h),{signal:u}),c.setAttribute("data-l10n-id",pe._l10nResizer[h])}}const i=l(this,Qn)[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Qn).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)l(this,vt).append(l(this,vt).firstChild);else if(r>s)for(let a=0;a<r-s;a++)l(this,vt).firstChild.before(l(this,vt).lastChild);let o=0;for(const a of t){const c=l(this,Qn)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",pe._l10nResizer[c])}}A(this,ne,Mm).call(this,0),y(this,Ki,!0),l(this,vt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ki)&&A(this,ne,Rm).call(this,l(this,Rc),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){A(this,ne,Su).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,Ie))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,r;(e=l(this,vt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=l(this,Ie))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Pc)}set isEditing(e){y(this,Pc,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){y(this,io,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Tn)||y(this,Tn,new Map);const{action:i}=e;let s=l(this,Tn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,Tn).delete(i),l(this,Tn).size===0&&y(this,Tn,null)},pe._telemetryTimeout),l(this,Tn).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y(this,el,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,el,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};no=new WeakMap,Qn=new WeakMap,Ie=new WeakMap,el=new WeakMap,io=new WeakMap,vt=new WeakMap,so=new WeakMap,qs=new WeakMap,Rc=new WeakMap,ro=new WeakMap,Ks=new WeakMap,Pc=new WeakMap,oo=new WeakMap,Ki=new WeakMap,bi=new WeakMap,tl=new WeakMap,nl=new WeakMap,Tn=new WeakMap,Lc=new WeakMap,Uf=new WeakMap,ne=new WeakSet,xm=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},Mc=new WeakSet,Cm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},km=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},aS=function(){if(l(this,vt))return;y(this,vt,document.createElement("div")),l(this,vt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");l(this,vt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",A(this,ne,lS).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Bn,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,vt))},lS=function(e,t){var m;t.preventDefault();const{isMac:i}=Wt.platform;if(t.button!==0||t.ctrlKey&&i)return;(m=l(this,Ie))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,ne,Rm).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Bn,{signal:o});const a=this.x,u=this.y,c=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var w;r.abort(),this.parent.togglePointerEvents(!0),(w=l(this,Ie))==null||w.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,A(this,ne,Tm).call(this,a,u,c,h)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},Tm=function(e,t,i,s){const r=this.x,o=this.y,a=this.width,u=this.height;r===e&&o===t&&a===i&&u===s||this.addCommands({cmd:()=>{this.width=a,this.height=u,this.x=r,this.y=o;const[c,h]=this.parentDimensions;this.setDims(c*a,h*u),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[c,h]=this.parentDimensions;this.setDims(c*i,h*s),this.fixAndSetPosition()},mustExec:!0})},Rm=function(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,u=this.height,c=pe.MIN_SIZE/i,h=pe.MIN_SIZE/s,d=H=>Math.round(H*1e4)/1e4,f=A(this,ne,km).call(this,this.rotation),p=(H,L)=>[f[0]*H+f[2]*L,f[1]*H+f[3]*L],m=A(this,ne,km).call(this,360-this.rotation),w=(H,L)=>[m[0]*H+m[2]*L,m[1]*H+m[3]*L];let S,g,v=!1,E=!1;switch(e){case"topLeft":v=!0,S=(H,L)=>[0,0],g=(H,L)=>[H,L];break;case"topMiddle":S=(H,L)=>[H/2,0],g=(H,L)=>[H/2,L];break;case"topRight":v=!0,S=(H,L)=>[H,0],g=(H,L)=>[0,L];break;case"middleRight":E=!0,S=(H,L)=>[H,L/2],g=(H,L)=>[0,L/2];break;case"bottomRight":v=!0,S=(H,L)=>[H,L],g=(H,L)=>[0,0];break;case"bottomMiddle":S=(H,L)=>[H/2,L],g=(H,L)=>[H/2,0];break;case"bottomLeft":v=!0,S=(H,L)=>[0,L],g=(H,L)=>[H,0];break;case"middleLeft":E=!0,S=(H,L)=>[0,L/2],g=(H,L)=>[H,L/2];break}const b=S(a,u),x=g(a,u);let k=p(...x);const T=d(r+k[0]),R=d(o+k[1]);let M=1,I=1,[D,Q]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,Q]=w(D/i,Q/s),v){const H=Math.hypot(a,u);M=I=Math.max(Math.min(Math.hypot(x[0]-b[0]-D,x[1]-b[1]-Q)/H,1/a,1/u),c/a,h/u)}else E?M=Math.max(c,Math.min(1,Math.abs(x[0]-b[0]-D)))/a:I=Math.max(h,Math.min(1,Math.abs(x[1]-b[1]-Q)))/u;const G=d(a*M),V=d(u*I);k=p(...g(G,V));const J=T-k[0],X=R-k[1];this.width=G,this.height=V,this.x=J,this.y=X,this.setDims(i*G,s*V),this.fixAndSetPosition()},Pm=function(e){const{isMac:t}=Wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},uS=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),y(this,tl,e.clientX),y(this,nl,e.clientY);const o=a=>{const{clientX:u,clientY:c}=a,[h,d]=this.screenToPageTranslation(u-l(this,tl),c-l(this,nl));y(this,tl,u),y(this,nl,c),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:s})}const r=()=>{i.abort(),t&&this.div.classList.remove("moving"),y(this,ro,!1),this._uiManager.endDragSession()||A(this,ne,Pm).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},Lm=function(){if(l(this,qs)||!this.div)return;y(this,qs,new AbortController);const e=this._uiManager.combinedSignal(l(this,qs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},cS=function(e){pe._resizerKeyboardManager.exec(this,e)},hS=function(e){var t;l(this,Ki)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,vt)&&A(this,ne,Su).call(this)},dS=function(e){y(this,Rc,l(this,Ki)?e:"")},Mm=function(e){if(l(this,Qn))for(const t of l(this,Qn))t.tabIndex=e},Su=function(){if(y(this,Ki,!1),A(this,ne,Mm).call(this,-1),l(this,so)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=l(this,so);A(this,ne,Tm).call(this,e,t,i,s),y(this,so,null)}},_(pe,Mc),Y(pe,"_l10n",null),Y(pe,"_l10nResizer",null),Y(pe,"_borderLineWidth",-1),Y(pe,"_colorManager",new ym),Y(pe,"_zIndex",1),Y(pe,"_telemetryTimeout",1e3);let ye=pe;class MR extends ye{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Rw=3285377520,Cn=4294901760,pi=65535;class fS{constructor(e){this.h1=e?e&4294967295:Rw,this.h2=e?e&4294967295:Rw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,S=e.length;w<S;w++){const g=e.charCodeAt(w);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,u=0,c=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&pi,m=f&pi;for(let w=0;w<s;w++)w&1?(a=o[w],a=a*d&Cn|a*p&pi,a=a<<15|a>>>17,a=a*f&Cn|a*m&pi,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(u=o[w],u=u*d&Cn|u*p&pi,u=u<<15|u>>>17,u=u*f&Cn|u*m&pi,h^=u,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*d&Cn|a*p&pi,a=a<<15|a>>>17,a=a*f&Cn|a*m&pi,s&1?c^=a:h^=a}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Cn|e*36045&pi,t=t*4283543511&Cn|((t<<16|e>>>16)*2950163797&Cn)>>>16,e^=t>>>1,e=e*444984403&Cn|e*60499&pi,t=t*3301882366&Cn|((t<<16|e>>>16)*3120437893&Cn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Im=Object.freeze({map:null,hash:"",transfer:void 0});var ao,lo,dt,$f,pS;class Uy{constructor(){_(this,$f);_(this,ao,!1);_(this,lo,null);_(this,dt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,dt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,dt).get(e)}remove(e){if(l(this,dt).delete(e),l(this,dt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,dt).values())if(t instanceof ye)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,dt).get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,l(this,dt).set(e,t);s&&A(this,$f,pS).call(this),t instanceof ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,dt).has(e)}getAll(){return l(this,dt).size>0?Ny(l(this,dt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,dt).size}resetModified(){l(this,ao)&&(y(this,ao,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new gS(this)}get serializable(){if(l(this,dt).size===0)return Im;const e=new Map,t=new fS,i=[],s=Object.create(null);let r=!1;for(const[o,a]of l(this,dt)){const u=a instanceof ye?a.serialize(!1,s):a;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),r||(r=!!u.bitmap))}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Im}get editorStats(){let e=null;const t=new Map;for(const i of l(this,dt).values()){if(!(i instanceof ye))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,u]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const h=c.get(u)??0;c.set(u,h+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){y(this,lo,null)}get modifiedIds(){if(l(this,lo))return l(this,lo);const e=[];for(const t of l(this,dt).values())!(t instanceof ye)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return y(this,lo,{ids:new Set(e),hash:e.join(",")})}}ao=new WeakMap,lo=new WeakMap,dt=new WeakMap,$f=new WeakSet,pS=function(){l(this,ao)||(y(this,ao,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ic;class gS extends Uy{constructor(t){super();_(this,Ic);const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);y(this,Ic,{map:o,hash:s,transfer:r})}get print(){ke("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Ic)}get modifiedIds(){return ue(this,"modifiedIds",{ids:new Set,hash:""})}}Ic=new WeakMap;var il;class IR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){_(this,il,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,il).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,il).has(e.loadedName))){if(it(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),l(this,il).add(i),t==null||t(e)}catch{ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ke("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ie(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ue(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ft||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ue(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(it(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ue(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(b,x){return b.charCodeAt(x)<<24|b.charCodeAt(x+1)<<16|b.charCodeAt(x+2)<<8|b.charCodeAt(x+3)&255}function s(b,x,k,T){const R=b.substring(0,x),M=b.substring(x+k);return R+T+M}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const u=a.getContext("2d");let c=0;function h(b,x){if(++c>30){ie("Load test font never loaded."),x();return}if(u.font="30px "+b,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(h.bind(null,b,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,w=1482184792;let S=i(f,m);for(r=0,o=d.length-3;r<o;r+=4)S=S-w+i(d,r)|0;r<d.length&&(S=S-w+i(d+"XXX",r)|0),f=s(f,m,4,vR(S));const g=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(v);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const b of[e.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=b,E.append(x)}this._document.body.append(E),h(d,()=>{E.remove(),t.complete()})}}il=new WeakMap;class FR{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${SR(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){ie(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,o){};const s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case Hi.BEZIER_CURVE_TO:{const[a,u,c,h,d,f]=i.slice(r,r+6);s.push(p=>p.bezierCurveTo(a,u,c,h,d,f)),r+=6}break;case Hi.MOVE_TO:{const[a,u]=i.slice(r,r+2);s.push(c=>c.moveTo(a,u)),r+=2}break;case Hi.LINE_TO:{const[a,u]=i.slice(r,r+2);s.push(c=>c.lineTo(a,u)),r+=2}break;case Hi.QUADRATIC_CURVE_TO:{const[a,u,c,h]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(a,u,c,h)),r+=4}break;case Hi.RESTORE:s.push(a=>a.restore());break;case Hi.SAVE:s.push(a=>a.save());break;case Hi.SCALE:it(s.length===2,"Scale command is only valid at the third position.");break;case Hi.TRANSFORM:{const[a,u,c,h,d,f]=i.slice(r,r+6);s.push(p=>p.transform(a,u,c,h,d,f)),r+=6}break;case Hi.TRANSLATE:{const[a,u]=i.slice(r,r+2);s.push(c=>c.translate(a,u)),r+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let u=2,c=s.length;u<c;u++)s[u](o)}}}var Fc;class mS{constructor({enableHWA:e=!1}){_(this,Fc,!1);y(this,Fc,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,Fc)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ke("Abstract method `_createCanvas` called.")}}Fc=new WeakMap;class DR extends mS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class vS{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ke("Abstract method `_fetch` called.")}}class yS extends vS{async _fetch(e){const t=await bp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Sp(t)}}class wS{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var uo,co,xi,Qi,Rt,Wf,ho,j,kt,da,fa,Od,pa,AS,Fm,ga,bu,xu,Dm,Cu;class NR extends wS{constructor({docId:t,ownerDocument:i=globalThis.document}){super();_(this,j);_(this,uo);_(this,co);_(this,xi);_(this,Qi);_(this,Rt);_(this,Wf);_(this,ho,0);y(this,Qi,t),y(this,Rt,i)}addFilter(t){if(!t)return"none";let i=l(this,j,kt).get(t);if(i)return i;const[s,r,o]=A(this,j,Od).call(this,t),a=t.length===1?s:`${s}${r}${o}`;if(i=l(this,j,kt).get(a),i)return l(this,j,kt).set(t,i),i;const u=`g_${l(this,Qi)}_transfer_map_${Ot(this,ho)._++}`,c=A(this,j,pa).call(this,u);l(this,j,kt).set(t,c),l(this,j,kt).set(a,c);const h=A(this,j,ga).call(this,u);return A(this,j,xu).call(this,s,r,o,h),c}addHCMFilter(t,i){var m;const s=`${t}-${i}`,r="base";let o=l(this,j,da).get(r);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,j,da).set(r,o)),!t||!i))return o.url;const a=A(this,j,Cu).call(this,t);t=U.makeHexColor(...a);const u=A(this,j,Cu).call(this,i);if(i=U.makeHexColor(...u),l(this,j,fa).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const c=new Array(256);for(let w=0;w<=255;w++){const S=w/255;c[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=c.join(","),d=`g_${l(this,Qi)}_hcm_filter`,f=o.filter=A(this,j,ga).call(this,d);A(this,j,xu).call(this,h,h,h,f),A(this,j,Fm).call(this,f);const p=(w,S)=>{const g=a[w]/255,v=u[w]/255,E=new Array(S+1);for(let b=0;b<=S;b++)E[b]=g+b/S*(v-g);return E.join(",")};return A(this,j,xu).call(this,p(0,5),p(1,5),p(2,5),f),o.url=A(this,j,pa).call(this,d),o.url}addAlphaFilter(t){let i=l(this,j,kt).get(t);if(i)return i;const[s]=A(this,j,Od).call(this,[t]),r=`alpha_${s}`;if(i=l(this,j,kt).get(r),i)return l(this,j,kt).set(t,i),i;const o=`g_${l(this,Qi)}_alpha_map_${Ot(this,ho)._++}`,a=A(this,j,pa).call(this,o);l(this,j,kt).set(t,a),l(this,j,kt).set(r,a);const u=A(this,j,ga).call(this,o);return A(this,j,Dm).call(this,s,u),a}addLuminosityFilter(t){let i=l(this,j,kt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=A(this,j,Od).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=l(this,j,kt).get(r),i)return l(this,j,kt).set(t,i),i;const o=`g_${l(this,Qi)}_luminosity_map_${Ot(this,ho)._++}`,a=A(this,j,pa).call(this,o);l(this,j,kt).set(t,a),l(this,j,kt).set(r,a);const u=A(this,j,ga).call(this,o);return A(this,j,AS).call(this,u),t&&A(this,j,Dm).call(this,s,u),a}addHighlightHCMFilter(t,i,s,r,o){var v;const a=`${i}-${s}-${r}-${o}`;let u=l(this,j,da).get(t);if((u==null?void 0:u.key)===a||(u?((v=u.filter)==null||v.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},l(this,j,da).set(t,u)),!i||!s))return u.url;const[c,h]=[i,s].map(A(this,j,Cu).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(A(this,j,Cu).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,j,fa).style.color="";const w=(E,b,x)=>{const k=new Array(256),T=(f-d)/x,R=E/255,M=(b-E)/(255*x);let I=0;for(let D=0;D<=x;D++){const Q=Math.round(d+D*T),G=R+D*M;for(let V=I;V<=Q;V++)k[V]=G;I=Q+1}for(let D=I;D<256;D++)k[D]=k[I-1];return k.join(",")},S=`g_${l(this,Qi)}_hcm_${t}_filter`,g=u.filter=A(this,j,ga).call(this,S);return A(this,j,Fm).call(this,g),A(this,j,xu).call(this,w(p[0],m[0],5),w(p[1],m[1],5),w(p[2],m[2],5),g),u.url=A(this,j,pa).call(this,S),u.url}destroy(t=!1){t&&l(this,j,da).size!==0||(l(this,xi)&&(l(this,xi).parentNode.parentNode.remove(),y(this,xi,null)),l(this,co)&&(l(this,co).clear(),y(this,co,null)),y(this,ho,0))}}uo=new WeakMap,co=new WeakMap,xi=new WeakMap,Qi=new WeakMap,Rt=new WeakMap,Wf=new WeakMap,ho=new WeakMap,j=new WeakSet,kt=function(){return l(this,co)||y(this,co,new Map)},da=function(){return l(this,Wf)||y(this,Wf,new Map)},fa=function(){if(!l(this,xi)){const t=l(this,Rt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=l(this,Rt).createElementNS(Bi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),y(this,xi,l(this,Rt).createElementNS(Bi,"defs")),t.append(s),s.append(l(this,xi)),l(this,Rt).body.append(t)}return l(this,xi)},Od=function(t){if(t.length===1){const c=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=c[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,o=new Array(256),a=new Array(256),u=new Array(256);for(let c=0;c<256;c++)o[c]=i[c]/255,a[c]=s[c]/255,u[c]=r[c]/255;return[o.join(","),a.join(","),u.join(",")]},pa=function(t){if(l(this,uo)===void 0){y(this,uo,"");const i=l(this,Rt).URL;i!==l(this,Rt).baseURI&&(xp(i)?ie('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,uo,i.split("#",1)[0]))}return`url(${l(this,uo)}#${t})`},AS=function(t){const i=l(this,Rt).createElementNS(Bi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Fm=function(t){const i=l(this,Rt).createElementNS(Bi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},ga=function(t){const i=l(this,Rt).createElementNS(Bi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,j,fa).append(i),i},bu=function(t,i,s){const r=l(this,Rt).createElementNS(Bi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},xu=function(t,i,s,r){const o=l(this,Rt).createElementNS(Bi,"feComponentTransfer");r.append(o),A(this,j,bu).call(this,o,"feFuncR",t),A(this,j,bu).call(this,o,"feFuncG",i),A(this,j,bu).call(this,o,"feFuncB",s)},Dm=function(t,i){const s=l(this,Rt).createElementNS(Bi,"feComponentTransfer");i.append(s),A(this,j,bu).call(this,s,"feFuncA",t)},Cu=function(t){return l(this,j,fa).style.color=t,By(getComputedStyle(l(this,j,fa)).getPropertyValue("color"))};class ES{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ke("Abstract method `_fetch` called.")}}class _S extends ES{async _fetch(e){const t=await bp(e,"arraybuffer");return new Uint8Array(t)}}if(Ft){var Nm=Promise.withResolvers(),Xu=null;(async()=>{const e=await ld(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await ld(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await ld(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await ld(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,o;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:r,path2d:o}))})().then(e=>{Xu=e,Nm.resolve()},e=>{ie(`loadPackages: ${e}`),Xu=new Map,Nm.resolve()})}class kr{static get promise(){return Nm.promise}static get(e){return Xu==null?void 0:Xu.get(e)}}async function SS(n){const t=await kr.get("fs").promises.readFile(n);return new Uint8Array(t)}class OR extends wS{}class jR extends mS{_createCanvas(e,t){return kr.get("canvas").createCanvas(e,t)}}class HR extends vS{async _fetch(e){return SS(e)}}class zR extends ES{async _fetch(e){return SS(e)}}const Ut={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Om(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class $y{getPattern(){ke("Abstract method `getPattern` called.")}}class BR extends $y{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Ut.STROKE||s===Ut.FILL){const o=t.current.getClippedPathBoundingBox(s,De(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,u),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=U.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Om(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else Om(e,this._bbox),r=this._createGradient(e);return r}}function dg(n,e,t,i,s,r,o,a){const u=e.coords,c=e.colors,h=n.data,d=n.width*4;let f;u[t+1]>u[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f),u[i+1]>u[s+1]&&(f=i,i=s,s=f,f=o,o=a,a=f),u[t+1]>u[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f);const p=(u[t]+e.offsetX)*e.scaleX,m=(u[t+1]+e.offsetY)*e.scaleY,w=(u[i]+e.offsetX)*e.scaleX,S=(u[i+1]+e.offsetY)*e.scaleY,g=(u[s]+e.offsetX)*e.scaleX,v=(u[s+1]+e.offsetY)*e.scaleY;if(m>=v)return;const E=c[r],b=c[r+1],x=c[r+2],k=c[o],T=c[o+1],R=c[o+2],M=c[a],I=c[a+1],D=c[a+2],Q=Math.round(m),G=Math.round(v);let V,J,X,H,L,B,$,se;for(let ee=Q;ee<=G;ee++){if(ee<S){const le=ee<m?0:(m-ee)/(m-S);V=p-(p-w)*le,J=E-(E-k)*le,X=b-(b-T)*le,H=x-(x-R)*le}else{let le;ee>v?le=1:S===v?le=0:le=(S-ee)/(S-v),V=w-(w-g)*le,J=k-(k-M)*le,X=T-(T-I)*le,H=R-(R-D)*le}let fe;ee<m?fe=0:ee>v?fe=1:fe=(m-ee)/(m-v),L=p-(p-g)*fe,B=E-(E-M)*fe,$=b-(b-I)*fe,se=x-(x-D)*fe;const ze=Math.round(Math.min(V,L)),Nt=Math.round(Math.max(V,L));let ge=d*ee+ze*4;for(let le=ze;le<=Nt;le++)fe=(V-le)/(V-L),fe<0?fe=0:fe>1&&(fe=1),h[ge++]=J-(J-B)*fe|0,h[ge++]=X-(X-$)*fe|0,h[ge++]=H-(H-se)*fe|0,h[ge++]=255}}function UR(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,u=Math.floor(i.length/a)-1,c=a-1;for(r=0;r<u;r++){let h=r*a;for(let d=0;d<c;d++,h++)dg(n,t,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),dg(n,t,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)dg(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class $R extends $y{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-u,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=c/d,m=h/f,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/p,scaleY:1/m},S=d+2*2,g=f+2*2,v=i.getCanvas("mesh",S,g),E=v.context,b=E.createImageData(d,f);if(t){const k=b.data;for(let T=0,R=k.length;T<R;T+=4)k[T]=t[0],k[T+1]=t[1],k[T+2]=t[2],k[T+3]=255}for(const k of this._figures)UR(b,k,w);return E.putImageData(b,2,2),{canvas:v.canvas,offsetX:a-2*p,offsetY:u-2*m,scaleX:p,scaleY:m}}getPattern(e,t,i,s){Om(e,this._bbox);let r;if(s===Ut.SHADING)r=U.singularValueDecompose2dScale(De(e));else if(r=U.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=U.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===Ut.SHADING?null:this._background,t.cachedCanvases);return s!==Ut.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class WR extends $y{getPattern(){return"hotpink"}}function VR(n){switch(n[0]){case"RadialAxial":return new BR(n);case"Mesh":return new $R(n);case"Dummy":return new WR}throw new Error(`Unknown IR type: ${n[0]}`)}const Pw={COLORED:1,UNCOLORED:2},Vf=class Vf{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),Ep("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,w=p-d,S=U.singularValueDecompose2dScale(this.matrix),g=U.singularValueDecompose2dScale(this.baseTransform),v=S[0]*g[0],E=S[1]*g[1];let b=m,x=w,k=!1,T=!1;const R=Math.ceil(u*v),M=Math.ceil(c*E),I=Math.ceil(m*v),D=Math.ceil(w*E);R>=I?b=u:k=!0,M>=D?x=c:T=!0;const Q=this.getSizeAndScale(b,this.ctx.canvas.width,v),G=this.getSizeAndScale(x,this.ctx.canvas.height,E),V=e.cachedCanvases.getCanvas("pattern",Q.size,G.size),J=V.context,X=a.createCanvasGraphics(J);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,s,o),J.translate(-Q.scale*h,-G.scale*d),X.transform(Q.scale,0,0,G.scale,0,0),J.save(),this.clipBbox(X,h,d,f,p),X.baseTransform=De(X.ctx),X.executeOperatorList(i),X.endDrawing(),J.restore(),k||T){const H=V.canvas;k&&(b=u),T&&(x=c);const L=this.getSizeAndScale(b,this.ctx.canvas.width,v),B=this.getSizeAndScale(x,this.ctx.canvas.height,E),$=L.size,se=B.size,ee=e.cachedCanvases.getCanvas("pattern-workaround",$,se),fe=ee.context,ze=k?Math.floor(m/u):0,Nt=T?Math.floor(w/c):0;for(let ge=0;ge<=ze;ge++)for(let le=0;le<=Nt;le++)fe.drawImage(H,$*ge,se*le,$,se,0,0,$,se);return{canvas:ee.canvas,scaleX:L.scale,scaleY:B.scale,offsetX:h,offsetY:d}}return{canvas:V.canvas,scaleX:Q.scale,scaleY:G.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,i){const s=Math.max(Vf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,a=r-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(De(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case Pw.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case Pw.UNCOLORED:const a=U.makeHexColor(i[0],i[1],i[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new mR(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Ut.SHADING&&(r=U.transform(r,t.baseTransform),this.matrix&&(r=U.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(a),u}};Y(Vf,"MAX_PATTERN_SIZE",3e3);let jm=Vf;function GR({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Wt.isLittleEndian?4278190080:255,[u,c]=o?[r,a]:[a,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const S=e+h;e<S;e++){const g=e<f?n[e]:255;t[p++]=g&128?c:u,t[p++]=g&64?c:u,t[p++]=g&32?c:u,t[p++]=g&16?c:u,t[p++]=g&8?c:u,t[p++]=g&4?c:u,t[p++]=g&2?c:u,t[p++]=g&1?c:u}if(d===0)continue;const w=e<f?n[e++]:255;for(let S=0;S<d;S++)t[p++]=w&1<<7-S?c:u}return{srcPos:e,destPos:p}}const Lw=16,Mw=100,XR=15,Iw=10,Fw=1e3,en=16;function YR(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,u){e.transform(i,s,r,o,a,u),this.__originalTransform(i,s,r,o,a,u)},n.setTransform=function(i,s,r,o,a,u){e.setTransform(i,s,r,o,a,u),this.__originalSetTransform(i,s,r,o,a,u)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,a){e.bezierCurveTo(t,i,s,r,o,a),this.__originalBezierCurveTo(t,i,s,r,o,a)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class qR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ud(n,e,t,i,s,r,o,a,u,c){const[h,d,f,p,m,w]=De(n);if(d===0&&f===0){const v=o*h+m,E=Math.round(v),b=a*p+w,x=Math.round(b),k=(o+u)*h+m,T=Math.abs(Math.round(k)-E)||1,R=(a+c)*p+w,M=Math.abs(Math.round(R)-x)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),E,x),n.drawImage(e,t,i,s,r,0,0,T,M),n.setTransform(h,d,f,p,m,w),[T,M]}if(h===0&&p===0){const v=a*f+m,E=Math.round(v),b=o*d+w,x=Math.round(b),k=(a+c)*f+m,T=Math.abs(Math.round(k)-E)||1,R=(o+u)*d+w,M=Math.abs(Math.round(R)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,E,x),n.drawImage(e,t,i,s,r,0,0,M,T),n.setTransform(h,d,f,p,m,w),[M,T]}n.drawImage(e,t,i,s,r,o,a,u,c);const S=Math.hypot(h,d),g=Math.hypot(f,p);return[S*u,g*c]}function KR(n){const{width:e,height:t}=n;if(e>Fw||t>Fw)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,u,c;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of n.data){let v=128;for(;v>0;)d[f++]=g&v?0:255,v>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),u=1;u<e;u++)d[f]!==d[f+1]&&(o[u]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[u]=2,++p),a=1;a<t;a++){f=a*h,c=a*r,d[f-h]!==d[f]&&(o[c]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(u=1;u<e;u++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[g]&&(o[c+u]=s[g],++p),f++;if(d[f-h]!==d[f]&&(o[c+u]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),c=a*r,d[f]!==0&&(o[c]=8,++p),u=1;u<e;u++)d[f]!==d[f+1]&&(o[c+u]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[c+u]=4,++p),p>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(a=0;p&&a<=t;a++){let g=a*r;const v=g+e;for(;g<v&&!o[g];)g++;if(g===v)continue;w.moveTo(g%r,a);const E=g;let b=o[g];do{const x=m[b];do g+=x;while(!o[g]);const k=o[g];k!==5&&k!==10?(b=k,o[g]=0):(b=k&51*b>>4,o[g]&=b>>2|b<<2),w.lineTo(g%r,g/r|0),o[g]||--p}while(E!==g);--a}return d=null,o=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(w),g.beginPath(),g.restore()}}class Dw{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=z_,this.textMatrixScale=1,this.fontMatrix=cm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ct.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=U.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=U.applyTransform(t,e),s=U.applyTransform(t.slice(2),e),r=U.applyTransform([t[0],t[3]],e),o=U.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(e,t){U.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,o,a,u,c,h){const d=U.bezierBoundingBox(t,i,s,r,o,a,u,c,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Ut.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ut.STROKE){t||ke("Stroke bounding box must include transform.");const s=U.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const e=U.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ut.FILL,t=null){return U.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Nw(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%en,r=(t-s)/en,o=s===0?r:r+1,a=n.createImageData(i,en);let u=0,c;const h=e.data,d=a.data;let f,p,m,w;if(e.kind===Pd.GRAYSCALE_1BPP){const S=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),v=g.length,E=i+7>>3,b=4294967295,x=Wt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?en:s,c=0,p=0;p<m;p++){const k=S-u;let T=0;const R=k>E?i:k*8-7,M=R&-8;let I=0,D=0;for(;T<M;T+=8)D=h[u++],g[c++]=D&128?b:x,g[c++]=D&64?b:x,g[c++]=D&32?b:x,g[c++]=D&16?b:x,g[c++]=D&8?b:x,g[c++]=D&4?b:x,g[c++]=D&2?b:x,g[c++]=D&1?b:x;for(;T<R;T++)I===0&&(D=h[u++],I=128),g[c++]=D&I?b:x,I>>=1}for(;c<v;)g[c++]=0;n.putImageData(a,0,f*en)}}else if(e.kind===Pd.RGBA_32BPP){for(p=0,w=i*en*4,f=0;f<r;f++)d.set(h.subarray(u,u+w)),u+=w,n.putImageData(a,0,p),p+=en;f<o&&(w=i*s*4,d.set(h.subarray(u,u+w)),n.putImageData(a,0,p))}else if(e.kind===Pd.RGB_24BPP)for(m=en,w=i*m,f=0;f<o;f++){for(f>=r&&(m=s,w=i*m),c=0,p=w;p--;)d[c++]=h[u++],d[c++]=h[u++],d[c++]=h[u++],d[c++]=255;n.putImageData(a,0,f*en)}else throw new Error(`bad image kind: ${e.kind}`)}function Ow(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%en,r=(t-s)/en,o=s===0?r:r+1,a=n.createImageData(i,en);let u=0;const c=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?en:s;({srcPos:u}=GR({src:c,srcPos:u,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*en)}}function pu(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function cd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Ft){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function jw(n,e){if(e)return!0;const t=U.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Cr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const QR=["butt","round","square"],JR=["miter","round","bevel"],ZR={},Hw={};var Rr,Hm,zm;const Ky=class Ky{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},u,c){_(this,Rr);this.ctx=e,this.current=new Dw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new qR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const u=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...De(this.compositeCtx))}this.ctx.save(),cd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=De(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const u=r.length;if(u===a)return a;const c=u-a>Iw&&typeof i=="function",h=c?Date.now()+XR:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(m=o[a],m!==Gn.dependency)this[m].apply(this,r[a]);else for(const w of r[a]){const S=w.startsWith("g_")?f:p;if(!S.has(w))return S.get(w,i),a}if(a++,a===u)return a;if(c&&++d>Iw){if(Date.now()>h)return i(),a;d=0}}}endDrawing(){A(this,Rr,Hm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,Rr,zm).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,u=s,c="prescale1",h,d;for(;r>2&&a>1||o>2&&u>1;){let f=a,p=u;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&u>1&&(p=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/p),h=this.cachedCanvases.getCanvas(c,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,u,0,0,f,p),e=h.canvas,a=f,u=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=De(t);let u,c,h,d;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),u=this._cachedBitmapsMap.get(R),u||(u=new Map,this._cachedBitmapsMap.set(R,u));const M=u.get(c);if(M&&!o){const I=Math.round(Math.min(a[0],a[2])+a[4]),D=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:I,offsetY:D}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),Ow(d.context,e));let f=U.transform(a,[1/i,0,0,-1/s,0,0]);f=U.transform(f,[1,0,0,1,0,-s]);const[p,m,w,S]=U.getAxialAlignedBoundingBox([0,0,i,s],f),g=Math.round(w-p)||1,v=Math.round(S-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",g,v),b=E.context,x=p,k=m;b.translate(-x,-k),b.transform(...f),h||(h=this._scaleImage(d.canvas,zi(b)),h=h.img,u&&o&&u.set(c,h)),b.imageSmoothingEnabled=jw(De(b),e.interpolate),ud(b,h,0,0,h.width,h.height,0,0,i,s),b.globalCompositeOperation="source-in";const T=U.transform(zi(b),[1,0,0,1,-x,-k]);return b.fillStyle=o?r.getPattern(t,this,T,Ut.FILL):r,b.fillRect(0,0,i,s),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,E.canvas)),{canvas:E.canvas,offsetX:Math.round(x),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=QR[e]}setLineJoin(e){this.ctx.lineJoin=JR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...De(this.suspendedCtx)),pu(this.suspendedCtx,r),YR(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),pu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],a=s[2]-r,u=s[3]-o;a===0||u===0||(this.genericComposeSMask(t.context,i,a,u,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,a,u,c,h,d){let f=e.canvas,p=u-h,m=c-d;if(o){const S=U.makeHexColor(...o);if(p<0||m<0||p+i>f.width||m+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,s),v=g.context;v.drawImage(f,-p,-m),v.globalCompositeOperation="destination-atop",v.fillStyle=S,v.fillRect(0,0,i,s),v.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,i,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(p,m,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(u,c,i,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,i,s,u,c,i,s),t.restore()}save(){this.inSMaskMode?(pu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),pu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,o){this.ctx.transform(e,t,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let o=r.x,a=r.y,u,c;const h=De(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,m=0,w=e.length;p<w;p++)switch(e[p]|0){case Gn.rectangle:o=t[m++],a=t[m++];const S=t[m++],g=t[m++],v=o+S,E=a+g;s.moveTo(o,a),S===0||g===0?s.lineTo(v,E):(s.lineTo(v,a),s.lineTo(v,E),s.lineTo(o,E)),d||r.updateRectMinMax(h,[o,a,v,E]),s.closePath();break;case Gn.moveTo:o=t[m++],a=t[m++],s.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Gn.lineTo:o=t[m++],a=t[m++],s.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Gn.curveTo:u=o,c=a,o=t[m+4],a=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),r.updateCurvePathMinMax(h,u,c,t[m],t[m+1],t[m+2],t[m+3],o,a,f),m+=6;break;case Gn.curveTo2:u=o,c=a,s.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,u,c,o,a,t[m],t[m+1],t[m+2],t[m+3],f),o=t[m+2],a=t[m+3],m+=4;break;case Gn.curveTo3:u=o,c=a,o=t[m+2],a=t[m+3],s.bezierCurveTo(t[m],t[m+1],o,a,o,a),r.updateCurvePathMinMax(h,u,c,t[m],t[m+1],o,a,o,a,f),m+=4;break;case Gn.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,zi(t),Ut.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,zi(t),Ut.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ZR}eoClip(){this.pendingClip=Hw}beginText(){this.current.textMatrix=z_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||cm,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ie("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const u=i.italic?"italic":"normal";let c=t;t<Lw?c=Lw:t>Mw&&(c=Mw),this.current.fontSizeScale=t/c,this.ctx.font=`${u} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,o){this.current.textMatrix=[e,t,i,s,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const r=this.ctx,o=this.current,a=o.font,u=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,h=u&Ct.FILL_STROKE_MASK,d=!!(u&Ct.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(r.save(),r.translate(t,i),r.beginPath(),p(r,c),s&&r.setTransform(...s),(h===Ct.FILL||h===Ct.FILL_STROKE)&&r.fill(),(h===Ct.STROKE||h===Ct.FILL_STROKE)&&r.stroke(),r.restore()):((h===Ct.FILL||h===Ct.FILL_STROKE)&&r.fillText(e,t,i),(h===Ct.STROKE||h===Ct.FILL_STROKE)&&r.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:De(r),x:t,y:i,fontSize:c,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return ue(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,u=t.wordSpacing,c=t.fontDirection,h=t.textHScale*c,d=e.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,w=s*t.fontMatrix[0],S=t.textRenderingMode===Ct.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),c>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,zi(r),Ut.FILL);g=De(r),r.restore(),r.fillStyle=k}let v=t.lineWidth;const E=t.textMatrixScale;if(E===0||v===0){const k=t.textRenderingMode&Ct.FILL_STROKE_MASK;(k===Ct.STROKE||k===Ct.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=E;if(o!==1&&(r.scale(o,o),v/=o),r.lineWidth=v,i.isInvalidPDFjsFont){const k=[];let T=0;for(const R of e)k.push(R.unicode),T+=R.width;r.fillText(k.join(""),0,0),t.x+=T*w*h,r.restore(),this.compose();return}let b=0,x;for(x=0;x<d;++x){const k=e[x];if(typeof k=="number"){b+=p*k*s/1e3;continue}let T=!1;const R=(k.isSpace?u:0)+a,M=k.fontChar,I=k.accent;let D,Q,G=k.width;if(f){const J=k.vmetric||m,X=-(k.vmetric?J[1]:G*.5)*w,H=J[2]*w;G=J?-J[0]:G,D=X/o,Q=(b+H)/o}else D=b/o,Q=0;if(i.remeasure&&G>0){const J=r.measureText(M).width*1e3/s*o;if(G<J&&this.isFontSubpixelAAEnabled){const X=G/J;T=!0,r.save(),r.scale(X,1),D/=X}else G!==J&&(D+=(G-J)/2e3*s/o)}if(this.contentVisible&&(k.isInFont||i.missingFile)){if(S&&!I)r.fillText(M,D,Q);else if(this.paintChar(M,D,Q,g),I){const J=D+s*I.offset.x/o,X=Q-s*I.offset.y/o;this.paintChar(I.fontChar,J,X,g)}}const V=f?G*w-R*c:G*w+R*c;b+=V,T&&r.restore()}f?t.y-=b:t.x+=b*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||cm,f=e.length,p=i.textRenderingMode===Ct.INVISIBLE;let m,w,S,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,o),m=0;m<f;++m){if(w=e[m],typeof w=="number"){g=a*w*r/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const v=(w.isSpace?c:0)+u,E=s.charProcOperatorList[w.operatorListId];if(!E){ie(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(E),this.restore()),S=U.applyTransform([w.width,0],d)[0]*r+v,t.translate(S,0),i.x+=S*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||De(this.ctx),r={createCanvasGraphics:o=>new Ky(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new jm(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=U.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=U.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=VR(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,zi(t),Ut.SHADING);const s=zi(t);if(s){const{width:r,height:o}=t.canvas,[a,u,c,h]=U.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,u,c-a,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ke("Should not call beginInlineImage")}beginImageData(){ke("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=De(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(De(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ep("TODO: Support non-isolated groups."),e.knockout&&ie("Knockout groups not supported.");const i=De(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=U.getAxialAlignedBoundingBox(e.bbox,De(t));const r=[0,0,t.canvas.width,t.canvas.height];s=U.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,u,c]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,u,c),f=d.context;f.translate(-o,-a),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),pu(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=De(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=U.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(A(this,Rr,Hm).call(this),cd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[u,c]=U.singularValueDecompose2dScale(De(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(u,0,0,-c,0,a*c),cd(this.ctx)}else cd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new Dw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,Rr,zm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=KR(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const u=De(a);a.transform(t,i,s,r,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]);for(let h=0,d=o.length;h<d;h+=2){const f=U.transform(u,[t,i,s,r,o[h],o[h+1]]),[p,m]=U.applyTransform([0,0],f);a.drawImage(c.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:u,transform:c}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,u),d=h.context;d.save();const f=this.getObject(o,r);Ow(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,zi(t),Ut.FILL):i,d.fillRect(0,0,a,u),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),ud(t,h.canvas,0,0,a,u,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ie("Dependent image isn't ready yet");return}const o=r.width,a=r.height,u=[];for(let c=0,h=s.length;c<h;c+=2)u.push({transform:[t,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!Ft){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Nw(u,e),r=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(r,zi(s));s.imageSmoothingEnabled=jw(De(s),e.interpolate),ud(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,u=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Nw(u,e),s=this.applyTransferMapsToCanvas(u)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),ud(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Hw?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=De(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const u=Math.abs(t),c=Math.abs(r);if(u===c)if(e===0)o=a=1/u;else{const h=u*e;o=a=h<1?1/h:1}else if(e===0)o=1/u,a=1/c;else{const h=u*e,d=c*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const u=Math.abs(t*r-i*s),c=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)o=h/u,a=c/u;else{const d=e*u;o=h>d?h/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,r),o.length>0){const a=Math.max(s,r);t.setLineDash(o.map(u=>u/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Rr=new WeakSet,Hm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},zm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let za=Ky;for(const n in Gn)za.prototype[n]!==void 0&&(za.prototype[Gn[n]]=za.prototype[n]);var Dc,Nc;class ms{static get workerPort(){return l(this,Dc)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");y(this,Dc,e)}static get workerSrc(){return l(this,Nc)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");y(this,Nc,e)}}Dc=new WeakMap,Nc=new WeakMap,_(ms,Dc,null),_(ms,Nc,"");const hd={UNKNOWN:0,DATA:1,ERROR:2},Ye={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ln(n){switch(n instanceof Error||typeof n=="object"&&n!==null||ke('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new aa(n.message);case"MissingPDFException":return new oa(n.message);case"PasswordException":return new hm(n.message,n.code);case"UnexpectedResponseException":return new _p(n.message,n.status);case"UnknownErrorException":return new dm(n.message,n.details);default:return new dm(n.message,n.toString())}}var sl,jn,bS,xS,CS,jd;class ku{constructor(e,t,i){_(this,jn);_(this,sl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",A(this,jn,bS).bind(this),{signal:l(this,sl).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},s),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,u.postMessage({sourceName:o,targetName:a,stream:Ye.PULL,streamId:r,desiredSize:c.desiredSize}),h.promise},cancel:c=>{it(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:o,targetName:a,stream:Ye.CANCEL,streamId:r,reason:ln(c)}),h.promise}},i)}destroy(){var e;(e=l(this,sl))==null||e.abort(),y(this,sl,null)}}sl=new WeakMap,jn=new WeakSet,bS=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,jn,CS).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===hd.DATA)s.resolve(e.data);else if(e.callback===hd.ERROR)s.reject(ln(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:hd.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:hd.ERROR,callbackId:e.callbackId,reason:ln(o)})});return}if(e.streamId){A(this,jn,xS).call(this,e);return}t(e.data)},xS=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],u={enqueue(c,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Ye.ENQUEUE,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ye.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){it(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ye.ERROR,streamId:t,reason:ln(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise(function(c){c(a(e.data,u))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ye.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Ye.START_COMPLETE,streamId:t,reason:ln(c)})})},CS=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Ye.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ln(e.reason));break;case Ye.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ln(e.reason));break;case Ye.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:Ye.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(u){var c;u((c=a.onPull)==null?void 0:c.call(a))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ye.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Ye.PULL_COMPLETE,streamId:t,reason:ln(u)})});break;case Ye.ENQUEUE:if(it(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ye.CLOSE:if(it(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,jn,jd).call(this,o,t);break;case Ye.ERROR:it(o,"error should have stream controller"),o.controller.error(ln(e.reason)),A(this,jn,jd).call(this,o,t);break;case Ye.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ln(e.reason)),A(this,jn,jd).call(this,o,t);break;case Ye.CANCEL:if(!a)break;new Promise(function(u){var c;u((c=a.onCancel)==null?void 0:c.call(a,ln(e.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ye.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Ye.CANCEL_COMPLETE,streamId:t,reason:ln(u)})}),a.sinkCapability.reject(ln(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},jd=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var fo,Oc;class eP{constructor({parsedData:e,rawData:t}){_(this,fo);_(this,Oc);y(this,fo,e),y(this,Oc,t)}getRaw(){return l(this,Oc)}get(e){return l(this,fo).get(e)??null}getAll(){return Ny(l(this,fo))}has(e){return l(this,fo).has(e)}}fo=new WeakMap,Oc=new WeakMap;const ma=Symbol("INTERNAL");var jc,Hc,zc,rl;class tP{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){_(this,jc,!1);_(this,Hc,!1);_(this,zc,!1);_(this,rl,!0);y(this,jc,!!(e&vn.DISPLAY)),y(this,Hc,!!(e&vn.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(l(this,zc))return l(this,rl);if(!l(this,rl))return!1;const{print:e,view:t}=this.usage;return l(this,jc)?(t==null?void 0:t.viewState)!=="OFF":l(this,Hc)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==ma&&ke("Internal method `_setVisible` called."),y(this,zc,i),y(this,rl,t)}}jc=new WeakMap,Hc=new WeakMap,zc=new WeakMap,rl=new WeakMap;var Qs,ve,ol,al,Bc,Bm;class nP{constructor(e,t=vn.DISPLAY){_(this,Bc);_(this,Qs,null);_(this,ve,new Map);_(this,ol,null);_(this,al,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,y(this,al,e.order);for(const i of e.groups)l(this,ve).set(i.id,new tP(t,i));if(e.baseState==="OFF")for(const i of l(this,ve).values())i._setVisible(ma,!1);for(const i of e.on)l(this,ve).get(i)._setVisible(ma,!0);for(const i of e.off)l(this,ve).get(i)._setVisible(ma,!1);y(this,ol,this.getHash())}}isVisible(e){if(l(this,ve).size===0)return!0;if(!e)return Ep("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,ve).has(e.id)?l(this,ve).get(e.id).visible:(ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,Bc,Bm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,ve).has(t))return ie(`Optional content group not found: ${t}`),!0;if(l(this,ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,ve).has(t))return ie(`Optional content group not found: ${t}`),!0;if(!l(this,ve).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,ve).has(t))return ie(`Optional content group not found: ${t}`),!0;if(!l(this,ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,ve).has(t))return ie(`Optional content group not found: ${t}`),!0;if(l(this,ve).get(t).visible)return!1}return!0}return ie(`Unknown optional content policy ${e.policy}.`),!0}return ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=l(this,ve).get(e);if(!s){ie(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((r=l(this,ve).get(a))==null||r._setVisible(ma,!1,!0));s._setVisible(ma,!!t,!0),y(this,Qs,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=l(this,ve).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}y(this,Qs,null)}get hasInitialVisibility(){return l(this,ol)===null||this.getHash()===l(this,ol)}getOrder(){return l(this,ve).size?l(this,al)?l(this,al).slice():[...l(this,ve).keys()]:null}getGroups(){return l(this,ve).size>0?Ny(l(this,ve)):null}getGroup(e){return l(this,ve).get(e)||null}getHash(){if(l(this,Qs)!==null)return l(this,Qs);const e=new fS;for(const[t,i]of l(this,ve))e.update(`${t}:${i.visible}`);return y(this,Qs,e.hexdigest())}}Qs=new WeakMap,ve=new WeakMap,ol=new WeakMap,al=new WeakMap,Bc=new WeakSet,Bm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=A(this,Bc,Bm).call(this,r);else if(l(this,ve).has(r))o=l(this,ve).get(r).visible;else return ie(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class iP{constructor(e,{disableRange:t=!1,disableStream:i=!1}){it(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,c)=>{this._onReceiveData({begin:u,chunk:c})}),e.addProgressListener((u,c)=>{this._onProgress({loaded:u,total:c})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});it(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){it(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new sP(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new rP(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class sP{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Hy(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class rP{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function oP(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=u(h),h=c(h),r(h)}if(t=o(n),t){const h=c(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=a(t);return h=c(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Sp(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,w,S,g]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[S,g]}const m=[];for(let w=0;w<d.length&&w in d;++w){let[S,g]=d[w];g=a(g),S&&(g=unescape(g),w===0&&(g=u(g))),m.push(g)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function u(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function Wy(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function Vy({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Gy(n){const e=n.get("Content-Disposition");if(e){let t=oP(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Hy(t))return t}return null}function Cp(n,e){return n===404||n===0&&e.startsWith("file:")?new oa('Missing PDF "'+e+'".'):new _p(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function kS(n){return n===200||n===206}function TS(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function RS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ie(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class zw{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Wy(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return it(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new aP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new lP(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class aP{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,TS(i,this._withCredentials,this._abortController)).then(r=>{if(!kS(r.status))throw Cp(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:u}=Vy({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=Gy(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new aa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:RS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class lP{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,TS(r,this._withCredentials,this._abortController)).then(a=>{if(!kS(a.status))throw Cp(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:RS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const fg=200,pg=206;function uP(n){const e=n.response;return typeof e!="string"?e:Sp(e).buffer}class cP{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Wy(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=pg):s.expectedStatus=fg,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var u,c,h;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(u=i.onError)==null||u.call(i,s.status);return}const r=s.status||fg;if(!(r===fg&&i.expectedStatus===pg)&&r!==i.expectedStatus){(c=i.onError)==null||c.call(i,s.status);return}const a=uP(s);if(r===pg){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(h=i.onError)==null||h.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class hP{constructor(e){this._source=e,this._manager=new cP(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return it(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dP(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new fP(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class dP{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...u]=o.split(": ");return[a,u.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=Vy({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Gy(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Cp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class fP{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Cp(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const pP=/^[a-z][a-z0-9\-+.]+:/i;function gP(n){if(pP.test(n))return new URL(n);const e=kr.get("url");return new URL(e.pathToFileURL(n))}function PS(n,e,t){return n.protocol==="http:"?kr.get("http").request(n,{headers:e},t):kr.get("https").request(n,{headers:e},t)}class mP{constructor(e){this.source=e,this.url=gP(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Wy(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return it(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new wP(this):new vP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new AP(this,e,t):new yP(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class LS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new aa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class MS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class vP extends LS{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const u=new oa(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=Vy({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Gy(r)};this._request=PS(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class yP extends MS{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const r=o=>{if(o.statusCode===404){const a=new oa(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=PS(this._url,s,r),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class wP extends LS{constructor(e){super(e);const t=kr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new oa(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class AP extends MS{constructor(e,t,i){super(e);const s=kr.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const EP=1e5,qt=30,_P=.8;var eA,Js,Jt,Uc,$c,po,Ji,Wc,Vc,go,ll,ul,Zs,cl,Gc,hl,mo,Xc,Yc,Ue,vo,yo,qc,er,dl,Ts,IS,FS,$m,_n,Hd,Wm,DS,NS;let Um=(Ue=class{constructor({textContentSource:e,container:t,viewport:i}){_(this,Ts);_(this,Js,Promise.withResolvers());_(this,Jt,null);_(this,Uc,!1);_(this,$c,!!((eA=globalThis.FontInspector)!=null&&eA.enabled));_(this,po,null);_(this,Ji,null);_(this,Wc,0);_(this,Vc,0);_(this,go,null);_(this,ll,null);_(this,ul,0);_(this,Zs,0);_(this,cl,Object.create(null));_(this,Gc,[]);_(this,hl,null);_(this,mo,[]);_(this,Xc,new WeakMap);_(this,Yc,null);var u;if(e instanceof ReadableStream)y(this,hl,e);else if(typeof e=="object")y(this,hl,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,Jt,y(this,ll,t)),y(this,Zs,i.scale*(globalThis.devicePixelRatio||1)),y(this,ul,i.rotation),y(this,Ji,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;y(this,Yc,[1,0,0,-1,-o,a+r]),y(this,Vc,s),y(this,Wc,r),A(u=Ue,_n,DS).call(u),Qo(t,i),l(this,Js).promise.finally(()=>{l(Ue,dl).delete(this),y(this,Ji,null),y(this,cl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Wt.platform;return ue(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,go).read().then(({value:t,done:i})=>{if(i){l(this,Js).resolve();return}l(this,po)??y(this,po,t.lang),Object.assign(l(this,cl),t.styles),A(this,Ts,IS).call(this,t.items),e()},l(this,Js).reject)};return y(this,go,l(this,hl).getReader()),l(Ue,dl).add(this),e(),l(this,Js).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,ul)&&(t==null||t(),y(this,ul,s),Qo(l(this,ll),{rotation:s})),i!==l(this,Zs)){t==null||t(),y(this,Zs,i);const o={div:null,properties:null,ctx:A(r=Ue,_n,Hd).call(r,l(this,po))};for(const a of l(this,mo))o.properties=l(this,Xc).get(a),o.div=a,A(this,Ts,$m).call(this,o)}}cancel(){var t;const e=new aa("TextLayer task cancelled.");(t=l(this,go))==null||t.cancel(e).catch(()=>{}),y(this,go,null),l(this,Js).reject(e)}get textDivs(){return l(this,mo)}get textContentItemsStr(){return l(this,Gc)}static cleanup(){if(!(l(this,dl).size>0)){l(this,vo).clear();for(const{canvas:e}of l(this,yo).values())e.remove();l(this,yo).clear()}}},Js=new WeakMap,Jt=new WeakMap,Uc=new WeakMap,$c=new WeakMap,po=new WeakMap,Ji=new WeakMap,Wc=new WeakMap,Vc=new WeakMap,go=new WeakMap,ll=new WeakMap,ul=new WeakMap,Zs=new WeakMap,cl=new WeakMap,Gc=new WeakMap,hl=new WeakMap,mo=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,vo=new WeakMap,yo=new WeakMap,qc=new WeakMap,er=new WeakMap,dl=new WeakMap,Ts=new WeakSet,IS=function(e){var s,r;if(l(this,Uc))return;(r=l(this,Ji)).ctx??(r.ctx=A(s=Ue,_n,Hd).call(s,l(this,po)));const t=l(this,mo),i=l(this,Gc);for(const o of e){if(t.length>EP){ie("Ignoring additional textDivs for performance reasons."),y(this,Uc,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Jt);y(this,Jt,document.createElement("span")),l(this,Jt).classList.add("markedContent"),o.id!==null&&l(this,Jt).setAttribute("id",`${o.id}`),a.append(l(this,Jt))}else o.type==="endMarkedContent"&&y(this,Jt,l(this,Jt).parentNode);continue}i.push(o.str),A(this,Ts,FS).call(this,o)}},FS=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,mo).push(t);const s=U.transform(l(this,Yc),e.transform);let r=Math.atan2(s[1],s[0]);const o=l(this,cl)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,$c)&&o.fontSubstitution||o.fontFamily;a=Ue.fontFamilyMap.get(a)||a;const u=Math.hypot(s[2],s[3]),c=u*A(w=Ue,_n,NS).call(w,a,l(this,po));let h,d;r===0?(h=s[4],d=s[5]-c):(h=s[4]+c*Math.sin(r),d=s[5]-c*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,Jt)===l(this,ll)?(p.left=`${(100*h/l(this,Vc)).toFixed(2)}%`,p.top=`${(100*d/l(this,Wc)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ue,er)*u).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,$c)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);S!==g&&Math.max(S,g)/Math.min(S,g)>1.5&&(m=!0)}if(m&&(i.canvasWidth=o.vertical?e.height:e.width),l(this,Xc).set(t,i),l(this,Ji).div=t,l(this,Ji).properties=i,A(this,Ts,$m).call(this,l(this,Ji)),i.hasText&&l(this,Jt).append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),l(this,Jt).append(S)}},$m=function(e){var a;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let o="";if(l(Ue,er)>1&&(o=`scale(${1/l(Ue,er)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=r,{canvasWidth:c,fontSize:h}=i;A(a=Ue,_n,Wm).call(a,s,h*l(this,Zs),u);const{width:d}=s.measureText(t.textContent);d>0&&(o=`scaleX(${c*l(this,Zs)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},_n=new WeakSet,Hd=function(e=null){let t=l(this,yo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,yo).set(e,t),l(this,qc).set(t,{size:0,family:""})}return t},Wm=function(e,t,i){const s=l(this,qc).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},DS=function(){if(l(this,er)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),y(this,er,e.getBoundingClientRect().height),e.remove()},NS=function(e,t){const i=l(this,vo).get(e);if(i)return i;const s=A(this,_n,Hd).call(this,t);s.canvas.width=s.canvas.height=qt,A(this,_n,Wm).call(this,s,qt,e);const r=s.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return l(this,vo).set(e,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,qt,qt),s.strokeText("g",0,0);let u=s.getImageData(0,0,qt,qt).data;a=0;for(let h=u.length-1-3;h>=0;h-=4)if(u[h]>0){a=Math.ceil(h/4/qt);break}s.clearRect(0,0,qt,qt),s.strokeText("A",0,qt),u=s.getImageData(0,0,qt,qt).data,o=0;for(let h=0,d=u.length;h<d;h+=4)if(u[h]>0){o=qt-Math.floor(h/4/qt);break}s.canvas.width=s.canvas.height=0;const c=o?o/(o+a):_P;return l(this,vo).set(e,c),c},_(Ue,_n),_(Ue,vo,new Map),_(Ue,yo,new Map),_(Ue,qc,new WeakMap),_(Ue,er,null),_(Ue,dl,new Set),Ue);class fc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var u;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(fc.shouldBuildText(a))(u=r==null?void 0:r.attributes)!=null&&u.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const c of r.children)s(c)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const SP=65536,bP=100,xP=5e3,CP=Ft?jR:DR,kP=Ft?HR:yS,TP=Ft?OR:NR,RP=Ft?zR:_S;function PP(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Vm,{docId:t}=e,i=n.url?LP(n.url):null,s=n.data?MP(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,u=n.range instanceof OS?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:SP;let h=n.worker instanceof Ba?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!xp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,w=n.CMapReaderFactory||kP,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||RP,v=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ft,k=typeof n.isChrome=="boolean"?n.isChrome:!Wt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ft,M=n.fontExtraProperties===!0,I=n.enableXfa===!0,D=n.ownerDocument||globalThis.document,Q=n.disableRange===!0,G=n.disableStream===!0,V=n.disableAutoFetch===!0,J=n.pdfBug===!0,X=n.CanvasFactory||CP,H=n.FilterFactory||TP,L=n.enableHWA===!0,B=u?u.length:n.length??NaN,$=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ft&&!R,se=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===yS&&g===_S&&p&&S&&Au(p,document.baseURI)&&Au(S,document.baseURI);n.canvasFactory&&Tw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&Tw("`filterFactory`-instance option, please use `FilterFactory` instead.");const ee=null;dR(d);const fe={canvasFactory:new X({ownerDocument:D,enableHWA:L}),filterFactory:new H({docId:t,ownerDocument:D}),cMapReaderFactory:se?null:new w({baseUrl:p,isCompressed:m}),standardFontDataFactory:se?null:new g({baseUrl:S})};if(!h){const ge={verbosity:d,port:ms.workerPort};h=ge.port?Ba.fromPort(ge):new Ba(ge),e._worker=h}const ze={docId:t,apiVersion:"4.8.69",data:s,password:a,disableAutoFetch:V,rangeChunkSize:c,length:B,docBaseUrl:f,enableXfa:I,evaluatorOptions:{maxImageSize:E,disableFontFace:R,ignoreErrors:v,isEvalSupported:b,isOffscreenCanvasSupported:x,isChrome:k,canvasMaxAreaInBytes:T,fontExtraProperties:M,useSystemFonts:$,cMapUrl:se?p:null,standardFontDataUrl:se?S:null}},Nt={disableFontFace:R,fontExtraProperties:M,ownerDocument:D,pdfBug:J,styleElement:ee,loadingParams:{disableAutoFetch:V,enableXfa:I}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ge=h.messageHandler.sendWithPromise("GetDocRequest",ze,s?[s.buffer]:null);let le;if(u)le=new iP(u,{disableRange:Q,disableStream:G});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let di;Ft?di=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Au(i)?zw:mP:di=Au(i)?zw:hP,le=new di({url:i,length:B,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:Q,disableStream:G})}return ge.then(di=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Un=new ku(t,di,h.port),Re=new NP(Un,e,le,Nt,fe);e._transport=Re,Un.send("Ready",null)})}).catch(e._capability.reject),e}function LP(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Ft&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function MP(n){if(Ft&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Sp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Bw(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Gf;const Xf=class Xf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ot(Xf,Gf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Gf=new WeakMap,_(Xf,Gf,0);let Vm=Xf,OS=class{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ke("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class IP{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var tr,Zi,Fn,va,zd;class FP{constructor(e,t,i,s=!1){_(this,Fn);_(this,tr,null);_(this,Zi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new kw:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new jS,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Oh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=Hs.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1}){var b,x;(b=this._stats)==null||b.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:m}=f;y(this,Zi,!1),A(this,Fn,zd).call(this),a||(a=this._transport.getOptionalContentConfig(p));let w=this._intentStates.get(m);w||(w=Object.create(null),this._intentStates.set(m,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const S=!!(p&vn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(f));const g=k=>{var T;w.renderTasks.delete(v),(this._maybeCleanupAfterRender||S)&&y(this,Zi,!0),A(this,Fn,va).call(this,!S),k?(v.capability.reject(k),this._abortOperatorList({intentState:w,reason:k instanceof Error?k:new Error(k)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Xm({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:c});(w.renderTasks||(w.renderTasks=new Set)).add(v);const E=v.task;return Promise.all([w.displayReadyCapability.promise,a]).then(([k,T])=>{var R;if(this.destroyed){g();return}if((R=this._stats)==null||R.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:k,optionalContentConfig:T}),v.operatorListChanged()}).catch(g),E}getOperatorList({intent:e="display",annotationMode:t=Hs.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var c;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>fc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:u,done:c}){if(c){i(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),y(this,Zi,!1),A(this,Fn,zd).call(this),Promise.all(e)}cleanup(e=!1){y(this,Zi,!0);const t=A(this,Fn,va).call(this,!1);return e&&t&&this._stats&&(this._stats=new kw),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&A(this,Fn,va).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),c=this._intentStates.get(t);c.streamReader=u;const h=()=>{u.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();A(this,Fn,va).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof jy){let s=bP;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new aa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}tr=new WeakMap,Zi=new WeakMap,Fn=new WeakSet,va=function(e=!1){if(A(this,Fn,zd).call(this),!l(this,Zi)||this.destroyed)return!1;if(e)return y(this,tr,setTimeout(()=>{y(this,tr,null),A(this,Fn,va).call(this,!1)},xP)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,Zi,!1),!0},zd=function(){l(this,tr)&&(clearTimeout(l(this,tr)),y(this,tr,null))};var es,Yf;class DP{constructor(){_(this,es,new Map);_(this,Yf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Yf).then(()=>{for(const[s]of l(this,es))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){ie("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,es).set(t,s)}removeEventListener(e,t){const i=l(this,es).get(t);i==null||i(),l(this,es).delete(t)}terminate(){for(const[,e]of l(this,es))e==null||e();l(this,es).clear()}}es=new WeakMap,Yf=new WeakMap;var qf,wo,Ao,fl,Bd,pl,Ud;const Pe=class Pe{constructor({name:e=null,port:t=null,verbosity:i=fR()}={}){_(this,fl);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(Pe,Ao))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Pe,Ao)||y(Pe,Ao,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ft?Promise.all([kr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ku("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,fl,Bd).call(this)}_initialize(){if(l(Pe,wo)||l(Pe,pl,Ud)){this._setupFakeWorker();return}let{workerSrc:e}=Pe;try{Pe._isSameOrigin(window.location.href,e)||(e=Pe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ku("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,A(this,fl,Bd).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{Ep("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Pe,wo)||(ie("Setting up fake worker."),y(Pe,wo,!0)),Pe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new DP;this._port=t;const i=`fake${Ot(Pe,qf)._++}`,s=new ku(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new ku(i,i+"_worker",t),A(this,fl,Bd).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Pe,Ao))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,Ao))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Pe(e)}static get workerSrc(){if(ms.workerSrc)return ms.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ue(this,"_setupFakeWorkerGlobal",(async()=>l(this,pl,Ud)?l(this,pl,Ud):(await import(this.workerSrc)).WorkerMessageHandler)())}};qf=new WeakMap,wo=new WeakMap,Ao=new WeakMap,fl=new WeakSet,Bd=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},pl=new WeakSet,Ud=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},_(Pe,pl),_(Pe,qf,0),_(Pe,wo,!1),_(Pe,Ao),Ft&&(y(Pe,wo,!0),ms.workerSrc||(ms.workerSrc="./pdf.worker.mjs")),Pe._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},Pe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ba=Pe;var ts,Ci,gl,ml,ki,Eo,Tu;class NP{constructor(e,t,i,s,r){_(this,Eo);_(this,ts,new Map);_(this,Ci,new Map);_(this,gl,new Map);_(this,ml,new Map);_(this,ki,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new jS,this.fontLoader=new IR({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ue(this,"annotationStorage",new Uy)}getRenderingIntent(e,t=Hs.ENABLE,i=null,s=!1,r=!1){let o=vn.DISPLAY,a=Im;switch(e){case"any":o=vn.ANY;break;case"display":break;case"print":o=vn.PRINT;break;default:ie(`getRenderingIntent - invalid intent: ${e}`)}const u=o&vn.PRINT&&i instanceof gS?i:this.annotationStorage;switch(t){case Hs.DISABLE:o+=vn.ANNOTATIONS_DISABLE;break;case Hs.ENABLE:break;case Hs.ENABLE_FORMS:o+=vn.ANNOTATIONS_FORMS;break;case Hs.ENABLE_STORAGE:o+=vn.ANNOTATIONS_STORAGE,a=u.serializable;break;default:ie(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=vn.IS_EDITING),r&&(o+=vn.OPLIST);const{ids:c,hash:h}=u.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,ki))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Ci).values())e.push(s._destroy());l(this,Ci).clear(),l(this,gl).clear(),l(this,ml).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,ts).clear(),this.filterFactory.destroy(),Um.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new aa("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{it(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}it(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(i,s)=>{it(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}it(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new IP(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new hm(i.message,i.code);break;case"InvalidPDFException":s=new B_(i.message);break;case"MissingPDFException":s=new oa(i.message);break;case"UnexpectedResponseException":s=new _p(i.message,i.status);break;case"UnknownErrorException":s=new dm(i.message,i.details);break;default:ke("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(y(this,ki,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,ki).reject(r):l(this,ki).resolve({password:r})};try{t.onPassword(s,i.code)}catch(r){l(this,ki).reject(r)}}else l(this,ki).reject(new hm(i.message,i.code));return l(this,ki).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Ci).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:u,pdfBug:c}=this._params;if("error"in r){const p=r.error;ie(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new FR(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;it(f,"The imageRef must be defined.");for(const p of l(this,Ci).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{var u;if(this.destroyed)return;const a=l(this,Ci).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(r){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>lR&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,gl).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,ml).set(r.refStr,e);const o=new FP(t,r,this,this._params.pdfBug);return l(this,Ci).set(t,o),o});return l(this,gl).set(t,s),s}getPageIndex(e){return Bw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,Eo,Tu).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Eo,Tu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Eo,Tu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,Eo,Tu).call(this,"GetOptionalContentConfig").then(t=>new nP(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,ts).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new eP(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,ts).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Ci).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,ts).clear(),this.filterFactory.destroy(!0),Um.cleanup()}}cachedPageNumber(e){if(!Bw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,ml).get(t)??null}}ts=new WeakMap,Ci=new WeakMap,gl=new WeakMap,ml=new WeakMap,ki=new WeakMap,Eo=new WeakSet,Tu=function(e,t=null){const i=l(this,ts).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return l(this,ts).set(e,s),s};const dd=Symbol("INITIAL_DATA");var Jn,Kc,Gm;class jS{constructor(){_(this,Kc);_(this,Jn,Object.create(null))}get(e,t=null){if(t){const s=A(this,Kc,Gm).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=l(this,Jn)[e];if(!i||i.data===dd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Jn)[e];return!!t&&t.data!==dd}resolve(e,t=null){const i=A(this,Kc,Gm).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Jn)){const{data:i}=l(this,Jn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}y(this,Jn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Jn)){const{data:t}=l(this,Jn)[e];t!==dd&&(yield[e,t])}}}Jn=new WeakMap,Kc=new WeakSet,Gm=function(e){var t;return(t=l(this,Jn))[e]||(t[e]={...Promise.withResolvers(),data:dd})};var nr;class OP{constructor(e){_(this,nr,null);y(this,nr,e),this.onContinue=null}get promise(){return l(this,nr).capability.promise}cancel(e=0){l(this,nr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,nr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,nr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}nr=new WeakMap;var ir,_o;const $r=class $r{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:u,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){_(this,ir,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new OP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,u;if(this.cancelled)return;if(this._canvas){if(l($r,_o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l($r,_o).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new za(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,ir)&&(window.cancelAnimationFrame(l(this,ir)),y(this,ir,null)),l($r,_o).delete(this._canvas),this.callback(e||new jy(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,ir,window.requestAnimationFrame(()=>{y(this,ir,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l($r,_o).delete(this._canvas),this.callback())))}};ir=new WeakMap,_o=new WeakMap,_($r,_o,new WeakSet);let Xm=$r;const jP="4.8.69",HP="3634dab10";function Uw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function gu(n){return Math.max(0,Math.min(255,255*n))}class $w{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=gu(e),[e,e,e]}static G_HTML([e]){const t=Uw(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(gu)}static RGB_HTML(e){return`#${e.map(Uw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[gu(1-Math.min(1,e+s)),gu(1-Math.min(1,i+s)),gu(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class zP{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ke("Abstract method `_createSVG` called.")}}class Xy extends zP{_createSVG(e){return document.createElementNS(Bi,e)}}class HS{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const u=a.target.options,c=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[u,c]of Object.entries(o))if(c!=null)switch(u){case"class":c.length&&e.setAttribute(u,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",u=e.div;if(u.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=p}a&&u.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&fc.shouldBuildText(s.name)&&c.push(p)}return{textDivs:c}}const h=[[s,-1,o]];for(;h.length>0;){const[p,m,w]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:g}=S;if(g==="#text"){const E=document.createTextNode(S.value);c.push(E),w.append(E);continue}const v=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,g):document.createElement(g);if(w.append(v),S.attributes&&this.setAttributes({html:v,element:S,storage:t,intent:r,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,v]);else if(S.value){const E=document.createTextNode(S.value);a&&fc.shouldBuildText(g)&&c.push(E),v.append(E)}}for(const p of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Hh=1e3,BP=9,Zo=new WeakSet;function Es(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class UP{static create(e){switch(e.data.annotationType){case Je.LINK:return new zS(e);case Je.TEXT:return new $P(e);case Je.WIDGET:switch(e.data.fieldType){case"Tx":return new WP(e);case"Btn":return e.data.radioButton?new $S(e):e.data.checkBox?new GP(e):new XP(e);case"Ch":return new YP(e);case"Sig":return new VP(e)}return new la(e);case Je.POPUP:return new qm(e);case Je.FREETEXT:return new YS(e);case Je.LINE:return new KP(e);case Je.SQUARE:return new QP(e);case Je.CIRCLE:return new JP(e);case Je.POLYLINE:return new qS(e);case Je.CARET:return new eL(e);case Je.INK:return new Yy(e);case Je.POLYGON:return new ZP(e);case Je.HIGHLIGHT:return new KS(e);case Je.UNDERLINE:return new tL(e);case Je.SQUIGGLY:return new nL(e);case Je.STRIKEOUT:return new iL(e);case Je.STAMP:return new QS(e);case Je.FILEATTACHMENT:return new sL(e);default:return new Ge(e)}}}var So,vl,yl,Qc,Ym;const Qy=class Qy{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){_(this,Qc);_(this,So,null);_(this,vl,!1);_(this,yl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Qy._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,So)||y(this,So,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,Qc,Ym).call(this,t),(i=l(this,yl))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,So)&&(A(this,Qc,Ym).call(this,l(this,So).rect),(e=l(this,yl))==null||e.popup.resetEdited(),y(this,So,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof la||(r.tabIndex=Hh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof qm){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:a,height:u}=Es(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(w>0||S>0){const v=`calc(${w}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;o.borderRadius=v}else if(this instanceof $S){const v=`calc(${a}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case fu.SOLID:o.borderStyle="solid";break;case fu.DASHED:o.borderStyle="dashed";break;case fu.BEVELED:ie("Unimplemented border style: beveled");break;case fu.INSET:ie("Unimplemented border style: inset");break;case fu.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(y(this,vl,!0),o.borderColor=U.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const c=U.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(c[0]-f)/h}%`,o.top=`${100*(c[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*u/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=Es(this.data.rect);let a,u;e%180===0?(a=100*r/i,u=100*o/s):(a=100*o/i,u=100*r/s),t.style.width=`${a}%`,t.style.height=`${u}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[i]=$w[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:$w[`${o}_rgb`](a)})};return ue(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,S,g,v]=e.subarray(2,6);if(s===w&&r===S&&t===g&&i===v)return}const{style:o}=this.container;let a;if(l(this,vl)){const{borderColor:w,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const u=s-t,c=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let w=2,S=e.length;w<S;w+=8){const g=e[w],v=e[w+1],E=e[w+2],b=e[w+3],x=h.createElement("rect"),k=(E-t)/u,T=(r-v)/c,R=(g-E)/u,M=(v-b)/c;x.setAttribute("x",k),x.setAttribute("y",T),x.setAttribute("width",R),x.setAttribute("height",M),p.append(x),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${T}" width="${R}" height="${M}"/>`)}l(this,vl)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=y(this,yl,new qm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ke("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const u=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Zo.has(c)){ie(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:u,domElement:c})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Zo.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};So=new WeakMap,vl=new WeakMap,yl=new WeakMap,Qc=new WeakSet,Ym=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:u}}}}=this;i==null||i.splice(0,4,...e);const{width:c,height:h}=Es(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+u)/o}%`,s===0?(t.width=`${100*c/r}%`,t.height=`${100*h/o}%`):this.setRotation(s)};let Ge=Qy;var wn,jr,BS,US;class zS extends Ge{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});_(this,wn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(A(this,wn,BS).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,wn,US).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&A(this,wn,jr).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),A(this,wn,jr).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,wn,jr).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),A(this,wn,jr).call(this),!this._fieldObjects){ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=i,u=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:w}of m)f.add(w)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&u.push(m)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const c=this.annotationStorage,h=[];for(const f of u){const{id:p}=f;switch(h.push(p),f.type){case"text":{const w=f.defaultValue||"";c.setValue(p,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;c.setValue(p,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";c.setValue(p,{value:w});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Zo.has(m)){ie(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}wn=new WeakSet,jr=function(){this.container.setAttribute("data-internal-link","")},BS=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},A(this,wn,jr).call(this)},US=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),A(this,wn,jr).call(this)};class $P extends Ge{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class la extends Ge{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,i,s){var r,o,a;for(const[u,c]of i)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":U.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||BP,r=e.style;let o;const a=2,u=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(c/(ug*s))||1,d=c/h;o=Math.min(s,u(d/ug))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,u(c/ug))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=U.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class WP extends la{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&a.length>u&&(a=a.slice(0,u));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",c??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Zo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Hh,this._setRequired(i,this.data.required),u&&(i.maxLength=u),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var w;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:S}=w.detail;h.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S),e.setValue(t,{formattedValue:S})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var E;const{charLimit:S}=w.detail,{target:g}=w;if(S===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",S);let v=h.userValue;!v||v.length<=S||(v=v.slice(0,S),g.value=h.userValue=v,e.setValue(t,{value:v}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("keydown",p=>{var S;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:w}=p.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var w,S;if(!h.focused||!p.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var x;h.lastCommittedValue=null;const{data:m,target:w}=p,{value:S,selectionStart:g,selectionEnd:v}=w;let E=g,b=v;switch(p.inputType){case"deleteWordBackward":{const k=S.substring(0,g).match(/\w*[^\w]*$/);k&&(E-=k[0].length);break}case"deleteWordForward":{const k=S.substring(g).match(/^[^\w]*\w*/);k&&(b+=k[0].length);break}case"deleteContentBackward":g===v&&(E-=1);break;case"deleteContentForward":g===v&&(b+=1);break}p.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:m||"",willCommit:!1,selStart:E,selEnd:b}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/u;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class VP extends la{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class GP extends la{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Zo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Hh,r.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const c of this._getElementsByName(a,i)){const h=u&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(i,{value:u})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(i,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $S extends la{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Zo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Hh,r.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:u})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const u={value:c=>{const h=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class XP extends zS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class YP extends la{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Zo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Hh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let u=a(!1);const c=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const w of s.options)w.selected=m.has(w.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),u=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:w}=f.detail.insert,S=s.children[p],g=document.createElement("option");g.textContent=m,g.value=w,S?S.before(g):s.append(g),e.setValue(t,{value:a(!0),items:c(f)}),u=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:w,exportValue:S}=m,g=document.createElement("option");g.textContent=w,g.value=S,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),u=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qm extends Ge{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Ge._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new qP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Oy}${i}`).join(",")),this.container}}var wl,Kf,Qf,Al,bo,Be,ns,El,Jc,Zc,_l,is,Zn,ss,eh,rs,th,xo,Co,Ee,$d,Km,WS,VS,GS,XS,Wd,Vd,Qm;class qP{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:u,rect:c,parentRect:h,open:d}){_(this,Ee);_(this,wl,A(this,Ee,GS).bind(this));_(this,Kf,A(this,Ee,Qm).bind(this));_(this,Qf,A(this,Ee,Vd).bind(this));_(this,Al,A(this,Ee,Wd).bind(this));_(this,bo,null);_(this,Be,null);_(this,ns,null);_(this,El,null);_(this,Jc,null);_(this,Zc,null);_(this,_l,null);_(this,is,!1);_(this,Zn,null);_(this,ss,null);_(this,eh,null);_(this,rs,null);_(this,th,null);_(this,xo,null);_(this,Co,!1);var f;y(this,Be,e),y(this,th,s),y(this,ns,o),y(this,rs,a),y(this,Zc,u),y(this,bo,t),y(this,eh,c),y(this,_l,h),y(this,Jc,i),y(this,El,zy.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Al)),p.addEventListener("mouseenter",l(this,Qf)),p.addEventListener("mouseleave",l(this,Kf)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",l(this,wl));l(this,Be).hidden=!0,d&&A(this,Ee,Wd).call(this)}render(){if(l(this,Zn))return;const e=y(this,Zn,document.createElement("div"));if(e.className="popup",l(this,bo)){const r=e.style.outlineColor=U.makeHexColor(...l(this,bo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=U.makeHexColor(...l(this,bo).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,th),e.append(t),l(this,El)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,El).valueOf()})),t.append(r)}const s=l(this,Ee,$d);if(s)HS.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,ns));e.append(r)}l(this,Be).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,xo)||y(this,xo,{contentsObj:l(this,ns),richText:l(this,rs)}),e&&y(this,ss,null),t&&(y(this,rs,A(this,Ee,VS).call(this,t)),y(this,ns,null)),(i=l(this,Zn))==null||i.remove(),y(this,Zn,null)}resetEdited(){var e;l(this,xo)&&({contentsObj:Ot(this,ns)._,richText:Ot(this,rs)._}=l(this,xo),y(this,xo,null),(e=l(this,Zn))==null||e.remove(),y(this,Zn,null),y(this,ss,null))}forceHide(){y(this,Co,this.isVisible),l(this,Co)&&(l(this,Be).hidden=!0)}maybeShow(){l(this,Co)&&(l(this,Zn)||A(this,Ee,Vd).call(this),y(this,Co,!1),l(this,Be).hidden=!1)}get isVisible(){return l(this,Be).hidden===!1}}wl=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Al=new WeakMap,bo=new WeakMap,Be=new WeakMap,ns=new WeakMap,El=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,_l=new WeakMap,is=new WeakMap,Zn=new WeakMap,ss=new WeakMap,eh=new WeakMap,rs=new WeakMap,th=new WeakMap,xo=new WeakMap,Co=new WeakMap,Ee=new WeakSet,$d=function(){const e=l(this,rs),t=l(this,ns);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,rs).html||null},Km=function(){var e,t,i;return((i=(t=(e=l(this,Ee,$d))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},WS=function(){var e,t,i;return((i=(t=(e=l(this,Ee,$d))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},VS=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,Ee,WS),fontSize:l(this,Ee,Km)?`calc(${l(this,Ee,Km)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},GS=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,is))&&A(this,Ee,Wd).call(this)},XS=function(){if(l(this,ss)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=l(this,Zc);let o=!!l(this,_l),a=o?l(this,_l):l(this,eh);for(const m of l(this,Jc))if(!a||U.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const u=U.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=u[0]+h,f=u[1];y(this,ss,[100*(d-s)/t,100*(f-r)/i]);const{style:p}=l(this,Be);p.left=`${l(this,ss)[0]}%`,p.top=`${l(this,ss)[1]}%`},Wd=function(){y(this,is,!l(this,is)),l(this,is)?(A(this,Ee,Vd).call(this),l(this,Be).addEventListener("click",l(this,Al)),l(this,Be).addEventListener("keydown",l(this,wl))):(A(this,Ee,Qm).call(this),l(this,Be).removeEventListener("click",l(this,Al)),l(this,Be).removeEventListener("keydown",l(this,wl)))},Vd=function(){l(this,Zn)||this.render(),this.isVisible?l(this,is)&&l(this,Be).classList.add("focused"):(A(this,Ee,XS).call(this),l(this,Be).hidden=!1,l(this,Be).style.zIndex=parseInt(l(this,Be).style.zIndex)+1e3)},Qm=function(){l(this,Be).classList.remove("focused"),!(l(this,is)||!this.isVisible)&&(l(this,Be).hidden=!0,l(this,Be).style.zIndex=parseInt(l(this,Be).style.zIndex)-1e3)};class YS extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var nh;class KP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,nh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=Es(t.rect),r=this.svgFactory.create(i,s,!0),o=y(this,nh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}nh=new WeakMap;var ih;class QP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,ih,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=Es(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=y(this,ih,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}ih=new WeakMap;var sh;class JP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,sh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=Es(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=y(this,sh,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,sh)}addHighlightArea(){this.container.classList.add("highlightArea")}}sh=new WeakMap;var rh;class qS extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,rh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:o,height:a}=Es(t),u=this.svgFactory.create(o,a,!0);let c=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],m=t[3]-i[d+1];c.push(`${p},${m}`)}c=c.join(" ");const h=y(this,rh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",c),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),u.append(h),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}rh=new WeakMap;class ZP extends qS{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eL extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var oh;class Yy extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,oh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?te.HIGHLIGHT:te.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:o,height:a}=Es(t),u=this.svgFactory.create(o,a,!0);for(const c of i){let h=[];for(let f=0,p=c.length;f<p;f+=2){const m=c[f]-t[0],w=t[3]-c[f+1];h.push(`${m},${w}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,oh).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;class KS extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=te.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class tL extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class nL extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class iL extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class QS extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=te.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ah,lh,Jm;class sL extends Ge{constructor(t){var s;super(t,{isRenderable:!0});_(this,lh);_(this,ah,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",A(this,lh,Jm).bind(this)),y(this,ah,s);const{isMac:r}=Wt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,lh,Jm).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap,lh=new WeakSet,Jm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var uh,ko,To,ch,ta,JS,Zm,tA;let rL=(tA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){_(this,ta);_(this,uh,null);_(this,ko,null);_(this,To,new Map);_(this,ch,null);this.div=e,y(this,uh,t),y(this,ko,i),y(this,ch,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,To).size>0}async render(e){var o;const{annotations:t}=e,i=this.div;Qo(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Xy,annotationStorage:e.annotationStorage||new Uy,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const u=a.annotationType===Je.POPUP;if(u){const d=s.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Es(a.rect);if(d<=0||f<=0)continue}r.data=a;const c=UP.create(r);if(!c.isRenderable)continue;if(!u&&a.popupRef){const d=s.get(a.popupRef);d?d.push(c):s.set(a.popupRef,[c])}const h=c.render();a.hidden&&(h.style.visibility="hidden"),await A(this,ta,JS).call(this,h,a.id),c._isEditable&&(l(this,To).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}A(this,ta,Zm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Qo(t,{rotation:e.rotation}),A(this,ta,Zm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,To).values())}getEditableAnnotation(e){return l(this,To).get(e)}},uh=new WeakMap,ko=new WeakMap,To=new WeakMap,ch=new WeakMap,ta=new WeakSet,JS=async function(e,t){var o,a;const i=e.firstChild||e,s=i.id=`${Oy}${t}`,r=await((o=l(this,ch))==null?void 0:o.getAriaAttributes(s));if(r)for(const[u,c]of r)i.setAttribute(u,c);this.div.append(e),(a=l(this,uh))==null||a.moveElementInDOM(this.div,e,i,!1)},Zm=function(){if(!l(this,ko))return;const e=this.div;for(const[t,i]of l(this,ko)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}l(this,ko).clear()},tA);const fd=/\r\n?|\n/g;var ei,hn,hh,Ro,dn,Qe,ZS,eb,tb,Gd,Ss,Xd,Yd,nb,tv,ib;const be=class be extends ye{constructor(t){super({...t,name:"freeTextEditor"});_(this,Qe);_(this,ei);_(this,hn,"");_(this,hh,`${this.id}-editor`);_(this,Ro,null);_(this,dn);y(this,ei,t.color||be._defaultColor||ye._defaultLineColor),y(this,dn,t.fontSize||be._defaultFontSize)}static get _keyboardManager(){const t=be.prototype,i=o=>o.isEmpty(),s=Jo.TRANSLATE_SMALL,r=Jo.TRANSLATE_BIG;return ue(this,"_keyboardManager",new jh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){ye.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case q.FREETEXT_SIZE:be._defaultFontSize=i;break;case q.FREETEXT_COLOR:be._defaultColor=i;break}}updateParams(t,i){switch(t){case q.FREETEXT_SIZE:A(this,Qe,ZS).call(this,i);break;case q.FREETEXT_COLOR:A(this,Qe,eb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[q.FREETEXT_SIZE,be._defaultFontSize],[q.FREETEXT_COLOR,be._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[q.FREETEXT_SIZE,l(this,dn)],[q.FREETEXT_COLOR,l(this,ei)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+l(this,dn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,Ro,new AbortController);const t=this._uiManager.combinedSignal(l(this,Ro));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,hh)),this._isDraggable=!0,(t=l(this,Ro))==null||t.abort(),y(this,Ro,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,hn),i=y(this,hn,A(this,Qe,tb).call(this).trimEnd());if(t===i)return;const s=r=>{if(y(this,hn,r),!r){this.remove();return}A(this,Qe,Yd).call(this),this._uiManager.rebuild(this),A(this,Qe,Gd).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),A(this,Qe,Gd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,hh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,dn)}px * var(--scale-factor))`,s.color=l(this,ei),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Mf(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[u,c]=this.getInitialTranslation();[u,c]=this.pageTranslationToScreen(u,c);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,w;switch(this.rotation){case 0:m=t+(a[0]-f)/h,w=i+this.height-(a[1]-p)/d;break;case 90:m=t+(a[0]-f)/h,w=i-(a[1]-p)/d,[u,c]=[c,-u];break;case 180:m=t-this.width+(a[0]-f)/h,w=i-(a[1]-p)/d,[u,c]=[-u,-c];break;case 270:m=t+(a[0]-f-this.height*d)/h,w=i+(a[1]-p-this.width*h)/d,[u,c]=[-c,u];break}this.setAt(m*r,w*o,u,c)}else this.setAt(t*r,i*o,this.width*r,this.height*o);A(this,Qe,Yd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,w,S;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=A(m=be,Ss,tv).call(m,i.getData("text")||"").replaceAll(fd,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:c}=a,h=[],d=[];if(u.nodeType===Node.TEXT_NODE){const g=u.parentElement;if(d.push(u.nodeValue.slice(c).replaceAll(fd,"")),g!==this.editorDiv){let v=h;for(const E of this.editorDiv.childNodes){if(E===g){v=d;continue}v.push(A(w=be,Ss,Xd).call(w,E))}}h.push(u.nodeValue.slice(0,c).replaceAll(fd,""))}else if(u===this.editorDiv){let g=h,v=0;for(const E of this.editorDiv.childNodes)v++===c&&(g=d),g.push(A(S=be,Ss,Xd).call(S,E))}y(this,hn,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,Qe,Yd).call(this);const f=new Range;let p=h.reduce((g,v)=>g+v.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const v=g.nodeValue.length;if(p<=v){f.setStart(g,p),f.setEnd(g,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var a;let r=null;if(t instanceof YS){const{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:w,parent:{page:{pageNumber:S}}}=t;if(!m||m.length===0)return null;r=t={annotationType:te.FREETEXT,color:Array.from(c),fontSize:u,value:m.join(`
`),position:w,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,i,s);return y(o,dn,t.fontSize),y(o,ei,U.makeHexColor(...t.color)),y(o,hn,A(a=be,Ss,tv).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=be._internalPadding*this.parentScale,s=this.getRect(i,i),r=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,ei)),o={annotationType:te.FREETEXT,color:r,fontSize:l(this,dn),value:A(this,Qe,nb).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!A(this,Qe,ib).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,dn)}px * var(--scale-factor))`,s.color=l(this,ei),i.replaceChildren();for(const o of l(this,hn).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const r=be._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,hn)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ei=new WeakMap,hn=new WeakMap,hh=new WeakMap,Ro=new WeakMap,dn=new WeakMap,Qe=new WeakSet,ZS=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,dn))*this.parentScale),y(this,dn,r),A(this,Qe,Gd).call(this)},s=l(this,dn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},eb=function(t){const i=r=>{y(this,ei,this.editorDiv.style.color=r)},s=l(this,ei);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},tb=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(s=be,Ss,Xd).call(s,r)),i=r);return t.join(`
`)},Gd=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},Ss=new WeakSet,Xd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(fd,"")},Yd=function(){if(this.editorDiv.replaceChildren(),!!l(this,hn))for(const t of l(this,hn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},nb=function(){return l(this,hn).replaceAll(""," ")},tv=function(t){return t.replaceAll(" ","")},ib=function(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((a,u)=>a!==r[u])||t.pageIndex!==o},_(be,Ss),Y(be,"_freeTextDefaultContent",""),Y(be,"_internalPadding",0),Y(be,"_defaultColor",null),Y(be,"_defaultFontSize",10),Y(be,"_type","freetext"),Y(be,"_editorType",te.FREETEXT);let ev=be;class sb{toSVGPath(){ke("Abstract method `toSVGPath` must be implemented.")}get box(){ke("Abstract getter `box` must be implemented.")}serialize(e,t){ke("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){ke("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){ke("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var fn,ti,Sl,bl,Ti,re,Po,Lo,dh,fh,xl,Cl,sr,ph,Jf,Zf,rt,Ru,rb,ob,ab,lb,ub,cb;const Wi=class Wi{constructor({x:e,y:t},i,s,r,o,a=0){_(this,rt);_(this,fn);_(this,ti,[]);_(this,Sl);_(this,bl);_(this,Ti,[]);_(this,re,new Float64Array(18));_(this,Po);_(this,Lo);_(this,dh);_(this,fh);_(this,xl);_(this,Cl);_(this,sr,[]);y(this,fn,i),y(this,Cl,r*s),y(this,bl,o),l(this,re).set([NaN,NaN,NaN,NaN,e,t],6),y(this,Sl,a),y(this,fh,l(Wi,ph)*s),y(this,dh,l(Wi,Zf)*s),y(this,xl,s),l(this,sr).push(e,t)}isEmpty(){return isNaN(l(this,re)[8])}add({x:e,y:t}){var M;y(this,Po,e),y(this,Lo,t);const[i,s,r,o]=l(this,fn);let[a,u,c,h]=l(this,re).subarray(8,12);const d=e-c,f=t-h,p=Math.hypot(d,f);if(p<l(this,dh))return!1;const m=p-l(this,fh),w=m/p,S=w*d,g=w*f;let v=a,E=u;a=c,u=h,c+=S,h+=g,(M=l(this,sr))==null||M.push(e,t);const b=-g/m,x=S/m,k=b*l(this,Cl),T=x*l(this,Cl);return l(this,re).set(l(this,re).subarray(2,8),0),l(this,re).set([c+k,h+T],4),l(this,re).set(l(this,re).subarray(14,18),12),l(this,re).set([c-k,h-T],16),isNaN(l(this,re)[6])?(l(this,Ti).length===0&&(l(this,re).set([a+k,u+T],2),l(this,Ti).push(NaN,NaN,NaN,NaN,(a+k-i)/r,(u+T-s)/o),l(this,re).set([a-k,u-T],14),l(this,ti).push(NaN,NaN,NaN,NaN,(a-k-i)/r,(u-T-s)/o)),l(this,re).set([v,E,a,u,c,h],6),!this.isEmpty()):(l(this,re).set([v,E,a,u,c,h],6),Math.abs(Math.atan2(E-u,v-a)-Math.atan2(g,S))<Math.PI/2?([a,u,c,h]=l(this,re).subarray(2,6),l(this,Ti).push(NaN,NaN,NaN,NaN,((a+c)/2-i)/r,((u+h)/2-s)/o),[a,u,v,E]=l(this,re).subarray(14,18),l(this,ti).push(NaN,NaN,NaN,NaN,((v+a)/2-i)/r,((E+u)/2-s)/o),!0):([v,E,a,u,c,h]=l(this,re).subarray(0,6),l(this,Ti).push(((v+5*a)/6-i)/r,((E+5*u)/6-s)/o,((5*a+c)/6-i)/r,((5*u+h)/6-s)/o,((a+c)/2-i)/r,((u+h)/2-s)/o),[c,h,a,u,v,E]=l(this,re).subarray(12,18),l(this,ti).push(((v+5*a)/6-i)/r,((E+5*u)/6-s)/o,((5*a+c)/6-i)/r,((5*u+h)/6-s)/o,((a+c)/2-i)/r,((u+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Ti),t=l(this,ti);if(isNaN(l(this,re)[6])&&!this.isEmpty())return A(this,rt,rb).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);A(this,rt,ab).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return A(this,rt,ob).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,o){return new hb(e,t,i,s,r,o)}getOutlines(){var d;const e=l(this,Ti),t=l(this,ti),i=l(this,re),[s,r,o,a]=l(this,fn),u=new Float64Array((((d=l(this,sr))==null?void 0:d.length)??0)+2);for(let f=0,p=u.length-2;f<p;f+=2)u[f]=(l(this,sr)[f]-s)/o,u[f+1]=(l(this,sr)[f+1]-r)/a;if(u[u.length-2]=(l(this,Po)-s)/o,u[u.length-1]=(l(this,Lo)-r)/a,isNaN(i[6])&&!this.isEmpty())return A(this,rt,lb).call(this,u);const c=new Float64Array(l(this,Ti).length+24+l(this,ti).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}h=A(this,rt,cb).call(this,c,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){c[h]=c[h+1]=NaN,h+=2;continue}c[h]=t[f+p],c[h+1]=t[f+p+1],h+=2}return A(this,rt,ub).call(this,c,h),this.newFreeDrawOutline(c,u,l(this,fn),l(this,xl),l(this,Sl),l(this,bl))}};fn=new WeakMap,ti=new WeakMap,Sl=new WeakMap,bl=new WeakMap,Ti=new WeakMap,re=new WeakMap,Po=new WeakMap,Lo=new WeakMap,dh=new WeakMap,fh=new WeakMap,xl=new WeakMap,Cl=new WeakMap,sr=new WeakMap,ph=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,rt=new WeakSet,Ru=function(){const e=l(this,re).subarray(4,6),t=l(this,re).subarray(16,18),[i,s,r,o]=l(this,fn);return[(l(this,Po)+(e[0]-t[0])/2-i)/r,(l(this,Lo)+(e[1]-t[1])/2-s)/o,(l(this,Po)+(t[0]-e[0])/2-i)/r,(l(this,Lo)+(t[1]-e[1])/2-s)/o]},rb=function(){const[e,t,i,s]=l(this,fn),[r,o,a,u]=A(this,rt,Ru).call(this);return`M${(l(this,re)[2]-e)/i} ${(l(this,re)[3]-t)/s} L${(l(this,re)[4]-e)/i} ${(l(this,re)[5]-t)/s} L${r} ${o} L${a} ${u} L${(l(this,re)[16]-e)/i} ${(l(this,re)[17]-t)/s} L${(l(this,re)[14]-e)/i} ${(l(this,re)[15]-t)/s} Z`},ob=function(e){const t=l(this,ti);e.push(`L${t[4]} ${t[5]} Z`)},ab=function(e){const[t,i,s,r]=l(this,fn),o=l(this,re).subarray(4,6),a=l(this,re).subarray(16,18),[u,c,h,d]=A(this,rt,Ru).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-i)/r} L${u} ${c} L${h} ${d} L${(a[0]-t)/s} ${(a[1]-i)/r}`)},lb=function(e){const t=l(this,re),[i,s,r,o]=l(this,fn),[a,u,c,h]=A(this,rt,Ru).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(d,e,l(this,fn),l(this,xl),l(this,Sl),l(this,bl))},ub=function(e,t){const i=l(this,ti);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},cb=function(e,t){const i=l(this,re).subarray(4,6),s=l(this,re).subarray(16,18),[r,o,a,u]=l(this,fn),[c,h,d,f]=A(this,rt,Ru).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/u,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/u],t),t+=24},_(Wi,ph,8),_(Wi,Jf,2),_(Wi,Zf,l(Wi,ph)+l(Wi,Jf));let Ff=Wi;var kl,Mo,os,gh,pn,mh,We,sn,Pu,Lu,db;class hb extends sb{constructor(t,i,s,r,o,a){super();_(this,sn);_(this,kl);_(this,Mo,null);_(this,os);_(this,gh);_(this,pn);_(this,mh);_(this,We);y(this,We,t),y(this,pn,i),y(this,kl,s),y(this,mh,r),y(this,os,o),y(this,gh,a),A(this,sn,db).call(this,a);const{x:u,y:c,width:h,height:d}=l(this,Mo);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-u)/h,t[f+1]=(t[f+1]-c)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-u)/h,i[f+1]=(i[f+1]-c)/d}toSVGPath(){const t=[`M${l(this,We)[4]} ${l(this,We)[5]}`];for(let i=6,s=l(this,We).length;i<s;i+=6){if(isNaN(l(this,We)[i])){t.push(`L${l(this,We)[i+4]} ${l(this,We)[i+5]}`);continue}t.push(`C${l(this,We)[i]} ${l(this,We)[i+1]} ${l(this,We)[i+2]} ${l(this,We)[i+3]} ${l(this,We)[i+4]} ${l(this,We)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const a=s-t,u=r-i;let c,h;switch(o){case 0:c=A(this,sn,Pu).call(this,l(this,We),t,r,a,-u),h=A(this,sn,Pu).call(this,l(this,pn),t,r,a,-u);break;case 90:c=A(this,sn,Lu).call(this,l(this,We),t,i,a,u),h=A(this,sn,Lu).call(this,l(this,pn),t,i,a,u);break;case 180:c=A(this,sn,Pu).call(this,l(this,We),s,i,-a,u),h=A(this,sn,Pu).call(this,l(this,pn),s,i,-a,u);break;case 270:c=A(this,sn,Lu).call(this,l(this,We),s,r,-a,-u),h=A(this,sn,Lu).call(this,l(this,pn),s,r,-a,-u);break}return{outline:Array.from(c),points:[Array.from(h)]}}get box(){return l(this,Mo)}newOutliner(t,i,s,r,o,a=0){return new Ff(t,i,s,r,o,a)}getNewOutline(t,i){const{x:s,y:r,width:o,height:a}=l(this,Mo),[u,c,h,d]=l(this,kl),f=o*h,p=a*d,m=s*h+u,w=r*d+c,S=this.newOutliner({x:l(this,pn)[0]*f+m,y:l(this,pn)[1]*p+w},l(this,kl),l(this,mh),t,l(this,gh),i??l(this,os));for(let g=2;g<l(this,pn).length;g+=2)S.add({x:l(this,pn)[g]*f+m,y:l(this,pn)[g+1]*p+w});return S.getOutlines()}get mustRemoveSelfIntersections(){return!0}}kl=new WeakMap,Mo=new WeakMap,os=new WeakMap,gh=new WeakMap,pn=new WeakMap,mh=new WeakMap,We=new WeakMap,sn=new WeakSet,Pu=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let u=0,c=t.length;u<c;u+=2)a[u]=i+t[u]*r,a[u+1]=s+t[u+1]*o;return a},Lu=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let u=0,c=t.length;u<c;u+=2)a[u]=i+t[u+1]*r,a[u+1]=s+t[u]*o;return a},db=function(t){const i=l(this,We);let s=i[4],r=i[5],o=s,a=r,u=s,c=r,h=s,d=r;const f=t?Math.max:Math.min;for(let g=6,v=i.length;g<v;g+=6){if(isNaN(i[g]))o=Math.min(o,i[g+4]),a=Math.min(a,i[g+5]),u=Math.max(u,i[g+4]),c=Math.max(c,i[g+5]),d<i[g+5]?(h=i[g+4],d=i[g+5]):d===i[g+5]&&(h=f(h,i[g+4]));else{const E=U.bezierBoundingBox(s,r,...i.slice(g,g+6));o=Math.min(o,E[0]),a=Math.min(a,E[1]),u=Math.max(u,E[2]),c=Math.max(c,E[3]),d<E[3]?(h=E[2],d=E[3]):d===E[3]&&(h=f(h,E[2]))}s=i[g+4],r=i[g+5]}const p=o-l(this,os),m=a-l(this,os),w=u-o+2*l(this,os),S=c-a+2*l(this,os);y(this,Mo,{x:p,y:m,width:w,height:S,lastPoint:[h,d]})};var vh,rr,ni,Gt,fb,qd,pb,gb,nv;class Ww{constructor(e,t=0,i=0,s=!0){_(this,Gt);_(this,vh);_(this,rr,[]);_(this,ni,[]);let r=1/0,o=-1/0,a=1/0,u=-1/0;const h=10**-4;for(const{x:g,y:v,width:E,height:b}of e){const x=Math.floor((g-t)/h)*h,k=Math.ceil((g+E+t)/h)*h,T=Math.floor((v-t)/h)*h,R=Math.ceil((v+b+t)/h)*h,M=[x,T,R,!0],I=[k,T,R,!1];l(this,rr).push(M,I),r=Math.min(r,x),o=Math.max(o,k),a=Math.min(a,T),u=Math.max(u,R)}const d=o-r+2*i,f=u-a+2*i,p=r-i,m=a-i,w=l(this,rr).at(s?-1:-2),S=[w[0],w[2]];for(const g of l(this,rr)){const[v,E,b]=g;g[0]=(v-p)/d,g[1]=(E-m)/f,g[2]=(b-m)/f}y(this,vh,{x:p,y:m,width:d,height:f,lastPoint:S})}getOutlines(){l(this,rr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,rr))t[3]?(e.push(...A(this,Gt,nv).call(this,t)),A(this,Gt,pb).call(this,t)):(A(this,Gt,gb).call(this,t),e.push(...A(this,Gt,nv).call(this,t)));return A(this,Gt,fb).call(this,e)}}vh=new WeakMap,rr=new WeakMap,ni=new WeakMap,Gt=new WeakSet,fb=function(e){const t=[],i=new Set;for(const o of e){const[a,u,c]=o;t.push([a,u,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const u=t[o][2],c=t[o+1][2];u.push(c),c.push(u),i.add(u),i.add(c)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,u,c,h,d]=o;i.delete(o);let f=a,p=u;for(r=[a,c],s.push(r);;){let m;if(i.has(h))m=h;else if(i.has(d))m=d;else break;i.delete(m),[a,u,c,h,d]=m,f!==a&&(r.push(f,p,a,p===u?u:c),f=a),p=p===u?c:u}r.push(f,p)}return new oL(s,l(this,vh))},qd=function(e){const t=l(this,ni);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1},pb=function([,e,t]){const i=A(this,Gt,qd).call(this,e);l(this,ni).splice(i,0,[e,t])},gb=function([,e,t]){const i=A(this,Gt,qd).call(this,e);for(let s=i;s<l(this,ni).length;s++){const[r,o]=l(this,ni)[s];if(r!==e)break;if(r===e&&o===t){l(this,ni).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=l(this,ni)[s];if(r!==e)break;if(r===e&&o===t){l(this,ni).splice(s,1);return}}},nv=function(e){const[t,i,s]=e,r=[[t,i,s]],o=A(this,Gt,qd).call(this,s);for(let a=0;a<o;a++){const[u,c]=l(this,ni)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(c<=f||p<=u)){if(f>=u){if(p>c)r[h][1]=c;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=u,p>c&&r.push([t,c,p])}}}return r};var yh,Tl;class oL extends sb{constructor(t,i){super();_(this,yh);_(this,Tl);y(this,Tl,t),y(this,yh,i)}toSVGPath(){const t=[];for(const i of l(this,Tl)){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],u=i[o+1];a===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const a=[],u=s-t,c=r-i;for(const h of l(this,Tl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*u,d[f+1]=r-h[f+1]*c;a.push(d)}return a}get box(){return l(this,yh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}yh=new WeakMap,Tl=new WeakMap;class iv extends Ff{newFreeDrawOutline(e,t,i,s,r,o){return new aL(e,t,i,s,r,o)}get classNamesForDrawing(){return["highlight","free"]}}class aL extends hb{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,r,o=0){return new iv(e,t,i,s,r,o)}}var ii,Io,Rl,et,wh,Pl,Ah,Eh,or,si,Ll,_h,Ae,sv,rv,ov,Hr,mb,Fs;const Kt=class Kt{constructor({editor:e=null,uiManager:t=null}){_(this,Ae);_(this,ii,null);_(this,Io,null);_(this,Rl);_(this,et,null);_(this,wh,!1);_(this,Pl,!1);_(this,Ah,null);_(this,Eh);_(this,or,null);_(this,si,null);_(this,Ll);var i;e?(y(this,Pl,!1),y(this,Ll,q.HIGHLIGHT_COLOR),y(this,Ah,e)):(y(this,Pl,!0),y(this,Ll,q.HIGHLIGHT_DEFAULT_COLOR)),y(this,si,(e==null?void 0:e._uiManager)||t),y(this,Eh,l(this,si)._eventBus),y(this,Rl,(e==null?void 0:e.color)||((i=l(this,si))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(Kt,_h)||y(Kt,_h,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ue(this,"_keyboardManager",new jh([[["Escape","mac+Escape"],Kt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Kt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Kt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Kt.prototype._moveToPrevious],[["Home","mac+Home"],Kt.prototype._moveToBeginning],[["End","mac+End"],Kt.prototype._moveToEnd]]))}renderButton(){const e=y(this,ii,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,si)._signal;e.addEventListener("click",A(this,Ae,Hr).bind(this),{signal:t}),e.addEventListener("keydown",A(this,Ae,ov).bind(this),{signal:t});const i=y(this,Io,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,Rl),e.append(i),e}renderMainDropdown(){const e=y(this,et,A(this,Ae,sv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,ii)){A(this,Ae,Hr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,Ae,rv).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ae,Fs)){A(this,Ae,Hr).call(this,e);return}if(e.target===l(this,ii)){(t=l(this,et).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,et))==null?void 0:t.firstChild)||e.target===l(this,ii)){l(this,Ae,Fs)&&this._hideDropdownFromKeyboard();return}l(this,Ae,Fs)||A(this,Ae,Hr).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ae,Fs)){A(this,Ae,Hr).call(this,e);return}(t=l(this,et).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ae,Fs)){A(this,Ae,Hr).call(this,e);return}(t=l(this,et).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,et))==null||e.classList.add("hidden"),(t=l(this,or))==null||t.abort(),y(this,or,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Pl)){if(!l(this,Ae,Fs)){(e=l(this,Ah))==null||e.unselect();return}this.hideDropdown(),l(this,ii).focus({preventScroll:!0,focusVisible:l(this,wh)})}}updateColor(e){if(l(this,Io)&&(l(this,Io).style.backgroundColor=e),!l(this,et))return;const t=l(this,si).highlightColors.values();for(const i of l(this,et).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,ii))==null||e.remove(),y(this,ii,null),y(this,Io,null),(t=l(this,et))==null||t.remove(),y(this,et,null)}};ii=new WeakMap,Io=new WeakMap,Rl=new WeakMap,et=new WeakMap,wh=new WeakMap,Pl=new WeakMap,Ah=new WeakMap,Eh=new WeakMap,or=new WeakMap,si=new WeakMap,Ll=new WeakMap,_h=new WeakMap,Ae=new WeakSet,sv=function(){const e=document.createElement("div"),t=l(this,si)._signal;e.addEventListener("contextmenu",Bn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of l(this,si).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",l(Kt,_h)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,Rl)),r.addEventListener("click",A(this,Ae,rv).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",A(this,Ae,ov).bind(this),{signal:t}),e},rv=function(e,t){t.stopPropagation(),l(this,Eh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Ll),value:e})},ov=function(e){Kt._keyboardManager.exec(this,e)},Hr=function(e){if(l(this,Ae,Fs)){this.hideDropdown();return}if(y(this,wh,e.detail===0),l(this,or)||(y(this,or,new AbortController),window.addEventListener("pointerdown",A(this,Ae,mb).bind(this),{signal:l(this,si).combinedSignal(l(this,or))})),l(this,et)){l(this,et).classList.remove("hidden");return}const t=y(this,et,A(this,Ae,sv).call(this));l(this,ii).append(t)},mb=function(e){var t;(t=l(this,et))!=null&&t.contains(e.target)||this.hideDropdown()},Fs=function(){return l(this,et)&&!l(this,et).classList.contains("hidden")},_(Kt,_h,null);let Df=Kt;var Ml,Sh,as,Fo,Il,Rn,bh,xh,Do,ri,Pt,Zt,Fl,ls,tt,Dl,Pn,Ch,Z,av,Kd,vb,yb,wb,lv,zr,Dn,ya,Ab,Qd,Mu,Eb,_b,Sb,bb,xb;const he=class he extends ye{constructor(t){super({...t,name:"highlightEditor"});_(this,Z);_(this,Ml,null);_(this,Sh,0);_(this,as);_(this,Fo,null);_(this,Il,null);_(this,Rn,null);_(this,bh,null);_(this,xh,0);_(this,Do,null);_(this,ri,null);_(this,Pt,null);_(this,Zt,!1);_(this,Fl,null);_(this,ls);_(this,tt,null);_(this,Dl,"");_(this,Pn);_(this,Ch,"");this.color=t.color||he._defaultColor,y(this,Pn,t.thickness||he._defaultThickness),y(this,ls,t.opacity||he._defaultOpacity),y(this,as,t.boxes||null),y(this,Ch,t.methodOfCreation||""),y(this,Dl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(y(this,Zt,!0),A(this,Z,Kd).call(this,t),A(this,Z,zr).call(this)):l(this,as)&&(y(this,Ml,t.anchorNode),y(this,Sh,t.anchorOffset),y(this,bh,t.focusNode),y(this,xh,t.focusOffset),A(this,Z,av).call(this),A(this,Z,zr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=he.prototype;return ue(this,"_keyboardManager",new jh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Zt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Pn),methodOfCreation:l(this,Ch)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;ye.initialize(t,i),he._defaultColor||(he._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case q.HIGHLIGHT_DEFAULT_COLOR:he._defaultColor=i;break;case q.HIGHLIGHT_THICKNESS:he._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Fl)}updateParams(t,i){switch(t){case q.HIGHLIGHT_COLOR:A(this,Z,vb).call(this,i);break;case q.HIGHLIGHT_THICKNESS:A(this,Z,yb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[q.HIGHLIGHT_DEFAULT_COLOR,he._defaultColor],[q.HIGHLIGHT_THICKNESS,he._defaultThickness]]}get propertiesToUpdate(){return[[q.HIGHLIGHT_COLOR,this.color||he._defaultColor],[q.HIGHLIGHT_THICKNESS,l(this,Pn)||he._defaultThickness],[q.HIGHLIGHT_FREE,l(this,Zt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(y(this,Il,new Df({editor:this})),t.addColorPicker(l(this,Il))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Z,Mu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,A(this,Z,Mu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){A(this,Z,lv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Z,zr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?A(this,Z,lv).call(this):t&&(A(this,Z,zr).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,o,a;const{drawLayer:i}=this.parent;let s;l(this,Zt)?(t=(t-this.rotation+360)%360,s=A(r=he,Dn,ya).call(r,l(this,ri).box,t)):s=A(o=he,Dn,ya).call(o,this,t),i.rotate(l(this,Pt),t),i.rotate(l(this,tt),t),i.updateBox(l(this,Pt),s),i.updateBox(l(this,tt),A(a=he,Dn,ya).call(a,l(this,Rn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,Dl)&&(t.setAttribute("aria-label",l(this,Dl)),t.setAttribute("role","mark")),l(this,Zt)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,Z,Ab).bind(this),{signal:this._uiManager._signal});const i=y(this,Do,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,Fo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Mf(this,l(this,Do),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,tt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,tt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Z,Qd).call(this,!0);break;case 1:case 3:A(this,Z,Qd).call(this,!1);break}}select(){var t,i;super.select(),l(this,tt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,tt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,tt),"selected"))}unselect(){var t;super.unselect(),l(this,tt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,tt),"selected"),l(this,Zt)||A(this,Z,Qd).call(this,!1))}get _mustFixPosition(){return!l(this,Zt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,Pt),t),this.parent.drawLayer.show(l(this,tt),t))}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:a,y:u,width:c,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=w=>{w.preventDefault(),w.stopPropagation()},m=w=>{d.abort(),A(this,Dn,bb).call(this,t,w)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Bn,{signal:f}),s.addEventListener("pointermove",A(this,Dn,Sb).bind(this,t),{signal:f}),this._freeHighlight=new iv({x:r,y:o},[a,u,c,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,s){var w,S,g,v;let r=null;if(t instanceof KS){const{data:{quadPoints:E,rect:b,rotation:x,id:k,color:T,opacity:R,popupRef:M},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:te.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:E,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:x,id:k,deleted:!1,popupRef:M}}else if(t instanceof Yy){const{data:{inkLists:E,rect:b,rotation:x,id:k,color:T,borderStyle:{rawWidth:R},popupRef:M},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:te.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:E,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:x,id:k,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:u,opacity:c}=t,h=await super.deserialize(t,i,s);h.color=U.makeHexColor(...o),y(h,ls,c||1),u&&y(h,Pn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const E=y(h,as,[]);for(let b=0;b<a.length;b+=8)E.push({x:(a[b]-p)/d,y:1-(a[b+1]-m)/f,width:(a[b+2]-a[b])/d,height:(a[b+1]-a[b+5])/f});A(w=h,Z,av).call(w),A(S=h,Z,zr).call(S),h.rotate(h.rotation)}else if(u){y(h,Zt,!0);const E=u[0],b={x:E[0]-p,y:f-(E[1]-m)},x=new iv(b,[0,0,d,f],1,l(h,Pn)/2,!0,.001);for(let R=0,M=E.length;R<M;R+=2)b.x=E[R]-p,b.y=f-(E[R+1]-m),x.add(b);const{id:k,clipPathId:T}=i.drawLayer.draw(x,h.color,h._defaultOpacity,!0);A(g=h,Z,Kd).call(g,{highlightOutlines:x.getOutlines(),highlightId:k,clipPathId:T}),A(v=h,Z,zr).call(v)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=ye._colorManager.convert(this.color),r={annotationType:te.HIGHLIGHT,color:s,opacity:l(this,ls),thickness:l(this,Pn),quadPoints:A(this,Z,Eb).call(this),outlines:A(this,Z,_b).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:A(this,Z,Mu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Z,xb).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ml=new WeakMap,Sh=new WeakMap,as=new WeakMap,Fo=new WeakMap,Il=new WeakMap,Rn=new WeakMap,bh=new WeakMap,xh=new WeakMap,Do=new WeakMap,ri=new WeakMap,Pt=new WeakMap,Zt=new WeakMap,Fl=new WeakMap,ls=new WeakMap,tt=new WeakMap,Dl=new WeakMap,Pn=new WeakMap,Ch=new WeakMap,Z=new WeakSet,av=function(){const t=new Ww(l(this,as),.001);y(this,ri,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,ri).box;const i=new Ww(l(this,as),.0025,.001,this._uiManager.direction==="ltr");y(this,Rn,i.getOutlines());const{lastPoint:s}=l(this,Rn).box;y(this,Fl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Kd=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var d,f;if(y(this,ri,t),y(this,Rn,t.getNewOutline(l(this,Pn)/2+1.5,.0025)),i>=0)y(this,Pt,i),y(this,Fo,s),this.parent.drawLayer.finalizeLine(i,t),y(this,tt,this.parent.drawLayer.drawOutline(l(this,Rn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,Pt),t),this.parent.drawLayer.updateBox(l(this,Pt),A(d=he,Dn,ya).call(d,l(this,ri).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,tt),l(this,Rn)),this.parent.drawLayer.updateBox(l(this,tt),A(f=he,Dn,ya).call(f,l(this,Rn).box,p))}const{x:o,y:a,width:u,height:c}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=u,this.height=c;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=u*m/p,this.height=c*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=u,this.height=c;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=u*m/p,this.height=c*p/m;break}}const{lastPoint:h}=l(this,Rn).box;y(this,Fl,[(h[0]-o)/u,(h[1]-a)/c])},vb=function(t){const i=(o,a)=>{var u,c,h;this.color=o,(u=this.parent)==null||u.drawLayer.changeColor(l(this,Pt),o),(c=l(this,Il))==null||c.updateColor(o),y(this,ls,a),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,Pt),a)},s=this.color,r=l(this,ls);this.addCommands({cmd:i.bind(this,t,he._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},yb=function(t){const i=l(this,Pn),s=r=>{y(this,Pn,r),A(this,Z,wb).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},wb=function(t){if(!l(this,Zt))return;A(this,Z,Kd).call(this,{highlightOutlines:l(this,ri).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},lv=function(){l(this,Pt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Pt)),y(this,Pt,null),this.parent.drawLayer.remove(l(this,tt)),y(this,tt,null))},zr=function(t=this.parent){l(this,Pt)===null&&({id:Ot(this,Pt)._,clipPathId:Ot(this,Fo)._}=t.drawLayer.draw(l(this,ri),this.color,l(this,ls)),y(this,tt,t.drawLayer.drawOutline(l(this,Rn))),l(this,Do)&&(l(this,Do).style.clipPath=l(this,Fo)))},Dn=new WeakSet,ya=function({x:t,y:i,width:s,height:r},o){switch(o){case 90:return{x:1-i-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-t-s,width:r,height:s}}return{x:t,y:i,width:s,height:r}},Ab=function(t){he._keyboardManager.exec(this,t)},Qd=function(t){if(!l(this,Ml))return;const i=window.getSelection();t?i.setPosition(l(this,Ml),l(this,Sh)):i.setPosition(l(this,bh),l(this,xh))},Mu=function(){return l(this,Zt)?this.rotation:0},Eb=function(){if(l(this,Zt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=l(this,as),a=new Float32Array(o.length*8);let u=0;for(const{x:c,y:h,width:d,height:f}of o){const p=c*t+s,m=(1-h-f)*i+r;a[u]=a[u+4]=p,a[u+1]=a[u+3]=m,a[u+2]=a[u+6]=p+d*t,a[u+5]=a[u+7]=m+f*i,u+=8}return a},_b=function(t){return l(this,ri).serialize(t,A(this,Z,Mu).call(this))},Sb=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},bb=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xb=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},_(he,Dn),Y(he,"_defaultColor",null),Y(he,"_defaultOpacity",1),Y(he,"_defaultThickness",12),Y(he,"_type","highlight"),Y(he,"_editorType",te.HIGHLIGHT),Y(he,"_freeHighlightId",-1),Y(he,"_freeHighlight",null),Y(he,"_freeHighlightClipId","");let Nf=he;var No,Oo,Ri,us,Ln,jo,Ho,zo,cs,Nl,Bo,Uo,ar,N,Cb,kb,Tb,Rb,cv,Pb,hv,Lb,Mb,Ib,Fb,Db,Br,dv,fv,pv,Jd,Zd,wa,gv,ef,Rs,Nb,mv,Ob,jb,vv,tf,Iu;const Me=class Me extends ye{constructor(t){super({...t,name:"inkEditor"});_(this,N);_(this,No,0);_(this,Oo,0);_(this,Ri,null);_(this,us,new Path2D);_(this,Ln,!1);_(this,jo,null);_(this,Ho,!1);_(this,zo,!1);_(this,cs,null);_(this,Nl,null);_(this,Bo,0);_(this,Uo,0);_(this,ar,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){ye.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case q.INK_THICKNESS:Me._defaultThickness=i;break;case q.INK_COLOR:Me._defaultColor=i;break;case q.INK_OPACITY:Me._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case q.INK_THICKNESS:A(this,N,Cb).call(this,i);break;case q.INK_COLOR:A(this,N,kb).call(this,i);break;case q.INK_OPACITY:A(this,N,Tb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[q.INK_THICKNESS,Me._defaultThickness],[q.INK_COLOR,Me._defaultColor||ye._defaultLineColor],[q.INK_OPACITY,Math.round(Me._defaultOpacity*100)]]}get propertiesToUpdate(){return[[q.INK_THICKNESS,this.thickness||Me._defaultThickness],[q.INK_COLOR,this.color||Me._defaultColor||ye._defaultLineColor],[q.INK_OPACITY,Math.round(100*(this.opacity??Me._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(A(this,N,Jd).call(this),A(this,N,Zd).call(this)),this.isAttachedToDOM||(this.parent.add(this),A(this,N,wa).call(this)),A(this,N,Iu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,Ri)&&(clearTimeout(l(this,Ri)),y(this,Ri,null)),(t=l(this,cs))==null||t.disconnect(),y(this,cs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){l(this,Ln)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,A(this,N,dv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),A(this,N,fv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,Ln)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),y(this,Ln,!0),this.div.classList.add("disabled"),A(this,N,Iu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,Ln)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),A(this,N,Pb).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),A(this,N,hv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),A(this,N,pv).call(this,t)}canvasPointerleave(t){A(this,N,pv).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,Ln)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,a]=A(this,N,Rb).call(this);if(this.setAt(s,r,0,0),this.setDims(o,a),A(this,N,Jd).call(this),this.width){const[u,c]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*c),this.setAt(t*u,i*c,this.width*u,this.height*c),y(this,zo,!0),A(this,N,wa).call(this),this.setDims(this.width*u,this.height*c),A(this,N,Br).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return A(this,N,Zd).call(this),this.div}setDimensions(t,i){const s=Math.round(t),r=Math.round(i);if(l(this,Bo)===s&&l(this,Uo)===r)return;y(this,Bo,s),y(this,Uo,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=i/a,this.fixAndSetPosition(),l(this,Ln)&&A(this,N,gv).call(this,t,i),A(this,N,wa).call(this),A(this,N,Br).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,s){var S,g,v;if(t instanceof Yy)return null;const r=await super.deserialize(t,i,s);r.thickness=t.thickness,r.color=U.makeHexColor(...t.color),r.opacity=t.opacity;const[o,a]=r.pageDimensions,u=r.width*o,c=r.height*a,h=r.parentScale,d=t.thickness/2;y(r,Ln,!0),y(r,Bo,Math.round(u)),y(r,Uo,Math.round(c));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:E}of f){E=A(S=Me,Rs,Ob).call(S,E,p,m);const b=[];r.paths.push(b);let x=h*(E[0]-d),k=h*(E[1]-d);for(let R=2,M=E.length;R<M;R+=6){const I=h*(E[R]-d),D=h*(E[R+1]-d),Q=h*(E[R+2]-d),G=h*(E[R+3]-d),V=h*(E[R+4]-d),J=h*(E[R+5]-d);b.push([[x,k],[I,D],[Q,G],[V,J]]),x=V,k=J}const T=A(this,Rs,Nb).call(this,b);r.bezierPath2D.push(T)}const w=A(g=r,N,vv).call(g);return y(r,Oo,Math.max(ye.MIN_SIZE,w[2]-w[0])),y(r,No,Math.max(ye.MIN_SIZE,w[3]-w[1])),A(v=r,N,gv).call(v,u,c),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=ye._colorManager.convert(this.ctx.strokeStyle);return{annotationType:te.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:A(this,N,jb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};No=new WeakMap,Oo=new WeakMap,Ri=new WeakMap,us=new WeakMap,Ln=new WeakMap,jo=new WeakMap,Ho=new WeakMap,zo=new WeakMap,cs=new WeakMap,Nl=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,ar=new WeakMap,N=new WeakSet,Cb=function(t){const i=r=>{this.thickness=r,A(this,N,Iu).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},kb=function(t){const i=r=>{this.color=r,A(this,N,Br).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Tb=function(t){const i=r=>{this.opacity=r,A(this,N,Br).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Rb=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},cv=function(){const{ctx:t,color:i,opacity:s,thickness:r,parentScale:o,scaleFactor:a}=this;t.lineWidth=r*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${RR(s)}`},Pb=function(t,i){this.canvas.addEventListener("contextmenu",Bn,{signal:this._uiManager._signal}),A(this,N,fv).call(this),y(this,jo,new AbortController);const s=this._uiManager.combinedSignal(l(this,jo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,zo)||(y(this,zo,!0),A(this,N,wa).call(this),this.thickness||(this.thickness=Me._defaultThickness),this.color||(this.color=Me._defaultColor||ye._defaultLineColor),this.opacity??(this.opacity=Me._defaultOpacity)),this.currentPath.push([t,i]),y(this,Ho,!1),A(this,N,cv).call(this),y(this,ar,()=>{A(this,N,Ib).call(this),l(this,ar)&&window.requestAnimationFrame(l(this,ar))}),window.requestAnimationFrame(l(this,ar))},hv=function(t,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===r)return;const o=this.currentPath;let a=l(this,us);if(o.push([t,i]),y(this,Ho,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,i);return}o.length===3&&(y(this,us,a=new Path2D),a.moveTo(...o[0])),A(this,N,Fb).call(this,a,...o.at(-3),...o.at(-2),t,i)},Lb=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,us).lineTo(...t)},Mb=function(t,i){y(this,ar,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),A(this,N,hv).call(this,t,i),A(this,N,Lb).call(this);let s;if(this.currentPath.length!==1)s=A(this,N,Db).call(this);else{const c=[t,i];s=[[c,c.slice(),c.slice(),c]]}const r=l(this,us),o=this.currentPath;this.currentPath=[],y(this,us,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(A(this,N,Jd).call(this),A(this,N,Zd).call(this)),A(this,N,Iu).call(this))};this.addCommands({cmd:a,undo:u,mustExec:!0})},Ib=function(){if(!l(this,Ho))return;y(this,Ho,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(a=>a[0]),r=i.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,us)),o.restore()},Fb=function(t,i,s,r,o,a,u){const c=(i+r)/2,h=(s+o)/2,d=(r+a)/2,f=(o+u)/2;t.bezierCurveTo(c+2*(r-c)/3,h+2*(o-h)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},Db=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[r,o]=t[0];for(s=1;s<t.length-2;s++){const[p,m]=t[s],[w,S]=t[s+1],g=(p+w)/2,v=(m+S)/2,E=[r+2*(p-r)/3,o+2*(m-o)/3],b=[g+2*(p-g)/3,v+2*(m-v)/3];i.push([[r,o],E,b,[g,v]]),[r,o]=[g,v]}const[a,u]=t[s],[c,h]=t[s+1],d=[r+2*(a-r)/3,o+2*(u-o)/3],f=[c+2*(a-c)/3,h+2*(u-h)/3];return i.push([[r,o],d,f,[c,h]]),i},Br=function(){if(this.isEmpty()){A(this,N,ef).call(this);return}A(this,N,cv).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),A(this,N,ef).call(this);for(const s of this.bezierPath2D)i.stroke(s)},dv=function(){if(l(this,Nl))return;y(this,Nl,new AbortController);const t=this._uiManager.combinedSignal(l(this,Nl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},fv=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},pv=function(t){var i;(i=l(this,jo))==null||i.abort(),y(this,jo,null),A(this,N,dv).call(this),l(this,Ri)&&clearTimeout(l(this,Ri)),y(this,Ri,setTimeout(()=>{y(this,Ri,null),this.canvas.removeEventListener("contextmenu",Bn)},10)),A(this,N,Mb).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Jd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Zd=function(){y(this,cs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,cs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,cs))==null||t.disconnect(),y(this,cs,null)},{once:!0})},wa=function(){if(!l(this,zo))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),A(this,N,ef).call(this)},gv=function(t,i){const s=A(this,N,tf).call(this),r=(t-s)/l(this,Oo),o=(i-s)/l(this,No);this.scaleFactor=Math.min(r,o)},ef=function(){const t=A(this,N,tf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Rs=new WeakSet,Nb=function(t){const i=new Path2D;for(let s=0,r=t.length;s<r;s++){const[o,a,u,c]=t[s];s===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],u[0],u[1],c[0],c[1])}return i},mv=function(t,i,s){const[r,o,a,u]=i;switch(s){case 0:for(let c=0,h=t.length;c<h;c+=2)t[c]+=r,t[c+1]=u-t[c+1];break;case 90:for(let c=0,h=t.length;c<h;c+=2){const d=t[c];t[c]=t[c+1]+r,t[c+1]=d+o}break;case 180:for(let c=0,h=t.length;c<h;c+=2)t[c]=a-t[c],t[c+1]+=o;break;case 270:for(let c=0,h=t.length;c<h;c+=2){const d=t[c];t[c]=a-t[c+1],t[c+1]=u-d}break;default:throw new Error("Invalid rotation")}return t},Ob=function(t,i,s){const[r,o,a,u]=i;switch(s){case 0:for(let c=0,h=t.length;c<h;c+=2)t[c]-=r,t[c+1]=u-t[c+1];break;case 90:for(let c=0,h=t.length;c<h;c+=2){const d=t[c];t[c]=t[c+1]-o,t[c+1]=d-r}break;case 180:for(let c=0,h=t.length;c<h;c+=2)t[c]=a-t[c],t[c+1]-=o;break;case 270:for(let c=0,h=t.length;c<h;c+=2){const d=t[c];t[c]=u-t[c+1],t[c+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},jb=function(t,i,s,r){var h,d;const o=[],a=this.thickness/2,u=t*i+a,c=t*s+a;for(const f of this.paths){const p=[],m=[];for(let w=0,S=f.length;w<S;w++){const[g,v,E,b]=f[w];if(g[0]===b[0]&&g[1]===b[1]&&S===1){const G=t*g[0]+u,V=t*g[1]+c;p.push(G,V),m.push(G,V);break}const x=t*g[0]+u,k=t*g[1]+c,T=t*v[0]+u,R=t*v[1]+c,M=t*E[0]+u,I=t*E[1]+c,D=t*b[0]+u,Q=t*b[1]+c;w===0&&(p.push(x,k),m.push(x,k)),p.push(T,R,M,I,D,Q),m.push(T,R),w===S-1&&m.push(D,Q)}o.push({bezier:A(h=Me,Rs,mv).call(h,p,r,this.rotation),points:A(d=Me,Rs,mv).call(d,m,r,this.rotation)})}return o},vv=function(){let t=1/0,i=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[a,u,c,h]of o){const d=U.bezierBoundingBox(...a,...u,...c,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),i=Math.max(i,d[2]),r=Math.max(r,d[3])}return[t,s,i,r]},tf=function(){return l(this,Ln)?Math.ceil(this.thickness*this.parentScale):0},Iu=function(t=!1){if(this.isEmpty())return;if(!l(this,Ln)){A(this,N,Br).call(this);return}const i=A(this,N,vv).call(this),s=A(this,N,tf).call(this);y(this,Oo,Math.max(ye.MIN_SIZE,i[2]-i[0])),y(this,No,Math.max(ye.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+l(this,Oo)*this.scaleFactor),o=Math.ceil(s+l(this,No)*this.scaleFactor),[a,u]=this.parentDimensions;this.width=r/a,this.height=o/u,this.setAspectRatio(r,o);const c=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],A(this,N,wa).call(this),A(this,N,Br).call(this),y(this,Bo,r),y(this,Uo,o),this.setDims(r,o);const d=t?s/this.scaleFactor/2:0;this.translate(c-this.translationX-d,h-this.translationY-d)},_(Me,Rs),Y(Me,"_defaultColor",null),Y(Me,"_defaultOpacity",1),Y(Me,"_defaultThickness",1),Y(Me,"_type","ink"),Y(Me,"_editorType",te.INK);let uv=Me;var Fe,yt,lr,hs,ur,Ol,Pi,ds,Li,gn,jl,ae,Fu,Du,nf,wv,Hb,sf,Av,rf,zb,Bb;const Yu=class Yu extends ye{constructor(t){super({...t,name:"stampEditor"});_(this,ae);_(this,Fe,null);_(this,yt,null);_(this,lr,null);_(this,hs,null);_(this,ur,null);_(this,Ol,"");_(this,Pi,null);_(this,ds,null);_(this,Li,null);_(this,gn,!1);_(this,jl,!1);y(this,hs,t.bitmapUrl),y(this,ur,t.bitmapFile)}static initialize(t,i){ye.initialize(t,i)}static get supportedTypes(){return ue(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ue(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(te.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const c=u.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t,i;l(this,yt)&&(y(this,Fe,null),this._uiManager.imageManager.deleteId(l(this,yt)),(t=l(this,Pi))==null||t.remove(),y(this,Pi,null),(i=l(this,ds))==null||i.disconnect(),y(this,ds,null),l(this,Li)&&(clearTimeout(l(this,Li)),y(this,Li,null))),super.remove()}rebuild(){if(!this.parent){l(this,yt)&&A(this,ae,nf).call(this);return}super.rebuild(),this.div!==null&&(l(this,yt)&&l(this,Pi)===null&&A(this,ae,nf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,lr)||l(this,Fe)||l(this,hs)||l(this,ur)||l(this,yt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Fe)?A(this,ae,wv).call(this):A(this,ae,nf).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,i,s=!1){var p;t||(t=224);const{width:r,height:o}=l(this,Fe),a=new pm;let u=l(this,Fe),c=r,h=o,d=null;if(i){if(r>i||o>i){const R=Math.min(i/r,i/o);c=Math.floor(r*R),h=Math.floor(o*R)}d=document.createElement("canvas");const m=d.width=Math.ceil(c*a.sx),w=d.height=Math.ceil(h*a.sy);l(this,gn)||(u=A(this,ae,sf).call(this,m,w));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");const E=15,b=E*a.sx,x=E*a.sy,k=new OffscreenCanvas(b*2,x*2),T=k.getContext("2d");T.fillStyle=g,T.fillRect(0,0,b*2,x*2),T.fillStyle=v,T.fillRect(0,0,b,x),T.fillRect(b,x,b,x),S.fillStyle=S.createPattern(k,"repeat"),S.fillRect(0,0,m,w),S.drawImage(u,0,0,u.width,u.height,0,0,m,w)}let f=null;if(s){let m,w;if(a.symmetric&&u.width<t&&u.height<t)m=u.width,w=u.height;else if(u=l(this,Fe),r>t||o>t){const v=Math.min(t/r,t/o);m=Math.floor(r*v),w=Math.floor(o*v),l(this,gn)||(u=A(this,ae,sf).call(this,m,w))}const g=new OffscreenCanvas(m,w).getContext("2d",{willReadFrequently:!0});g.drawImage(u,0,0,u.width,u.height,0,0,m,w),f={width:m,height:w,data:g.getImageData(0,0,m,w).data}}return{canvas:d,width:c,height:h,imageData:f}}getImageForAltText(){return l(this,Pi)}static async deserialize(t,i,s){var w;let r=null;if(t instanceof QS){const{data:{rect:S,rotation:g,id:v,structParent:E,popupRef:b},container:x,parent:{page:{pageNumber:k}}}=t,T=x.querySelector("canvas"),R=s.imageManager.getFromCanvas(x.id,T);T.remove();const M=((w=await i._structTree.getAriaAttributes(`${Oy}${v}`))==null?void 0:w.get("aria-label"))||"";r=t={annotationType:te.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:k-1,rect:S.slice(0),rotation:g,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:b}}const o=await super.deserialize(t,i,s),{rect:a,bitmap:u,bitmapUrl:c,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&s.imageManager.isValidId(h)?(y(o,yt,h),u&&y(o,Fe,u)):y(o,hs,c),y(o,gn,d);const[p,m]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/m,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,y(o,jl,!!r),o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:te.STAMP,bitmapId:l(this,yt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,gn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=A(this,ae,rf).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=A(this,ae,Bb).call(this,s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const a=l(this,gn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(l(this,yt)))i.stamps.set(l(this,yt),{area:a,serialized:s}),s.bitmap=A(this,ae,rf).call(this,!1);else if(l(this,gn)){const u=i.stamps.get(l(this,yt));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=A(this,ae,rf).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Fe=new WeakMap,yt=new WeakMap,lr=new WeakMap,hs=new WeakMap,ur=new WeakMap,Ol=new WeakMap,Pi=new WeakMap,ds=new WeakMap,Li=new WeakMap,gn=new WeakMap,jl=new WeakMap,ae=new WeakSet,Fu=function(t,i=!1){if(!t){this.remove();return}y(this,Fe,t.bitmap),i||(y(this,yt,t.id),y(this,gn,t.isSvg)),t.file&&y(this,Ol,t.file.name),A(this,ae,wv).call(this)},Du=function(){if(y(this,lr,null),this._uiManager.enableWaiting(!1),!!l(this,Pi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},nf=function(){if(l(this,yt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,yt)).then(s=>A(this,ae,Fu).call(this,s,!0)).finally(()=>A(this,ae,Du).call(this));return}if(l(this,hs)){const s=l(this,hs);y(this,hs,null),this._uiManager.enableWaiting(!0),y(this,lr,this._uiManager.imageManager.getFromUrl(s).then(r=>A(this,ae,Fu).call(this,r)).finally(()=>A(this,ae,Du).call(this)));return}if(l(this,ur)){const s=l(this,ur);y(this,ur,null),this._uiManager.enableWaiting(!0),y(this,lr,this._uiManager.imageManager.getFromFile(s).then(r=>A(this,ae,Fu).call(this,r)).finally(()=>A(this,ae,Du).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Yu.supportedTypesStr;const i=this._uiManager._signal;y(this,lr,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,ae,Fu).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>A(this,ae,Du).call(this))),t.click()},wv=function(){const{div:t}=this;let{width:i,height:s}=l(this,Fe);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const d=Math.min(a*r/i,a*o/s);i*=d,s*=d}const[u,c]=this.parentDimensions;this.setDims(i*u/r,s*c/o),this._uiManager.enableWaiting(!1);const h=y(this,Pi,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,ae,Av).call(this,i,s),A(this,ae,zb).call(this),l(this,jl)||(this.parent.addUndoableEditor(this),y(this,jl,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Ol)&&h.setAttribute("aria-label",l(this,Ol))},Hb=function(t,i){var a;const[s,r]=this.parentDimensions;this.width=t/s,this.height=i/r,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,Li)!==null&&clearTimeout(l(this,Li)),y(this,Li,setTimeout(()=>{y(this,Li,null),A(this,ae,Av).call(this,t,i)},200))},sf=function(t,i){const{width:s,height:r}=l(this,Fe);let o=s,a=r,u=l(this,Fe);for(;o>2*t||a>2*i;){const c=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(u,0,0,c,h,0,0,o,a),u=d.transferToImageBitmap()}return u},Av=function(t,i){const s=new pm,r=Math.ceil(t*s.sx),o=Math.ceil(i*s.sy),a=l(this,Pi);if(!a||a.width===r&&a.height===o)return;a.width=r,a.height=o;const u=l(this,gn)?l(this,Fe):A(this,ae,sf).call(this,r,o),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(u,0,0,u.width,u.height,0,0,r,o)},rf=function(t){if(t){if(l(this,gn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,yt));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,Fe),i.getContext("2d").drawImage(l(this,Fe),0,0),i.toDataURL()}if(l(this,gn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Cr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Cr.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Fe),0,0,l(this,Fe).width,l(this,Fe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Fe))},zb=function(){this._uiManager._signal&&(y(this,ds,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&A(this,ae,Hb).call(this,i.width,i.height)})),l(this,ds).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,ds))==null||t.disconnect(),y(this,ds,null)},{once:!0}))},Bb=function(t){var c;const{rect:i,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((h,d)=>Math.abs(h-i[d])<1),a=t.pageIndex===s,u=(((c=t.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:o&&a&&u,isSameAltText:u}},Y(Yu,"_type","stamp"),Y(Yu,"_editorType",te.STAMP);let yv=Yu;var $o,Hl,Mi,cr,fs,mn,hr,zl,Bl,Lt,ps,W,dr,Et,Ub,_v,Sv,bv,of;const Wn=class Wn{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:u,viewport:c,l10n:h}){_(this,Et);_(this,$o);_(this,Hl,!1);_(this,Mi,null);_(this,cr,null);_(this,fs,null);_(this,mn,new Map);_(this,hr,!1);_(this,zl,!1);_(this,Bl,!1);_(this,Lt,null);_(this,ps,null);_(this,W);const d=[...l(Wn,dr).values()];if(!Wn._initialized){Wn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),y(this,W,e),this.pageIndex=t,this.div=i,y(this,$o,r),y(this,Mi,o),this.viewport=c,y(this,Lt,u),this.drawLayer=a,this._structTree=s,l(this,W).addLayer(this)}get isEmpty(){return l(this,mn).size===0}get isInvisible(){return this.isEmpty&&l(this,W).getMode()===te.NONE}updateToolbar(e){l(this,W).updateToolbar(e)}updateMode(e=l(this,W).getMode()){switch(A(this,Et,of).call(this),e){case te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case te.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(Wn,dr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Lt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,W).getMode()!==te.INK)return;if(!e){for(const i of l(this,mn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,W).setEditingState(e)}addCommands(e){l(this,W).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Mi))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,mn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,W).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,Mi))return;const t=l(this,Mi).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,W).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;y(this,Bl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,mn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,Mi)){const r=l(this,Mi).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,W).isDeletedAnnotationElement(a))continue;let u=t.get(a);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=e.get(a),u&&(l(this,W).addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}A(this,Et,of).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of l(Wn,dr).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,Bl,!1)}getEditableAnnotation(e){var t;return((t=l(this,Mi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,W).getActive()!==e&&l(this,W).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Lt))!=null&&e.div&&!l(this,ps)){y(this,ps,new AbortController);const t=l(this,W).combinedSignal(l(this,ps));l(this,Lt).div.addEventListener("pointerdown",A(this,Et,Ub).bind(this),{signal:t}),l(this,Lt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Lt))!=null&&e.div&&l(this,ps)&&(l(this,ps).abort(),y(this,ps,null),l(this,Lt).div.classList.remove("highlighting"))}enableClick(){if(l(this,cr))return;y(this,cr,new AbortController);const e=l(this,W).combinedSignal(l(this,cr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,cr))==null||e.abort(),y(this,cr,null)}attach(e){l(this,mn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,W).isDeletedAnnotationElement(t)&&l(this,W).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,mn).delete(e.id),(t=l(this,$o))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,Bl)&&e.annotationElementId&&l(this,W).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,W).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,zl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,W).addDeletedAnnotationElement(e.annotationElementId),ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,W).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,W).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,fs)&&(e._focusEventsAllowed=!1,y(this,fs,setTimeout(()=>{y(this,fs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,W)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,$o))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,W).getId()}combinedSignal(e){return l(this,W).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Et,_v))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,W).updateToolbar(e),l(this,W).updateMode(e);const{offsetX:i,offsetY:s}=A(this,Et,bv).call(this),r=this.getNextId(),o=A(this,Et,Sv).call(this,{parent:this,id:r,x:i,y:s,uiManager:l(this,W),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Wn,dr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,W)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=A(this,Et,Sv).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,W),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,Et,bv).call(this),!0)}setSelected(e){l(this,W).setSelected(e)}toggleSelected(e){l(this,W).toggleSelected(e)}unselect(e){l(this,W).unselect(e)}pointerup(e){const{isMac:t}=Wt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,hr)){if(y(this,hr,!1),!l(this,Hl)){y(this,Hl,!0);return}if(l(this,W).getMode()===te.STAMP){l(this,W).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,W).getMode()===te.HIGHLIGHT&&this.enableTextSelection(),l(this,hr)){y(this,hr,!1);return}const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;y(this,hr,!0);const i=l(this,W).getActive();y(this,Hl,!i||i.isEmpty())}findNewParent(e,t,i){const s=l(this,W).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,W).getActive())==null?void 0:e.parent)===this&&(l(this,W).commitOrRemove(),l(this,W).setActiveEditor(null)),l(this,fs)&&(clearTimeout(l(this,fs)),y(this,fs,null));for(const i of l(this,mn).values())(t=l(this,$o))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,mn).clear(),l(this,W).removeLayer(this)}render({viewport:e}){this.viewport=e,Qo(this.div,e);for(const t of l(this,W).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,W).commitOrRemove(),A(this,Et,of).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Qo(this.div,{rotation:i}),t!==i)for(const s of l(this,mn).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,W).viewParameters.realScale}};$o=new WeakMap,Hl=new WeakMap,Mi=new WeakMap,cr=new WeakMap,fs=new WeakMap,mn=new WeakMap,hr=new WeakMap,zl=new WeakMap,Bl=new WeakMap,Lt=new WeakMap,ps=new WeakMap,W=new WeakMap,dr=new WeakMap,Et=new WeakSet,Ub=function(e){l(this,W).unselectAll();const{target:t}=e;if(t===l(this,Lt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Lt).div.contains(t)){const{isMac:i}=Wt.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,W).showAllEditors("highlight",!0,!0),l(this,Lt).div.classList.add("free"),this.toggleDrawing(),Nf.startHighlighting(this,l(this,W).direction==="ltr",{target:l(this,Lt).div,x:e.x,y:e.y}),l(this,Lt).div.addEventListener("pointerup",()=>{l(this,Lt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,W)._signal}),e.preventDefault()}},_v=function(){return l(Wn,dr).get(l(this,W).getMode())},Sv=function(e){const t=l(this,Et,_v);return t?new t.prototype.constructor(e):null},bv=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),u=Math.min(window.innerHeight,t+s),c=(r+a)/2-e,h=(o+u)/2-t,[d,f]=this.viewport.rotation%180===0?[c,h]:[h,c];return{offsetX:d,offsetY:f}},of=function(){y(this,zl,!0);for(const e of l(this,mn).values())e.isEmpty()&&e.remove();y(this,zl,!1)},Y(Wn,"_initialized",!1),_(Wn,dr,new Map([ev,uv,yv,Nf].map(e=>[e._editorType,e])));let Ev=Wn;var Ii,kh,qe,gs,Th,Cv,na,kv,$b;const gt=class gt{constructor({pageIndex:e}){_(this,na);_(this,Ii,null);_(this,kh,0);_(this,qe,new Map);_(this,gs,new Map);this.pageIndex=e}setParent(e){if(!l(this,Ii)){y(this,Ii,e);return}if(l(this,Ii)!==e){if(l(this,qe).size>0)for(const t of l(this,qe).values())t.remove(),e.append(t);y(this,Ii,e)}}static get _svgFactory(){return ue(this,"_svgFactory",new Xy)}draw(e,t,i,s=!1){const r=Ot(this,kh)._++,o=A(this,na,kv).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=gt._svgFactory.createElement("defs");o.append(a);const u=gt._svgFactory.createElement("path");a.append(u);const c=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",c),u.setAttribute("d",e.toSVGPath()),s&&l(this,gs).set(r,u);const h=A(this,na,$b).call(this,a,c),d=gt._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),l(this,qe).set(r,o),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=Ot(this,kh)._++,i=A(this,na,kv).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const s=gt._svgFactory.createElement("defs");i.append(s);const r=gt._svgFactory.createElement("path");s.append(r);const o=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",o),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const h=gt._svgFactory.createElement("mask");s.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=gt._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=gt._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const u=gt._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),a&&u.setAttribute("mask",`url(#${a})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),l(this,qe).set(t,i),t}finalizeLine(e,t){const i=l(this,gs).get(e);l(this,gs).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,qe).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,gs).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;A(i=gt,Th,Cv).call(i,l(this,qe).get(e),t)}show(e,t){l(this,qe).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,qe).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,qe).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,qe).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,qe).get(e).classList.add(t)}removeClass(e,t){l(this,qe).get(e).classList.remove(t)}getSVGRoot(e){return l(this,qe).get(e)}remove(e){l(this,gs).delete(e),l(this,Ii)!==null&&(l(this,qe).get(e).remove(),l(this,qe).delete(e))}destroy(){y(this,Ii,null);for(const e of l(this,qe).values())e.remove();l(this,qe).clear(),l(this,gs).clear()}};Ii=new WeakMap,kh=new WeakMap,qe=new WeakMap,gs=new WeakMap,Th=new WeakSet,Cv=function(e,{x:t=0,y:i=0,width:s=1,height:r=1}={}){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},na=new WeakSet,kv=function(e){var i;const t=gt._svgFactory.create(1,1,!0);return l(this,Ii).append(t),t.setAttribute("aria-hidden",!0),A(i=gt,Th,Cv).call(i,t,e),t},$b=function(e,t){const i=gt._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=gt._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},_(gt,Th);let xv=gt;var lL=K.AbortException,uL=K.AnnotationEditorLayer,cL=K.AnnotationEditorParamsType,hL=K.AnnotationEditorType,dL=K.AnnotationEditorUIManager,Wb=K.AnnotationLayer,Vb=K.AnnotationMode,fL=K.ColorPicker,pL=K.DOMSVGFactory,gL=K.DrawLayer,mL=K.FeatureTest,kp=K.GlobalWorkerOptions,vL=K.ImageKind,yL=K.InvalidPDFException,wL=K.MissingPDFException,AL=K.OPS,EL=K.OutputScale,_L=K.PDFDataRangeTransport,SL=K.PDFDateString,bL=K.PDFWorker,xL=K.PasswordResponses,CL=K.PermissionFlag,kL=K.PixelsPerInch,TL=K.RenderingCancelledException,Gb=K.TextLayer,RL=K.UnexpectedResponseException,PL=K.Util,LL=K.VerbosityLevel,ML=K.XfaLayer,IL=K.build,FL=K.createValidAbsoluteUrl,DL=K.fetchData,Xb=K.getDocument,NL=K.getFilenameFromUrl,OL=K.getPdfFilenameFromUrl,jL=K.getXfaPageViewport,HL=K.isDataScheme,zL=K.isPdfFile,BL=K.noContextMenu,UL=K.normalizeUnicode,$L=K.setLayerDimensions,WL=K.shadow,VL=K.version;const GL=Object.freeze(Object.defineProperty({__proto__:null,AbortException:lL,AnnotationEditorLayer:uL,AnnotationEditorParamsType:cL,AnnotationEditorType:hL,AnnotationEditorUIManager:dL,AnnotationLayer:Wb,AnnotationMode:Vb,ColorPicker:fL,DOMSVGFactory:pL,DrawLayer:gL,FeatureTest:mL,GlobalWorkerOptions:kp,ImageKind:vL,InvalidPDFException:yL,MissingPDFException:wL,OPS:AL,OutputScale:EL,PDFDataRangeTransport:_L,PDFDateString:SL,PDFWorker:bL,PasswordResponses:xL,PermissionFlag:CL,PixelsPerInch:kL,RenderingCancelledException:TL,TextLayer:Gb,UnexpectedResponseException:RL,Util:PL,VerbosityLevel:LL,XfaLayer:ML,build:IL,createValidAbsoluteUrl:FL,fetchData:DL,getDocument:Xb,getFilenameFromUrl:NL,getPdfFilenameFromUrl:OL,getXfaPageViewport:jL,isDataScheme:HL,isPdfFile:zL,noContextMenu:BL,normalizeUnicode:UL,setLayerDimensions:$L,shadow:WL,version:VL},Symbol.toStringTag,{value:"Module"}));var at=function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},XL=["onCopy","onCut","onPaste"],YL=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],qL=["onFocus","onBlur"],KL=["onInput","onInvalid","onReset","onSubmit"],QL=["onLoad","onError"],JL=["onKeyDown","onKeyPress","onKeyUp"],ZL=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],eM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],tM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],nM=["onSelect"],iM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],sM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],rM=["onScroll"],oM=["onWheel"],aM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],lM=["onTransitionEnd"],uM=["onToggle"],cM=["onChange"],hM=at(at(at(at(at(at(at(at(at(at(at(at(at(at(at(at(at(at([],XL,!0),YL,!0),qL,!0),KL,!0),QL,!0),JL,!0),ZL,!0),eM,!0),tM,!0),nM,!0),iM,!0),sM,!0),rM,!0),oM,!0),aM,!0),lM,!0),cM,!0),uM,!0);function Yb(n,e){var t={};return hM.forEach(function(i){var s=n[i];s&&(e?t[i]=function(r){return s(r,e(i))}:t[i]=s)}),t}function zh(n){var e=!1,t=new Promise(function(i,s){n.then(function(r){return!e&&i(r)}).catch(function(r){return!e&&s(r)})});return{promise:t,cancel:function(){e=!0}}}function qb(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=qb(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Tp(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=qb(n))&&(i&&(i+=" "),i+=e);return i}var dM="Invariant failed";function _e(n,e){if(!n)throw new Error(dM)}var fM=function(){},pM=fM;const It=ep(pM);var Vw=Object.prototype.hasOwnProperty;function Gw(n,e,t){for(t of n.keys())if(Ua(t,e))return t}function Ua(n,e){var t,i,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Ua(n[i],e[i]););return i===-1}if(t===Set){if(n.size!==e.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=Gw(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=Gw(e,s),!s)||!Ua(i[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((i=n.byteLength)===e.byteLength)for(;i--&&n.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(Vw.call(n,t)&&++i&&!Vw.call(e,t)||!(t in e)||!Ua(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}const Kb=C.createContext(null);function $a({children:n,type:e}){return P.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const gM="noopener noreferrer nofollow";class mM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _e(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){_e(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{_e(this.pdfDocument),_e(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{_e(Array.isArray(t));const i=t[0];new Promise(s=>{_e(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{_e(!1)}):typeof i=="number"?s(i):_e(!1)}).then(s=>{const r=s+1;_e(this.pdfViewer),_e(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;_e(this.pdfViewer),_e(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||gM,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Xw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Rp=typeof window<"u",Qb=Rp&&window.location.protocol==="file:";function vM(n){return typeof n<"u"}function Dr(n){return vM(n)&&n!==null}function yM(n){return typeof n=="string"}function wM(n){return n instanceof ArrayBuffer}function AM(n){return _e(Rp),n instanceof Blob}function Tv(n){return yM(n)&&/^data:/.test(n)}function Yw(n){_e(Tv(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function EM(){return Rp&&window.devicePixelRatio||1}const Jb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function qw(){It(!Qb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Jb}`)}function _M(){It(!Qb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Jb}`)}function ea(n){n!=null&&n.cancel&&n.cancel()}function Rv(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function SM(n){return n.name==="RenderingCancelledException"}function bM(n){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}function xM(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ql(){return C.useReducer(xM,{value:void 0,error:void 0})}var CM=function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(d){o(d)}}function u(h){try{c(i.throw(h))}catch(d){o(d)}}function c(h){h.done?r(h.value):s(h.value).then(a,u)}c((i=i.apply(n,e||[])).next())})},Kw=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};const{PDFDataRangeTransport:kM}=GL,TM=(n,e)=>{switch(e){case Xw.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case Xw.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function Qw(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const Zb=C.forwardRef(function(e,t){var{children:i,className:s,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:u,inputRef:c,imageResourcesPath:h,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:w,onLoadSuccess:S,onPassword:g=TM,onSourceError:v,onSourceSuccess:E,options:b,renderMode:x,rotate:k}=e,T=Kw(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[R,M]=ql(),{value:I,error:D}=R,[Q,G]=ql(),{value:V,error:J}=Q,X=C.useRef(new mM),H=C.useRef([]),L=C.useRef(void 0),B=C.useRef(void 0);u&&u!==L.current&&Qw(u)&&(It(!Ua(u,L.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),L.current=u),b&&b!==B.current&&(It(!Ua(b,B.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),B.current=b);const $=C.useRef({scrollPageIntoView:Se=>{const{dest:Xe,pageNumber:St,pageIndex:ot=St-1}=Se;if(p){p({dest:Xe,pageIndex:ot,pageNumber:St});return}const ua=H.current[ot];if(ua){ua.scrollIntoView();return}It(!1,`An internal link leading to page ${St} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});C.useImperativeHandle(t,()=>({linkService:X,pages:H,viewer:$}),[]);function se(){E&&E()}function ee(){D&&(It(!1,D.toString()),v&&v(D))}function fe(){M({type:"RESET"})}C.useEffect(fe,[u,M]);const ze=C.useCallback(()=>CM(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return Tv(u)?{data:Yw(u)}:(qw(),{url:u});if(u instanceof kM)return{range:u};if(wM(u))return{data:u};if(Rp&&AM(u))return{data:yield bM(u)};if(_e(typeof u=="object"),_e(Qw(u)),"url"in u&&typeof u.url=="string"){if(Tv(u.url)){const{url:Se}=u,Xe=Kw(u,["url"]),St=Yw(Se);return Object.assign({data:St},Xe)}qw()}return u}),[u]);C.useEffect(()=>{const Se=zh(ze());return Se.promise.then(Xe=>{M({type:"RESOLVE",value:Xe})}).catch(Xe=>{M({type:"REJECT",error:Xe})}),()=>{ea(Se)}},[ze,M]),C.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){ee();return}se()}},[I]);function Nt(){V&&(S&&S(V),H.current=new Array(V.numPages),X.current.setDocument(V))}function ge(){J&&(It(!1,J.toString()),m&&m(J))}C.useEffect(function(){G({type:"RESET"})},[G,I]),C.useEffect(function(){if(!I)return;const Xe=b?Object.assign(Object.assign({},I),b):I,St=Xb(Xe);w&&(St.onProgress=w),g&&(St.onPassword=g);const ot=St,ua=ot.promise.then(iu=>{G({type:"RESOLVE",value:iu})}).catch(iu=>{ot.destroyed||G({type:"REJECT",error:iu})});return()=>{ua.finally(()=>ot.destroy())}},[b,G,I]),C.useEffect(()=>{if(!(typeof V>"u")){if(V===!1){ge();return}Nt()}},[V]),C.useEffect(function(){X.current.setViewer($.current),X.current.setExternalLinkRel(o),X.current.setExternalLinkTarget(a)},[o,a]);const le=C.useCallback((Se,Xe)=>{H.current[Se]=Xe},[]),di=C.useCallback(Se=>{delete H.current[Se]},[]),Un=C.useMemo(()=>({imageResourcesPath:h,linkService:X.current,onItemClick:p,pdf:V,registerPage:le,renderMode:x,rotate:k,unregisterPage:di}),[h,p,V,le,x,k,di]),Re=C.useMemo(()=>Yb(T,()=>V),[T,V]);function tu(){return P.jsx(Kb.Provider,{value:Un,children:i})}function nu(){return u?V==null?P.jsx($a,{type:"loading",children:typeof d=="function"?d():d}):V===!1?P.jsx($a,{type:"error",children:typeof r=="function"?r():r}):tu():P.jsx($a,{type:"no-data",children:typeof f=="function"?f():f})}return P.jsx("div",Object.assign({className:Tp("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},Re,{children:nu()}))});function e1(){return C.useContext(Kb)}function t1(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(r){t.forEach(function(o){typeof o=="function"?o(r):o&&(o.current=r)})}}const n1=C.createContext(null),i1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},RM=/^H(\d+)$/;function PM(n){return n in i1}function Pp(n){return"children"in n}function s1(n){return Pp(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function LM(n){const e={};if(Pp(n)){const{role:t}=n,i=t.match(RM);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(PM(t)){const s=i1[t];s&&(e.role=s)}}return e}function r1(n){const e={};if(Pp(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),s1(n)){const[t]=n.children;if(t){const i=r1(t);return Object.assign(Object.assign({},e),i)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function MM(n){return n?Object.assign(Object.assign({},LM(n)),r1(n)):null}function o1({className:n,node:e}){const t=C.useMemo(()=>MM(e),[e]),i=C.useMemo(()=>!Pp(e)||s1(e)?null:e.children.map((s,r)=>P.jsx(o1,{node:s},r)),[e]);return P.jsx("span",Object.assign({className:n},t,{children:i}))}function Lp(){return C.useContext(n1)}function IM(){const n=Lp();_e(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[i,s]=ql(),{value:r,error:o}=i,{customTextRenderer:a,page:u}=n;function c(){r&&t&&t(r)}function h(){o&&(It(!1,o.toString()),e&&e(o))}return C.useEffect(function(){s({type:"RESET"})},[s,u]),C.useEffect(function(){if(a||!u)return;const f=zh(u.getStructTree()),p=f;return f.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>ea(p)},[a,u,s]),C.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}c()}},[r]),r?P.jsx(o1,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Jw=Vb;function FM(n){const e=Lp();_e(e);const t=Object.assign(Object.assign({},e),n),{_className:i,canvasBackground:s,devicePixelRatio:r=EM(),onRenderError:o,onRenderSuccess:a,page:u,renderForms:c,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:p}=n;_e(u);const m=C.useRef(null);function w(){u&&a&&a(Rv(u,f))}function S(b){SM(b)||(It(!1,b.toString()),o&&o(b))}const g=C.useMemo(()=>u.getViewport({scale:f*r,rotation:d}),[r,u,d,f]),v=C.useMemo(()=>u.getViewport({scale:f,rotation:d}),[u,d,f]);C.useEffect(function(){if(!u)return;u.cleanup();const{current:x}=m;if(!x)return;x.width=g.width,x.height=g.height,x.style.width=`${Math.floor(v.width)}px`,x.style.height=`${Math.floor(v.height)}px`,x.style.visibility="hidden";const k={annotationMode:c?Jw.ENABLE_FORMS:Jw.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:g};s&&(k.background=s);const T=u.render(k),R=T;return T.promise.then(()=>{x.style.visibility="",w()}).catch(S),()=>ea(R)},[s,u,c,g,v]);const E=C.useCallback(()=>{const{current:b}=m;b&&(b.width=0,b.height=0)},[]);return C.useEffect(()=>E,[E]),P.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:t1(p,m),style:{display:"block",userSelect:"none"},children:h?P.jsx(IM,{}):null})}function DM(n){return"str"in n}function NM(){const n=Lp();_e(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:u,rotate:c,scale:h}=n;_e(o);const[d,f]=ql(),{value:p,error:m}=d,w=C.useRef(null);It(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){p&&i&&i(p)}function g(){m&&(It(!1,m.toString()),t&&t(m))}C.useEffect(function(){f({type:"RESET"})},[o,f]),C.useEffect(function(){if(!o)return;const R=zh(o.getTextContent()),M=R;return R.promise.then(I=>{f({type:"RESOLVE",value:I})}).catch(I=>{f({type:"REJECT",error:I})}),()=>ea(M)},[o,f]),C.useEffect(()=>{if(p!==void 0){if(p===!1){g();return}S()}},[p]);const v=C.useCallback(()=>{r&&r()},[r]),E=C.useCallback(T=>{It(!1,T.toString()),s&&s(T)},[s]);function b(){const T=w.current;T&&T.classList.add("selecting")}function x(){const T=w.current;T&&T.classList.remove("selecting")}const k=C.useMemo(()=>o.getViewport({scale:h,rotation:c}),[o,c,h]);return C.useLayoutEffect(function(){if(!o||!p)return;const{current:R}=w;if(!R)return;R.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),I={container:R,textContentSource:M,viewport:k},D=new Gb(I),Q=D;return D.render().then(()=>{const G=document.createElement("div");G.className="endOfContent",R.append(G);const V=R.querySelectorAll('[role="presentation"]');if(e){let J=0;p.items.forEach((X,H)=>{if(!DM(X))return;const L=V[J];if(!L)return;const B=e(Object.assign({pageIndex:a,pageNumber:u,itemIndex:H},X));L.innerHTML=B,J+=X.str&&X.hasEOL?2:1})}v()}).catch(E),()=>ea(Q)},[e,E,v,o,a,u,p,k]),P.jsx("div",{className:Tp("react-pdf__Page__textContent","textLayer"),onMouseUp:x,onMouseDown:b,ref:w})}function OM(){const n=e1(),e=Lp();_e(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:u,page:c,pdf:h,renderForms:d,rotate:f,scale:p=1}=t;_e(h),_e(c),_e(s);const[m,w]=ql(),{value:S,error:g}=m,v=C.useRef(null);It(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){S&&o&&o(S)}function b(){g&&(It(!1,g.toString()),r&&r(g))}C.useEffect(function(){w({type:"RESET"})},[w,c]),C.useEffect(function(){if(!c)return;const M=zh(c.getAnnotations()),I=M;return M.promise.then(D=>{w({type:"RESOLVE",value:D})}).catch(D=>{w({type:"REJECT",error:D})}),()=>{ea(I)}},[w,c]),C.useEffect(()=>{if(S!==void 0){if(S===!1){b();return}E()}},[S]);function x(){u&&u()}function k(R){It(!1,`${R}`),a&&a(R)}const T=C.useMemo(()=>c.getViewport({scale:p,rotation:f}),[c,f,p]);return C.useEffect(function(){if(!h||!c||!s||!S)return;const{current:M}=v;if(!M)return;const I=T.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:M,l10n:null,page:c,structTreeLayer:null,viewport:I},Q={annotations:S,annotationStorage:h.annotationStorage,div:M,imageResourcesPath:i,linkService:s,page:c,renderForms:d,viewport:I};M.innerHTML="";try{new Wb(D).render(Q),x()}catch(G){k(G)}return()=>{}},[S,i,s,c,h,d,T]),P.jsx("div",{className:Tp("react-pdf__Page__annotations","annotationLayer"),ref:v})}var jM=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};const Zw=1;function a1(n){const e=e1(),t=Object.assign(Object.assign({},e),n),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:a,className:u,customRenderer:c,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:m,loading:w="Loading page",noData:S="No page specified.",onGetAnnotationsError:g,onGetAnnotationsSuccess:v,onGetStructTreeError:E,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:k,onLoadError:T,onLoadSuccess:R,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:D,onRenderSuccess:Q,onRenderTextLayerError:G,onRenderTextLayerSuccess:V,pageIndex:J,pageNumber:X,pdf:H,registerPage:L,renderAnnotationLayer:B=!0,renderForms:$=!1,renderMode:se="canvas",renderTextLayer:ee=!0,rotate:fe,scale:ze=Zw,unregisterPage:Nt,width:ge}=t,le=jM(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[di,Un]=ql(),{value:Re,error:tu}=di,nu=C.useRef(null);_e(H);const Se=Dr(X)?X-1:J??null,Xe=X??(Dr(J)?J+1:null),St=fe??(Re?Re.rotate:null),ot=C.useMemo(()=>{if(!Re)return null;let ca=1;const Uh=ze??Zw;if(ge||p){const $h=Re.getViewport({scale:1,rotation:St});ge?ca=ge/$h.width:p&&(ca=p/$h.height)}return Uh*ca},[p,Re,St,ze,ge]);C.useEffect(function(){return()=>{Dr(Se)&&s&&Nt&&Nt(Se)}},[s,H,Se,Nt]);function ua(){if(R){if(!Re||!ot)return;R(Rv(Re,ot))}if(s&&L){if(!Dr(Se)||!nu.current)return;L(Se,nu.current)}}function iu(){tu&&(It(!1,tu.toString()),T&&T(tu))}C.useEffect(function(){Un({type:"RESET"})},[Un,H,Se]),C.useEffect(function(){if(!H||!Xe)return;const Uh=zh(H.getPage(Xe)),$h=Uh;return Uh.promise.then(Mp=>{Un({type:"RESOLVE",value:Mp})}).catch(Mp=>{Un({type:"REJECT",error:Mp})}),()=>ea($h)},[Un,H,Xe]),C.useEffect(()=>{if(Re!==void 0){if(Re===!1){iu();return}ua()}},[Re,ot]);const l1=C.useMemo(()=>Re&&Dr(Se)&&Xe&&Dr(St)&&Dr(ot)?{_className:i,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:g,onGetAnnotationsSuccess:v,onGetStructTreeError:E,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:k,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:D,onRenderSuccess:Q,onRenderTextLayerError:G,onRenderTextLayerSuccess:V,page:Re,pageIndex:Se,pageNumber:Xe,renderForms:$,renderTextLayer:ee,rotate:St,scale:ot}:null,[i,r,h,d,g,v,E,b,x,k,M,I,D,Q,G,V,Re,Se,Xe,$,ee,St,ot]),u1=C.useMemo(()=>Yb(le,()=>Re&&(ot?Rv(Re,ot):void 0)),[le,Re,ot]),Bh=`${Se}@${ot}/${St}`;function c1(){switch(se){case"custom":return _e(c),P.jsx(c,{},`${Bh}_custom`);case"none":return null;case"canvas":default:return P.jsx(FM,{canvasRef:o},`${Bh}_canvas`)}}function h1(){return ee?P.jsx(NM,{},`${Bh}_text`):null}function d1(){return B?P.jsx(OM,{},`${Bh}_annotations`):null}function f1(){return P.jsxs(n1.Provider,{value:l1,children:[c1(),h1(),d1(),a]})}function p1(){return Xe?H===null||Re===void 0||Re===null?P.jsx($a,{type:"loading",children:typeof w=="function"?w():w}):H===!1||Re===!1?P.jsx($a,{type:"error",children:typeof f=="function"?f():f}):f1():P.jsx($a,{type:"no-data",children:typeof S=="function"?S():S})}return P.jsx("div",Object.assign({className:Tp(i,u),"data-page-number":Xe,ref:t1(m,nu),style:{"--scale-factor":`${ot}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},u1,{children:p1()}))}_M();kp.workerSrc="pdf.worker.mjs";const HM="/Official%20Divestment%20Demand%20for%20UMaine%20System.pdf";kp.workerSrc=new URL("/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();function zM(){C.useEffect(()=>(window.scrollTo(0,0),t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)),[]);const[n,e]=C.useState(window.outerWidth);function t(){window.outerWidth>window.outerHeight?e(1e3):e(window.outerWidth)}return P.jsxs(P.Fragment,{children:[P.jsx(Dy,{}),P.jsxs("div",{className:"page-content",children:[P.jsx("section",{className:"main-nav-section",style:{paddingTop:"2rem"},children:P.jsx("h2",{children:"Our Demands to the University of Maine System"})}),P.jsx("div",{className:"pdf-wrapper",children:P.jsx(Zb,{file:HM,children:[1,2,3,4,5,6,7].map(i=>P.jsx(a1,{pageNumber:i,width:n,className:"pdf-page"},i))})}),P.jsx("footer",{})]})]})}const BM="/Minutes%20July%201982%20BOT%20Meeting.pdf";kp.workerSrc=new URL("/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();function UM(){C.useEffect(()=>(window.scrollTo(0,0),t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)),[]);const[n,e]=C.useState(window.outerWidth);function t(){window.outerWidth>window.outerHeight?e(1e3):e(window.outerWidth)}return P.jsxs(P.Fragment,{children:[P.jsx(Dy,{}),P.jsxs("div",{className:"page-content",children:[P.jsxs("section",{className:"main-nav-section",style:{paddingTop:"2rem"},children:[P.jsx("h2",{children:"Minutes from the Meeting of the University of Maine Board of Trustees, July 26, 1982"}),P.jsx("p",{children:"In 1982, the University of Maine was the fourth university in the United States to divest from apartheid South Africa and complicit corporations. This action, taken by the board in response to pressure from students and faculty, helped inspire other schools to divest and was part of a movement that led to the dissolution of the apartheid regime in South Africa and the liberation of its people. At the time, the board held that Apartheid conflicts with the values of the university."}),P.jsxs("p",{children:["Today, the state of Israel has been identified as responsible for a system of apartheid in the West Bank of Occupied Palestine by the"," ",P.jsx("a",{href:"https://www.un.org/unispal/wp-content/uploads/2022/10/A.77.356_210922.pdf",target:"_blank",rel:"noreferrer",children:"United Nations Special Rapporteur on the occupied Palestinian territories"}),", and the"," ",P.jsx("a",{href:"https://www.hrw.org/news/2024/07/19/world-court-finds-israel-responsible-apartheid",target:"_blank",rel:"noreferrer",children:"International Court of Justice"}),". In addition, the conditions it is inflicting on the Palestinians in Gaza amount to genocide. It is therefore the responsibility of our board of trustees to uphold its values and divest from the state of Israel and all corporations complicit in its apartheid regime and genocidal war."]}),P.jsx("p",{children:"The text of the 1982 decision can be found below."})]}),P.jsx("div",{className:"pdf-wrapper",children:P.jsx(Zb,{file:BM,children:[1,2,3,4,5].map(i=>P.jsx(a1,{pageNumber:i,width:n,className:"pdf-page"},i))})}),P.jsx("footer",{})]})]})}p_(document.getElementById("root")).render(P.jsx(C.StrictMode,{children:P.jsx(GT,{children:P.jsxs(_T,{children:[P.jsx(Cd,{path:"/",element:P.jsx(rR,{})}),P.jsx(Cd,{path:"/demands",element:P.jsx(zM,{})}),P.jsx(Cd,{path:"/minutes-1982",element:P.jsx(UM,{})})]})})}));
